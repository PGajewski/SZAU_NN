%uczenie predyktora oe
clear all;
n=0; farx(n+1)=2.995090e+002; foe(n+1)=3.067715e+002; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=1.632963e+002; foe(n+1)=1.681829e+002; krok(n+1)=4.811061e-004; ng(n+1)=1.124421e+003;
n=2; farx(n+1)=5.263892e+001; foe(n+1)=5.982172e+001; krok(n+1)=8.095305e-003; ng(n+1)=2.987732e+002;
n=3; farx(n+1)=4.797850e+001; foe(n+1)=5.325455e+001; krok(n+1)=1.427772e-003; ng(n+1)=2.940803e+002;
n=4; farx(n+1)=4.598991e+001; foe(n+1)=5.176989e+001; krok(n+1)=3.128460e-003; ng(n+1)=1.168703e+002;
n=5; farx(n+1)=2.042945e+001; foe(n+1)=3.779841e+001; krok(n+1)=2.876670e-002; ng(n+1)=1.065473e+002;
n=6; farx(n+1)=1.325389e+001; foe(n+1)=2.755072e+001; krok(n+1)=1.812955e-003; ng(n+1)=5.662921e+002;
n=7; farx(n+1)=1.277122e+001; foe(n+1)=2.585951e+001; krok(n+1)=1.477304e-004; ng(n+1)=9.356073e+002;
n=8; farx(n+1)=1.309194e+001; foe(n+1)=2.254940e+001; krok(n+1)=1.684199e-002; ng(n+1)=9.284060e+002;
n=9; farx(n+1)=1.197757e+001; foe(n+1)=2.150051e+001; krok(n+1)=1.725161e-002; ng(n+1)=2.677511e+002;
n=10; farx(n+1)=1.133343e+001; foe(n+1)=2.099150e+001; krok(n+1)=6.607631e-003; ng(n+1)=1.438617e+002;
n=11; farx(n+1)=9.052046e+000; foe(n+1)=1.609240e+001; krok(n+1)=1.816020e-002; ng(n+1)=2.300983e+002;
n=12; farx(n+1)=8.617916e+000; foe(n+1)=1.571479e+001; krok(n+1)=6.037139e-004; ng(n+1)=3.657187e+002;
n=13; farx(n+1)=7.416536e+000; foe(n+1)=1.486278e+001; krok(n+1)=7.980009e-003; ng(n+1)=2.289394e+002;
n=14; farx(n+1)=5.960586e+000; foe(n+1)=1.350369e+001; krok(n+1)=2.050616e-003; ng(n+1)=3.230653e+002;
n=15; farx(n+1)=3.943014e+000; foe(n+1)=1.217607e+001; krok(n+1)=3.571281e-002; ng(n+1)=2.507699e+002;
n=16; farx(n+1)=3.099256e+000; foe(n+1)=1.119942e+001; krok(n+1)=2.464960e-003; ng(n+1)=4.279931e+002;
n=17; farx(n+1)=2.860956e+000; foe(n+1)=1.088593e+001; krok(n+1)=3.898185e-003; ng(n+1)=3.213942e+002;
n=18; farx(n+1)=2.659955e+000; foe(n+1)=1.057576e+001; krok(n+1)=1.349272e-002; ng(n+1)=2.645923e+002;
n=19; farx(n+1)=1.925577e+000; foe(n+1)=9.225586e+000; krok(n+1)=1.863402e-002; ng(n+1)=5.323570e+002;
n=20; farx(n+1)=1.830176e+000; foe(n+1)=8.519333e+000; krok(n+1)=4.606611e-003; ng(n+1)=4.436770e+002;
n=21; farx(n+1)=1.939951e+000; foe(n+1)=7.646755e+000; krok(n+1)=9.600292e-004; ng(n+1)=6.454723e+002;
n=22; farx(n+1)=1.906188e+000; foe(n+1)=7.067232e+000; krok(n+1)=1.154146e-002; ng(n+1)=6.772148e+002;
n=23; farx(n+1)=2.119178e+000; foe(n+1)=5.865740e+000; krok(n+1)=1.660195e-002; ng(n+1)=6.008033e+002;
n=24; farx(n+1)=1.573682e+000; foe(n+1)=4.564261e+000; krok(n+1)=3.790730e-002; ng(n+1)=4.621913e+002;
n=25; farx(n+1)=1.198327e+000; foe(n+1)=3.552750e+000; krok(n+1)=1.462925e-002; ng(n+1)=3.143880e+002;
%odnowa zmiennej metryki
n=26; farx(n+1)=1.134535e+000; foe(n+1)=3.352990e+000; krok(n+1)=2.609844e-005; ng(n+1)=3.710710e+002;
n=27; farx(n+1)=1.080835e+000; foe(n+1)=2.741878e+000; krok(n+1)=8.669030e-005; ng(n+1)=3.695716e+002;
n=28; farx(n+1)=1.103978e+000; foe(n+1)=2.712874e+000; krok(n+1)=1.582138e-004; ng(n+1)=6.800897e+001;
n=29; farx(n+1)=8.669018e-001; foe(n+1)=2.272286e+000; krok(n+1)=2.778799e-003; ng(n+1)=5.034633e+001;
n=30; farx(n+1)=7.232336e-001; foe(n+1)=1.993066e+000; krok(n+1)=1.038090e-002; ng(n+1)=5.917484e+001;
n=31; farx(n+1)=6.201110e-001; foe(n+1)=1.811574e+000; krok(n+1)=6.244283e-003; ng(n+1)=1.581035e+002;
n=32; farx(n+1)=4.825609e-001; foe(n+1)=1.428654e+000; krok(n+1)=2.339865e-002; ng(n+1)=1.318303e+002;
n=33; farx(n+1)=4.731864e-001; foe(n+1)=1.377245e+000; krok(n+1)=1.008597e-002; ng(n+1)=1.353384e+002;
n=34; farx(n+1)=4.519356e-001; foe(n+1)=1.267304e+000; krok(n+1)=2.262062e-002; ng(n+1)=1.226387e+002;
n=35; farx(n+1)=4.337086e-001; foe(n+1)=1.215073e+000; krok(n+1)=4.095430e-003; ng(n+1)=1.115384e+002;
n=36; farx(n+1)=4.053274e-001; foe(n+1)=1.091849e+000; krok(n+1)=5.180633e-002; ng(n+1)=1.152469e+002;
n=37; farx(n+1)=3.984572e-001; foe(n+1)=1.032064e+000; krok(n+1)=3.805310e-002; ng(n+1)=3.704345e+001;
n=38; farx(n+1)=3.989052e-001; foe(n+1)=1.000149e+000; krok(n+1)=3.301014e-002; ng(n+1)=1.702156e+002;
n=39; farx(n+1)=3.891404e-001; foe(n+1)=9.659550e-001; krok(n+1)=1.021537e-002; ng(n+1)=1.033287e+002;
n=40; farx(n+1)=3.873739e-001; foe(n+1)=9.225042e-001; krok(n+1)=3.052860e-002; ng(n+1)=1.106097e+002;
n=41; farx(n+1)=3.832632e-001; foe(n+1)=8.548483e-001; krok(n+1)=4.633705e-002; ng(n+1)=5.674665e+001;
n=42; farx(n+1)=3.804884e-001; foe(n+1)=8.228002e-001; krok(n+1)=1.835014e-002; ng(n+1)=9.240675e+001;
n=43; farx(n+1)=3.666411e-001; foe(n+1)=7.989683e-001; krok(n+1)=1.450364e-002; ng(n+1)=9.758464e+001;
n=44; farx(n+1)=3.450363e-001; foe(n+1)=7.732590e-001; krok(n+1)=6.013604e-002; ng(n+1)=5.948959e+001;
n=45; farx(n+1)=3.378670e-001; foe(n+1)=7.645354e-001; krok(n+1)=5.483245e-002; ng(n+1)=7.060449e+001;
n=46; farx(n+1)=3.425933e-001; foe(n+1)=7.482969e-001; krok(n+1)=7.361186e-002; ng(n+1)=9.345238e+001;
n=47; farx(n+1)=3.590503e-001; foe(n+1)=7.130225e-001; krok(n+1)=4.686024e-001; ng(n+1)=2.851241e+001;
n=48; farx(n+1)=3.641561e-001; foe(n+1)=7.030957e-001; krok(n+1)=8.316649e-002; ng(n+1)=4.450422e+001;
n=49; farx(n+1)=3.659784e-001; foe(n+1)=6.937670e-001; krok(n+1)=4.388300e-002; ng(n+1)=7.545265e+001;
n=50; farx(n+1)=3.510217e-001; foe(n+1)=6.835067e-001; krok(n+1)=1.846634e-001; ng(n+1)=2.872228e+001;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
