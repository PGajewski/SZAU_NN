%uczenie predyktora oe
clear all;
n=0; farx(n+1)=3.054919e+002; foe(n+1)=3.077013e+002; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=1.663858e+002; foe(n+1)=1.685622e+002; krok(n+1)=4.895958e-004; ng(n+1)=1.099918e+003;
n=2; farx(n+1)=5.745091e+001; foe(n+1)=6.120660e+001; krok(n+1)=8.204311e-003; ng(n+1)=3.331897e+002;
n=3; farx(n+1)=5.396780e+001; foe(n+1)=5.663988e+001; krok(n+1)=1.632192e-003; ng(n+1)=2.671181e+002;
n=4; farx(n+1)=5.230614e+001; foe(n+1)=5.587217e+001; krok(n+1)=3.966104e-003; ng(n+1)=8.118661e+001;
n=5; farx(n+1)=2.174052e+001; foe(n+1)=4.534544e+001; krok(n+1)=3.196342e-002; ng(n+1)=9.882382e+001;
n=6; farx(n+1)=9.192986e+000; foe(n+1)=3.513027e+001; krok(n+1)=4.247228e-003; ng(n+1)=7.021545e+002;
n=7; farx(n+1)=8.433889e+000; foe(n+1)=3.392834e+001; krok(n+1)=2.111695e-004; ng(n+1)=1.783222e+003;
n=8; farx(n+1)=8.366761e+000; foe(n+1)=3.367627e+001; krok(n+1)=6.629006e-004; ng(n+1)=2.160843e+003;
n=9; farx(n+1)=8.036797e+000; foe(n+1)=2.289169e+001; krok(n+1)=5.548179e-003; ng(n+1)=2.162863e+003;
n=10; farx(n+1)=7.991151e+000; foe(n+1)=2.248536e+001; krok(n+1)=2.852289e-004; ng(n+1)=1.536849e+003;
n=11; farx(n+1)=9.473940e+000; foe(n+1)=2.014214e+001; krok(n+1)=1.381589e-002; ng(n+1)=1.403910e+003;
n=12; farx(n+1)=1.055495e+001; foe(n+1)=1.835243e+001; krok(n+1)=3.204735e-003; ng(n+1)=4.583817e+002;
n=13; farx(n+1)=1.090734e+001; foe(n+1)=1.758660e+001; krok(n+1)=4.904691e-003; ng(n+1)=4.822535e+002;
n=14; farx(n+1)=9.576056e+000; foe(n+1)=1.532413e+001; krok(n+1)=2.024365e-002; ng(n+1)=1.795091e+002;
n=15; farx(n+1)=8.333190e+000; foe(n+1)=1.363510e+001; krok(n+1)=1.596002e-002; ng(n+1)=3.949295e+002;
n=16; farx(n+1)=6.984349e+000; foe(n+1)=1.271819e+001; krok(n+1)=3.081734e-002; ng(n+1)=2.473507e+002;
n=17; farx(n+1)=5.976889e+000; foe(n+1)=1.176334e+001; krok(n+1)=9.175071e-003; ng(n+1)=3.074084e+002;
n=18; farx(n+1)=4.100504e+000; foe(n+1)=1.006044e+001; krok(n+1)=8.516524e-003; ng(n+1)=2.157511e+002;
n=19; farx(n+1)=3.120565e+000; foe(n+1)=8.861782e+000; krok(n+1)=1.226153e-002; ng(n+1)=4.757585e+002;
n=20; farx(n+1)=2.338949e+000; foe(n+1)=7.998744e+000; krok(n+1)=1.111520e-002; ng(n+1)=2.081110e+002;
n=21; farx(n+1)=2.073248e+000; foe(n+1)=7.658917e+000; krok(n+1)=1.706649e-002; ng(n+1)=2.382378e+002;
n=22; farx(n+1)=1.604558e+000; foe(n+1)=6.608416e+000; krok(n+1)=2.128042e-002; ng(n+1)=4.119352e+002;
n=23; farx(n+1)=1.297506e+000; foe(n+1)=6.144754e+000; krok(n+1)=3.678347e-002; ng(n+1)=4.964639e+002;
n=24; farx(n+1)=1.057289e+000; foe(n+1)=5.843858e+000; krok(n+1)=5.915258e-003; ng(n+1)=4.237256e+002;
n=25; farx(n+1)=9.116714e-001; foe(n+1)=5.463539e+000; krok(n+1)=1.650423e-002; ng(n+1)=4.310695e+002;
%odnowa zmiennej metryki
n=26; farx(n+1)=8.918139e-001; foe(n+1)=5.148850e+000; krok(n+1)=1.583652e-005; ng(n+1)=4.781570e+002;
n=27; farx(n+1)=8.899503e-001; foe(n+1)=5.105210e+000; krok(n+1)=1.069939e-005; ng(n+1)=2.849356e+002;
n=28; farx(n+1)=9.096954e-001; foe(n+1)=5.063384e+000; krok(n+1)=3.211908e-004; ng(n+1)=4.716891e+001;
n=29; farx(n+1)=8.473645e-001; foe(n+1)=4.681811e+000; krok(n+1)=3.135616e-003; ng(n+1)=4.994406e+001;
n=30; farx(n+1)=8.967070e-001; foe(n+1)=4.339513e+000; krok(n+1)=3.475615e-003; ng(n+1)=1.552595e+002;
n=31; farx(n+1)=8.707221e-001; foe(n+1)=3.987400e+000; krok(n+1)=2.914778e-003; ng(n+1)=2.907237e+002;
n=32; farx(n+1)=8.577788e-001; foe(n+1)=3.251936e+000; krok(n+1)=6.681129e-003; ng(n+1)=4.644530e+002;
n=33; farx(n+1)=7.952863e-001; foe(n+1)=2.755950e+000; krok(n+1)=3.387226e-002; ng(n+1)=2.730767e+002;
n=34; farx(n+1)=7.941884e-001; foe(n+1)=2.488295e+000; krok(n+1)=2.117795e-003; ng(n+1)=3.791075e+002;
n=35; farx(n+1)=7.209883e-001; foe(n+1)=2.267817e+000; krok(n+1)=3.334617e-003; ng(n+1)=3.010809e+002;
n=36; farx(n+1)=6.883057e-001; foe(n+1)=1.944352e+000; krok(n+1)=1.199953e-002; ng(n+1)=1.079095e+002;
n=37; farx(n+1)=6.387158e-001; foe(n+1)=1.840053e+000; krok(n+1)=6.607631e-003; ng(n+1)=6.137724e+001;
n=38; farx(n+1)=5.410686e-001; foe(n+1)=1.618577e+000; krok(n+1)=1.448480e-002; ng(n+1)=2.906393e+002;
n=39; farx(n+1)=4.565426e-001; foe(n+1)=1.389464e+000; krok(n+1)=1.958773e-002; ng(n+1)=3.382541e+002;
n=40; farx(n+1)=4.033192e-001; foe(n+1)=1.129086e+000; krok(n+1)=1.511435e-002; ng(n+1)=4.680451e+002;
n=41; farx(n+1)=3.966542e-001; foe(n+1)=1.087384e+000; krok(n+1)=1.610734e-002; ng(n+1)=9.812829e+001;
n=42; farx(n+1)=4.109818e-001; foe(n+1)=9.651434e-001; krok(n+1)=4.633705e-002; ng(n+1)=1.614321e+002;
n=43; farx(n+1)=4.000928e-001; foe(n+1)=9.285446e-001; krok(n+1)=3.497807e-002; ng(n+1)=1.330836e+002;
n=44; farx(n+1)=4.159033e-001; foe(n+1)=8.818669e-001; krok(n+1)=8.100548e-002; ng(n+1)=9.715214e+001;
n=45; farx(n+1)=3.923150e-001; foe(n+1)=8.450471e-001; krok(n+1)=5.079872e-002; ng(n+1)=6.050509e+001;
n=46; farx(n+1)=3.863254e-001; foe(n+1)=8.166779e-001; krok(n+1)=4.366353e-002; ng(n+1)=1.456535e+002;
n=47; farx(n+1)=3.719836e-001; foe(n+1)=7.691968e-001; krok(n+1)=3.403631e-001; ng(n+1)=5.561176e+001;
n=48; farx(n+1)=3.541463e-001; foe(n+1)=7.502950e-001; krok(n+1)=1.556123e-001; ng(n+1)=8.380932e+001;
n=49; farx(n+1)=3.524421e-001; foe(n+1)=7.365493e-001; krok(n+1)=3.276650e-001; ng(n+1)=3.872364e+001;
n=50; farx(n+1)=3.471209e-001; foe(n+1)=7.245486e-001; krok(n+1)=2.093785e-001; ng(n+1)=3.928255e+001;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
