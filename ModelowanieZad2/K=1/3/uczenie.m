%uczenie predyktora oe
clear all;
n=0; farx(n+1)=2.309385e+002; foe(n+1)=2.321190e+002; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=1.763165e+002; foe(n+1)=1.776071e+002; krok(n+1)=4.994367e-004; ng(n+1)=3.777131e+002;
n=2; farx(n+1)=5.629467e+001; foe(n+1)=6.168037e+001; krok(n+1)=3.556534e-002; ng(n+1)=4.114699e+001;
n=3; farx(n+1)=5.574369e+001; foe(n+1)=6.093353e+001; krok(n+1)=1.752601e-004; ng(n+1)=2.305711e+002;
n=4; farx(n+1)=7.042432e+001; foe(n+1)=5.684430e+001; krok(n+1)=1.057221e-001; ng(n+1)=2.544649e+002;
n=5; farx(n+1)=7.872056e+001; foe(n+1)=5.470885e+001; krok(n+1)=2.760258e-001; ng(n+1)=1.120411e+002;
n=6; farx(n+1)=4.733346e+001; foe(n+1)=5.016827e+001; krok(n+1)=1.886278e-001; ng(n+1)=9.325601e+001;
n=7; farx(n+1)=1.539677e+001; foe(n+1)=3.656722e+001; krok(n+1)=3.655097e-001; ng(n+1)=1.575070e+002;
n=8; farx(n+1)=9.895691e+000; foe(n+1)=3.255059e+001; krok(n+1)=4.666801e-002; ng(n+1)=5.087914e+002;
n=9; farx(n+1)=9.139353e+000; foe(n+1)=2.277585e+001; krok(n+1)=1.407955e-001; ng(n+1)=6.313204e+002;
n=10; farx(n+1)=9.146980e+000; foe(n+1)=2.276427e+001; krok(n+1)=4.168272e-004; ng(n+1)=5.170307e+002;
n=11; farx(n+1)=9.370672e+000; foe(n+1)=2.250660e+001; krok(n+1)=1.080437e-002; ng(n+1)=2.098284e+002;
n=12; farx(n+1)=8.333996e+000; foe(n+1)=2.072287e+001; krok(n+1)=3.170262e-001; ng(n+1)=2.877803e+003;
n=13; farx(n+1)=6.808665e+000; foe(n+1)=1.953072e+001; krok(n+1)=3.862514e-001; ng(n+1)=8.126544e+002;
n=14; farx(n+1)=6.226758e+000; foe(n+1)=1.711531e+001; krok(n+1)=3.568867e+000; ng(n+1)=1.755158e+002;
n=15; farx(n+1)=3.529063e+000; foe(n+1)=1.463880e+001; krok(n+1)=1.961613e+000; ng(n+1)=9.913521e+001;
n=16; farx(n+1)=3.126240e+000; foe(n+1)=1.315045e+001; krok(n+1)=4.854703e-001; ng(n+1)=2.331072e+002;
n=17; farx(n+1)=2.549620e+000; foe(n+1)=1.184980e+001; krok(n+1)=5.714050e-001; ng(n+1)=1.694906e+002;
n=18; farx(n+1)=2.025744e+000; foe(n+1)=1.064553e+001; krok(n+1)=1.462039e+000; ng(n+1)=4.915196e+001;
n=19; farx(n+1)=1.859919e+000; foe(n+1)=1.029021e+001; krok(n+1)=6.698571e-001; ng(n+1)=6.616840e+001;
n=20; farx(n+1)=1.482991e+000; foe(n+1)=9.085009e+000; krok(n+1)=4.681360e-001; ng(n+1)=6.081151e+001;
n=21; farx(n+1)=1.390730e+000; foe(n+1)=8.890831e+000; krok(n+1)=3.556863e-001; ng(n+1)=7.070095e+001;
n=22; farx(n+1)=1.404980e+000; foe(n+1)=8.722983e+000; krok(n+1)=3.044248e-001; ng(n+1)=8.470567e+001;
n=23; farx(n+1)=1.345312e+000; foe(n+1)=8.635828e+000; krok(n+1)=8.352074e-001; ng(n+1)=3.687021e+001;
n=24; farx(n+1)=1.211832e+000; foe(n+1)=8.496675e+000; krok(n+1)=1.722419e+000; ng(n+1)=4.291861e+001;
n=25; farx(n+1)=1.166462e+000; foe(n+1)=8.399331e+000; krok(n+1)=6.665509e-001; ng(n+1)=5.371548e+001;
%odnowa zmiennej metryki
n=26; farx(n+1)=1.156372e+000; foe(n+1)=8.371810e+000; krok(n+1)=2.605170e-005; ng(n+1)=5.452710e+001;
n=27; farx(n+1)=1.149209e+000; foe(n+1)=8.369278e+000; krok(n+1)=2.615174e-004; ng(n+1)=5.094620e+000;
n=28; farx(n+1)=1.121760e+000; foe(n+1)=8.355034e+000; krok(n+1)=3.212655e-003; ng(n+1)=5.470500e+000;
n=29; farx(n+1)=1.102464e+000; foe(n+1)=8.314474e+000; krok(n+1)=5.381741e-003; ng(n+1)=6.483202e+000;
n=30; farx(n+1)=1.157987e+000; foe(n+1)=8.256223e+000; krok(n+1)=2.527804e-002; ng(n+1)=1.311508e+001;
n=31; farx(n+1)=1.150645e+000; foe(n+1)=8.245757e+000; krok(n+1)=8.693674e-002; ng(n+1)=2.257719e+001;
n=32; farx(n+1)=1.096036e+000; foe(n+1)=8.230648e+000; krok(n+1)=2.800362e-001; ng(n+1)=2.158048e+001;
n=33; farx(n+1)=1.085933e+000; foe(n+1)=8.210395e+000; krok(n+1)=7.101669e-001; ng(n+1)=2.781635e+001;
n=34; farx(n+1)=1.058977e+000; foe(n+1)=8.196963e+000; krok(n+1)=1.280929e+000; ng(n+1)=1.455804e+001;
n=35; farx(n+1)=1.059850e+000; foe(n+1)=8.194925e+000; krok(n+1)=4.641165e-001; ng(n+1)=1.111111e+001;
n=36; farx(n+1)=1.050794e+000; foe(n+1)=8.194053e+000; krok(n+1)=9.763190e-001; ng(n+1)=6.565074e+000;
n=37; farx(n+1)=1.048635e+000; foe(n+1)=8.193896e+000; krok(n+1)=8.127796e-001; ng(n+1)=1.456598e+000;
n=38; farx(n+1)=1.046593e+000; foe(n+1)=8.193869e+000; krok(n+1)=9.282331e-001; ng(n+1)=6.982822e-001;
n=39; farx(n+1)=1.045857e+000; foe(n+1)=8.193856e+000; krok(n+1)=1.934637e+000; ng(n+1)=4.037380e-001;
n=40; farx(n+1)=1.045515e+000; foe(n+1)=8.193852e+000; krok(n+1)=1.296088e+000; ng(n+1)=2.492712e-001;
n=41; farx(n+1)=1.045460e+000; foe(n+1)=8.193852e+000; krok(n+1)=1.106940e+000; ng(n+1)=1.055741e-001;
n=42; farx(n+1)=1.045515e+000; foe(n+1)=8.193852e+000; krok(n+1)=1.514306e+000; ng(n+1)=3.228685e-002;
n=43; farx(n+1)=1.045508e+000; foe(n+1)=8.193852e+000; krok(n+1)=1.009068e+000; ng(n+1)=3.906828e-003;
n=44; farx(n+1)=1.045508e+000; foe(n+1)=8.193852e+000; krok(n+1)=7.263465e-006; ng(n+1)=4.460930e-004;
n=45; farx(n+1)=1.045508e+000; foe(n+1)=8.193852e+000; krok(n+1)=1.745680e-009; ng(n+1)=4.460894e-004;
 % z³y kierunek w metodzie zm - odnowa 
n=46; farx(n+1)=1.045508e+000; foe(n+1)=8.193852e+000; krok(n+1)=3.091483e-005; ng(n+1)=4.460894e-004;
n=47; farx(n+1)=1.045508e+000; foe(n+1)=8.193852e+000; krok(n+1)=1.038548e-004; ng(n+1)=3.395041e-004;
n=48; farx(n+1)=1.045508e+000; foe(n+1)=8.193852e+000; krok(n+1)=7.150304e-006; ng(n+1)=4.815692e-005;
n=49; farx(n+1)=1.045508e+000; foe(n+1)=8.193852e+000; krok(n+1)=2.581106e-005; ng(n+1)=4.787277e-005;
n=50; farx(n+1)=1.045508e+000; foe(n+1)=8.193852e+000; krok(n+1)=9.410994e-006; ng(n+1)=4.792201e-005;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
