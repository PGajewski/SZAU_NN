%uczenie predyktora oe
clear all;
n=0; farx(n+1)=2.281202e+002; foe(n+1)=2.290794e+002; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=1.702792e+002; foe(n+1)=1.714029e+002; krok(n+1)=5.100741e-004; ng(n+1)=4.355012e+002;
n=2; farx(n+1)=5.962147e+001; foe(n+1)=6.285491e+001; krok(n+1)=1.111520e-002; ng(n+1)=1.111885e+002;
n=3; farx(n+1)=5.580411e+001; foe(n+1)=5.828321e+001; krok(n+1)=8.031637e-004; ng(n+1)=2.245076e+002;
n=4; farx(n+1)=5.842987e+001; foe(n+1)=5.536572e+001; krok(n+1)=8.816889e-003; ng(n+1)=2.125696e+002;
n=5; farx(n+1)=4.586659e+001; foe(n+1)=5.254638e+001; krok(n+1)=2.147336e-002; ng(n+1)=3.665463e+001;
n=6; farx(n+1)=4.874107e+001; foe(n+1)=4.845992e+001; krok(n+1)=1.577575e-001; ng(n+1)=1.835952e+002;
n=7; farx(n+1)=3.375334e+001; foe(n+1)=4.385972e+001; krok(n+1)=4.954706e-002; ng(n+1)=6.393089e+001;
n=8; farx(n+1)=2.480556e+001; foe(n+1)=4.145821e+001; krok(n+1)=2.001452e-002; ng(n+1)=1.546922e+002;
n=9; farx(n+1)=1.868528e+001; foe(n+1)=3.952491e+001; krok(n+1)=1.576669e-002; ng(n+1)=2.992430e+002;
n=10; farx(n+1)=1.034665e+001; foe(n+1)=3.263835e+001; krok(n+1)=2.155114e-001; ng(n+1)=4.815181e+002;
n=11; farx(n+1)=3.194911e+000; foe(n+1)=1.209007e+001; krok(n+1)=2.320583e-001; ng(n+1)=8.519808e+002;
n=12; farx(n+1)=2.980180e+000; foe(n+1)=1.135909e+001; krok(n+1)=1.134226e-001; ng(n+1)=1.607556e+002;
n=13; farx(n+1)=3.076198e+000; foe(n+1)=1.065755e+001; krok(n+1)=4.063898e-001; ng(n+1)=2.043188e+002;
n=14; farx(n+1)=1.860509e+000; foe(n+1)=9.295225e+000; krok(n+1)=1.296088e+000; ng(n+1)=3.175479e+001;
n=15; farx(n+1)=1.685152e+000; foe(n+1)=9.060211e+000; krok(n+1)=9.469203e-001; ng(n+1)=1.123781e+002;
n=16; farx(n+1)=1.316613e+000; foe(n+1)=8.645894e+000; krok(n+1)=1.302338e+000; ng(n+1)=3.937639e+001;
n=17; farx(n+1)=1.181043e+000; foe(n+1)=8.451979e+000; krok(n+1)=8.892951e-001; ng(n+1)=3.575743e+001;
n=18; farx(n+1)=1.148487e+000; foe(n+1)=8.279126e+000; krok(n+1)=1.722419e+000; ng(n+1)=2.471490e+001;
n=19; farx(n+1)=1.054952e+000; foe(n+1)=8.215446e+000; krok(n+1)=1.374295e+000; ng(n+1)=2.142666e+001;
n=20; farx(n+1)=1.020376e+000; foe(n+1)=8.198293e+000; krok(n+1)=4.171904e-001; ng(n+1)=4.279207e+001;
n=21; farx(n+1)=1.018844e+000; foe(n+1)=8.196282e+000; krok(n+1)=9.453922e-001; ng(n+1)=7.585078e+000;
n=22; farx(n+1)=1.016382e+000; foe(n+1)=8.196224e+000; krok(n+1)=7.101669e-001; ng(n+1)=1.692404e+000;
n=23; farx(n+1)=1.016627e+000; foe(n+1)=8.196193e+000; krok(n+1)=1.204419e+000; ng(n+1)=5.098944e-001;
n=24; farx(n+1)=1.015579e+000; foe(n+1)=8.195924e+000; krok(n+1)=1.387242e+001; ng(n+1)=1.359460e+000;
n=25; farx(n+1)=1.019557e+000; foe(n+1)=8.195769e+000; krok(n+1)=1.352447e+000; ng(n+1)=2.407878e+000;
%odnowa zmiennej metryki
n=26; farx(n+1)=1.019554e+000; foe(n+1)=8.195768e+000; krok(n+1)=2.652070e-004; ng(n+1)=5.998359e-002;
n=27; farx(n+1)=1.019536e+000; foe(n+1)=8.195768e+000; krok(n+1)=4.055039e-005; ng(n+1)=1.149651e-001;
n=28; farx(n+1)=1.019166e+000; foe(n+1)=8.195752e+000; krok(n+1)=9.852969e-003; ng(n+1)=9.714421e-002;
n=29; farx(n+1)=1.020775e+000; foe(n+1)=8.195657e+000; krok(n+1)=5.946996e-003; ng(n+1)=3.067990e-001;
n=30; farx(n+1)=1.023279e+000; foe(n+1)=8.195598e+000; krok(n+1)=1.750226e-002; ng(n+1)=1.286852e-001;
n=31; farx(n+1)=1.025827e+000; foe(n+1)=8.194818e+000; krok(n+1)=4.128102e-001; ng(n+1)=1.041910e-001;
n=32; farx(n+1)=1.043007e+000; foe(n+1)=8.194023e+000; krok(n+1)=3.713045e-001; ng(n+1)=1.252155e-001;
n=33; farx(n+1)=1.044273e+000; foe(n+1)=8.193958e+000; krok(n+1)=2.056099e-001; ng(n+1)=2.051988e-001;
n=34; farx(n+1)=1.044546e+000; foe(n+1)=8.193856e+000; krok(n+1)=2.866206e-001; ng(n+1)=1.999254e-001;
n=35; farx(n+1)=1.045592e+000; foe(n+1)=8.193852e+000; krok(n+1)=9.145402e-001; ng(n+1)=1.652521e-001;
n=36; farx(n+1)=1.045514e+000; foe(n+1)=8.193852e+000; krok(n+1)=9.413399e-001; ng(n+1)=4.698219e-002;
n=37; farx(n+1)=1.045514e+000; foe(n+1)=8.193852e+000; krok(n+1)=8.887598e-006; ng(n+1)=7.354527e-004;
n=38; farx(n+1)=1.045514e+000; foe(n+1)=8.193852e+000; krok(n+1)=2.348553e-011; ng(n+1)=7.354483e-004;
n=39; farx(n+1)=1.045508e+000; foe(n+1)=8.193852e+000; krok(n+1)=8.045475e-001; ng(n+1)=7.354483e-004;
n=40; farx(n+1)=1.045508e+000; foe(n+1)=8.193852e+000; krok(n+1)=1.096233e-009; ng(n+1)=2.534446e-003;
 % z³y kierunek w metodzie zm - odnowa 
n=41; farx(n+1)=1.045508e+000; foe(n+1)=8.193852e+000; krok(n+1)=2.690038e-005; ng(n+1)=2.534446e-003;
n=42; farx(n+1)=1.045508e+000; foe(n+1)=8.193852e+000; krok(n+1)=1.235957e-004; ng(n+1)=1.658879e-003;
n=43; farx(n+1)=1.045508e+000; foe(n+1)=8.193852e+000; krok(n+1)=9.152390e-004; ng(n+1)=1.436578e-004;
n=44; farx(n+1)=1.045508e+000; foe(n+1)=8.193852e+000; krok(n+1)=1.791560e-006; ng(n+1)=4.373519e-005;
n=45; farx(n+1)=1.045508e+000; foe(n+1)=8.193852e+000; krok(n+1)=1.238474e-002; ng(n+1)=4.373435e-005;
n=46; farx(n+1)=1.045508e+000; foe(n+1)=8.193852e+000; krok(n+1)=2.488118e-006; ng(n+1)=5.534348e-005;
n=47; farx(n+1)=1.045508e+000; foe(n+1)=8.193852e+000; krok(n+1)=8.851105e-009; ng(n+1)=5.534332e-005;
n=48; farx(n+1)=1.045508e+000; foe(n+1)=8.193852e+000; krok(n+1)=3.705934e-007; ng(n+1)=5.534332e-005;
 % z³y kierunek w metodzie zm - odnowa 
n=49; farx(n+1)=1.045508e+000; foe(n+1)=8.193852e+000; krok(n+1)=9.184433e-012; ng(n+1)=5.534329e-005;
n=50; farx(n+1)=1.045508e+000; foe(n+1)=8.193852e+000; krok(n+1)=1.098766e-004; ng(n+1)=5.534329e-005;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
