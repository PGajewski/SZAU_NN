%uczenie predyktora oe
clear all;
n=0; farx(n+1)=2.415755e+002; foe(n+1)=2.416568e+002; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=1.802218e+002; foe(n+1)=1.802516e+002; krok(n+1)=5.014459e-004; ng(n+1)=4.932200e+002;
n=2; farx(n+1)=1.771422e+002; foe(n+1)=1.771470e+002; krok(n+1)=3.096691e-003; ng(n+1)=6.759722e+001;
n=3; farx(n+1)=5.251797e+001; foe(n+1)=5.245020e+001; krok(n+1)=2.476948e-002; ng(n+1)=5.260611e+001;
n=4; farx(n+1)=5.131579e+001; foe(n+1)=5.117815e+001; krok(n+1)=3.621201e-003; ng(n+1)=1.025854e+002;
n=5; farx(n+1)=4.720391e+001; foe(n+1)=4.533025e+001; krok(n+1)=3.903951e-001; ng(n+1)=1.036716e+002;
n=6; farx(n+1)=1.385474e+001; foe(n+1)=2.677617e+001; krok(n+1)=2.654342e-001; ng(n+1)=5.507545e+001;
n=7; farx(n+1)=1.018736e+001; foe(n+1)=2.402226e+001; krok(n+1)=4.838198e-001; ng(n+1)=1.550503e+002;
n=8; farx(n+1)=1.000385e+001; foe(n+1)=2.210502e+001; krok(n+1)=2.841626e-001; ng(n+1)=1.388552e+002;
n=9; farx(n+1)=9.359448e+000; foe(n+1)=2.037006e+001; krok(n+1)=1.078328e+000; ng(n+1)=5.988950e+001;
n=10; farx(n+1)=8.139436e+000; foe(n+1)=1.933500e+001; krok(n+1)=1.420334e+000; ng(n+1)=3.631355e+001;
n=11; farx(n+1)=5.611373e+000; foe(n+1)=1.724583e+001; krok(n+1)=8.173563e-001; ng(n+1)=4.652466e+001;
n=12; farx(n+1)=4.644571e+000; foe(n+1)=1.610927e+001; krok(n+1)=6.581427e-002; ng(n+1)=5.231911e+001;
n=13; farx(n+1)=4.195619e+000; foe(n+1)=1.565909e+001; krok(n+1)=1.068981e-001; ng(n+1)=3.058345e+001;
n=14; farx(n+1)=3.530759e+000; foe(n+1)=1.432562e+001; krok(n+1)=8.008859e-001; ng(n+1)=1.579419e+002;
n=15; farx(n+1)=3.617116e+000; foe(n+1)=1.338349e+001; krok(n+1)=4.930774e-001; ng(n+1)=6.433970e+001;
n=16; farx(n+1)=3.294186e+000; foe(n+1)=1.255518e+001; krok(n+1)=8.457767e-001; ng(n+1)=9.093111e+001;
n=17; farx(n+1)=2.300351e+000; foe(n+1)=1.068603e+001; krok(n+1)=1.462039e+000; ng(n+1)=7.767533e+001;
n=18; farx(n+1)=1.567661e+000; foe(n+1)=9.621612e+000; krok(n+1)=1.269085e-001; ng(n+1)=1.568367e+002;
n=19; farx(n+1)=1.519036e+000; foe(n+1)=9.434585e+000; krok(n+1)=4.485036e-001; ng(n+1)=4.766386e+001;
n=20; farx(n+1)=1.445021e+000; foe(n+1)=9.223610e+000; krok(n+1)=4.536903e-001; ng(n+1)=1.109240e+001;
n=21; farx(n+1)=1.383785e+000; foe(n+1)=8.935421e+000; krok(n+1)=5.535078e-001; ng(n+1)=2.213543e+001;
n=22; farx(n+1)=1.325382e+000; foe(n+1)=8.829033e+000; krok(n+1)=3.214238e-001; ng(n+1)=7.444394e+001;
n=23; farx(n+1)=1.244038e+000; foe(n+1)=8.647239e+000; krok(n+1)=6.160336e-001; ng(n+1)=6.109069e+001;
n=24; farx(n+1)=1.115734e+000; foe(n+1)=8.438051e+000; krok(n+1)=1.585247e+000; ng(n+1)=2.660147e+001;
n=25; farx(n+1)=1.127680e+000; foe(n+1)=8.388076e+000; krok(n+1)=8.457767e-001; ng(n+1)=3.939548e+001;
%odnowa zmiennej metryki
n=26; farx(n+1)=1.128755e+000; foe(n+1)=8.386105e+000; krok(n+1)=5.113027e-005; ng(n+1)=1.577833e+001;
n=27; farx(n+1)=1.100662e+000; foe(n+1)=8.363327e+000; krok(n+1)=4.630782e-004; ng(n+1)=1.391953e+001;
n=28; farx(n+1)=1.089465e+000; foe(n+1)=8.358946e+000; krok(n+1)=2.337468e-004; ng(n+1)=9.081222e+000;
n=29; farx(n+1)=1.045452e+000; foe(n+1)=8.324529e+000; krok(n+1)=7.032104e-003; ng(n+1)=6.028287e+000;
n=30; farx(n+1)=1.055958e+000; foe(n+1)=8.278257e+000; krok(n+1)=7.478469e-002; ng(n+1)=8.491489e+000;
n=31; farx(n+1)=9.748183e-001; foe(n+1)=8.248949e+000; krok(n+1)=1.755320e-001; ng(n+1)=4.342486e+001;
n=32; farx(n+1)=9.863756e-001; foe(n+1)=8.217002e+000; krok(n+1)=8.008859e-001; ng(n+1)=5.823063e+001;
n=33; farx(n+1)=9.979273e-001; foe(n+1)=8.203890e+000; krok(n+1)=9.169512e-001; ng(n+1)=9.397449e+000;
n=34; farx(n+1)=9.983714e-001; foe(n+1)=8.198573e+000; krok(n+1)=5.249576e-001; ng(n+1)=7.807974e+000;
n=35; farx(n+1)=1.006169e+000; foe(n+1)=8.197530e+000; krok(n+1)=6.809733e-001; ng(n+1)=3.898491e+000;
n=36; farx(n+1)=1.021193e+000; foe(n+1)=8.196136e+000; krok(n+1)=1.893841e+000; ng(n+1)=5.720299e-001;
n=37; farx(n+1)=1.044160e+000; foe(n+1)=8.194315e+000; krok(n+1)=2.076440e+000; ng(n+1)=6.747908e+000;
n=38; farx(n+1)=1.044808e+000; foe(n+1)=8.193883e+000; krok(n+1)=5.126125e-001; ng(n+1)=5.034916e+000;
n=39; farx(n+1)=1.045904e+000; foe(n+1)=8.193856e+000; krok(n+1)=7.927530e-001; ng(n+1)=1.679534e+000;
n=40; farx(n+1)=1.045476e+000; foe(n+1)=8.193852e+000; krok(n+1)=3.828623e-001; ng(n+1)=3.741839e-001;
n=41; farx(n+1)=1.045488e+000; foe(n+1)=8.193852e+000; krok(n+1)=1.086288e+000; ng(n+1)=5.170651e-002;
n=42; farx(n+1)=1.045509e+000; foe(n+1)=8.193852e+000; krok(n+1)=1.084583e+000; ng(n+1)=1.298776e-002;
n=43; farx(n+1)=1.045509e+000; foe(n+1)=8.193852e+000; krok(n+1)=1.910746e-005; ng(n+1)=2.036575e-003;
n=44; farx(n+1)=1.045509e+000; foe(n+1)=8.193852e+000; krok(n+1)=1.003200e+000; ng(n+1)=2.036539e-003;
n=45; farx(n+1)=1.045509e+000; foe(n+1)=8.193852e+000; krok(n+1)=9.658771e-006; ng(n+1)=4.933941e-005;
 % z³y kierunek w metodzie zm - odnowa 
n=46; farx(n+1)=1.045509e+000; foe(n+1)=8.193852e+000; krok(n+1)=8.058704e-006; ng(n+1)=4.933897e-005;
n=47; farx(n+1)=1.045509e+000; foe(n+1)=8.193852e+000; krok(n+1)=3.796566e-011; ng(n+1)=4.124833e-005;
n=48; farx(n+1)=1.045509e+000; foe(n+1)=8.193852e+000; krok(n+1)=2.207737e-011; ng(n+1)=4.124832e-005;
 % z³y kierunek w metodzie zm - odnowa 
n=49; farx(n+1)=1.045509e+000; foe(n+1)=8.193852e+000; krok(n+1)=3.729044e-012; ng(n+1)=4.124832e-005;
n=50; farx(n+1)=1.045509e+000; foe(n+1)=8.193852e+000; krok(n+1)=4.333339e-012; ng(n+1)=4.124832e-005;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
