%uczenie predyktora oe
clear all;
n=0; farx(n+1)=2.548714e+002; foe(n+1)=2.562996e+002; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=1.804956e+002; foe(n+1)=1.810376e+002; krok(n+1)=5.097061e-004; ng(n+1)=5.816140e+002;
n=2; farx(n+1)=1.642816e+002; foe(n+1)=1.605946e+002; krok(n+1)=6.390530e-003; ng(n+1)=1.232372e+002;
n=3; farx(n+1)=5.923861e+001; foe(n+1)=5.732071e+001; krok(n+1)=2.305594e-003; ng(n+1)=3.581069e+002;
n=4; farx(n+1)=5.766061e+001; foe(n+1)=5.606449e+001; krok(n+1)=4.576195e-004; ng(n+1)=1.204924e+002;
n=5; farx(n+1)=4.938850e+001; foe(n+1)=5.488678e+001; krok(n+1)=5.829338e-003; ng(n+1)=4.760741e+001;
n=6; farx(n+1)=5.696309e+001; foe(n+1)=5.164263e+001; krok(n+1)=2.307159e-002; ng(n+1)=1.881021e+002;
n=7; farx(n+1)=5.054270e+001; foe(n+1)=4.802554e+001; krok(n+1)=6.900287e-002; ng(n+1)=1.088108e+002;
n=8; farx(n+1)=4.781286e+001; foe(n+1)=4.744832e+001; krok(n+1)=7.602094e-003; ng(n+1)=5.186324e+001;
n=9; farx(n+1)=4.385651e+001; foe(n+1)=4.677536e+001; krok(n+1)=2.854877e-002; ng(n+1)=1.121234e+002;
n=10; farx(n+1)=2.835902e+001; foe(n+1)=4.357808e+001; krok(n+1)=1.019133e-002; ng(n+1)=2.002076e+002;
n=11; farx(n+1)=1.961049e+001; foe(n+1)=4.202189e+001; krok(n+1)=1.259664e-003; ng(n+1)=4.745617e+002;
n=12; farx(n+1)=1.119555e+001; foe(n+1)=3.802119e+001; krok(n+1)=8.321100e-002; ng(n+1)=7.399479e+002;
n=13; farx(n+1)=5.218608e+000; foe(n+1)=2.540631e+001; krok(n+1)=2.896961e-002; ng(n+1)=1.304498e+003;
n=14; farx(n+1)=5.372544e+000; foe(n+1)=2.309103e+001; krok(n+1)=1.789761e-002; ng(n+1)=1.294343e+003;
n=15; farx(n+1)=5.895410e+000; foe(n+1)=2.172629e+001; krok(n+1)=3.243318e-002; ng(n+1)=3.510329e+002;
n=16; farx(n+1)=5.568601e+000; foe(n+1)=2.044237e+001; krok(n+1)=1.337651e-001; ng(n+1)=5.489361e+002;
n=17; farx(n+1)=3.370003e+000; foe(n+1)=1.538798e+001; krok(n+1)=4.003122e-001; ng(n+1)=3.825988e+002;
n=18; farx(n+1)=2.796857e+000; foe(n+1)=1.360647e+001; krok(n+1)=4.819709e-001; ng(n+1)=7.276864e+002;
n=19; farx(n+1)=1.779213e+000; foe(n+1)=1.245333e+001; krok(n+1)=2.490283e-001; ng(n+1)=3.381261e+002;
n=20; farx(n+1)=1.713887e+000; foe(n+1)=1.085496e+001; krok(n+1)=6.007020e-001; ng(n+1)=3.991707e+002;
n=21; farx(n+1)=1.494804e+000; foe(n+1)=9.942584e+000; krok(n+1)=3.332754e-001; ng(n+1)=4.424266e+002;
n=22; farx(n+1)=1.485923e+000; foe(n+1)=9.077571e+000; krok(n+1)=6.109364e-001; ng(n+1)=1.519282e+002;
n=23; farx(n+1)=1.225896e+000; foe(n+1)=8.415121e+000; krok(n+1)=8.088973e-001; ng(n+1)=2.103077e+002;
n=24; farx(n+1)=9.957555e-001; foe(n+1)=8.111682e+000; krok(n+1)=1.459230e+000; ng(n+1)=8.922450e+001;
n=25; farx(n+1)=9.622301e-001; foe(n+1)=8.039362e+000; krok(n+1)=3.827775e-001; ng(n+1)=1.509029e+002;
%odnowa zmiennej metryki
n=26; farx(n+1)=9.569351e-001; foe(n+1)=8.022148e+000; krok(n+1)=1.174602e-004; ng(n+1)=3.907555e+001;
n=27; farx(n+1)=9.549522e-001; foe(n+1)=8.007438e+000; krok(n+1)=2.746916e-005; ng(n+1)=6.191257e+001;
n=28; farx(n+1)=9.251954e-001; foe(n+1)=7.926456e+000; krok(n+1)=3.423805e-004; ng(n+1)=4.238348e+001;
n=29; farx(n+1)=1.007194e+000; foe(n+1)=7.435875e+000; krok(n+1)=6.192369e-003; ng(n+1)=2.945792e+001;
n=30; farx(n+1)=8.861869e-001; foe(n+1)=6.526126e+000; krok(n+1)=2.191235e-002; ng(n+1)=8.173742e+001;
n=31; farx(n+1)=8.878931e-001; foe(n+1)=6.356836e+000; krok(n+1)=3.643472e-004; ng(n+1)=3.296598e+002;
n=32; farx(n+1)=9.482483e-001; foe(n+1)=5.840935e+000; krok(n+1)=9.041785e-003; ng(n+1)=1.245234e+002;
n=33; farx(n+1)=1.021345e+000; foe(n+1)=5.625265e+000; krok(n+1)=3.103068e-002; ng(n+1)=2.069032e+002;
n=34; farx(n+1)=7.026615e-001; foe(n+1)=4.079327e+000; krok(n+1)=7.238598e-001; ng(n+1)=2.339129e+002;
n=35; farx(n+1)=8.444073e-001; foe(n+1)=3.527696e+000; krok(n+1)=3.669314e-002; ng(n+1)=4.005803e+002;
n=36; farx(n+1)=8.878593e-001; foe(n+1)=3.038739e+000; krok(n+1)=1.387085e-001; ng(n+1)=2.654197e+002;
n=37; farx(n+1)=6.736377e-001; foe(n+1)=2.651159e+000; krok(n+1)=1.016482e-001; ng(n+1)=1.036777e+002;
n=38; farx(n+1)=5.360539e-001; foe(n+1)=2.316778e+000; krok(n+1)=2.554195e-001; ng(n+1)=3.604039e+002;
n=39; farx(n+1)=4.377410e-001; foe(n+1)=2.075589e+000; krok(n+1)=5.636152e-001; ng(n+1)=7.782690e+001;
n=40; farx(n+1)=4.378862e-001; foe(n+1)=1.901874e+000; krok(n+1)=3.307424e-001; ng(n+1)=1.661910e+002;
n=41; farx(n+1)=4.418064e-001; foe(n+1)=1.797450e+000; krok(n+1)=2.485924e-001; ng(n+1)=3.064063e+002;
n=42; farx(n+1)=4.623299e-001; foe(n+1)=1.751617e+000; krok(n+1)=4.971061e-001; ng(n+1)=1.357349e+002;
n=43; farx(n+1)=4.436325e-001; foe(n+1)=1.719918e+000; krok(n+1)=1.267724e+000; ng(n+1)=3.506956e+001;
n=44; farx(n+1)=4.549169e-001; foe(n+1)=1.700333e+000; krok(n+1)=1.981804e+000; ng(n+1)=2.508578e+001;
n=45; farx(n+1)=4.616410e-001; foe(n+1)=1.687568e+000; krok(n+1)=1.269903e+000; ng(n+1)=9.280365e+000;
n=46; farx(n+1)=4.792154e-001; foe(n+1)=1.673812e+000; krok(n+1)=1.240540e+000; ng(n+1)=4.734391e+001;
n=47; farx(n+1)=5.138264e-001; foe(n+1)=1.665047e+000; krok(n+1)=1.146483e+000; ng(n+1)=4.574556e+001;
n=48; farx(n+1)=5.663503e-001; foe(n+1)=1.651825e+000; krok(n+1)=1.522162e+000; ng(n+1)=4.037672e+001;
n=49; farx(n+1)=5.956663e-001; foe(n+1)=1.639643e+000; krok(n+1)=1.111368e+000; ng(n+1)=1.241407e+001;
n=50; farx(n+1)=6.201409e-001; foe(n+1)=1.627559e+000; krok(n+1)=2.053922e+000; ng(n+1)=2.917761e+001;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
