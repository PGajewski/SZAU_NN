%uczenie predyktora oe
clear all;
n=0; farx(n+1)=2.558579e+002; foe(n+1)=2.435718e+002; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=1.555625e+002; foe(n+1)=1.487973e+002; krok(n+1)=5.276810e-004; ng(n+1)=1.390937e+003;
n=2; farx(n+1)=6.190567e+001; foe(n+1)=6.136790e+001; krok(n+1)=3.973596e-003; ng(n+1)=6.882266e+002;
n=3; farx(n+1)=5.796465e+001; foe(n+1)=5.597847e+001; krok(n+1)=2.914669e-003; ng(n+1)=3.314019e+002;
n=4; farx(n+1)=3.166014e+001; foe(n+1)=4.816820e+001; krok(n+1)=5.553162e-002; ng(n+1)=6.416024e+001;
n=5; farx(n+1)=1.447343e+001; foe(n+1)=3.861693e+001; krok(n+1)=2.394037e-003; ng(n+1)=5.248043e+002;
n=6; farx(n+1)=1.212197e+001; foe(n+1)=3.119172e+001; krok(n+1)=8.456028e-004; ng(n+1)=1.660910e+003;
n=7; farx(n+1)=1.188731e+001; foe(n+1)=2.992465e+001; krok(n+1)=9.579321e-005; ng(n+1)=1.549375e+003;
n=8; farx(n+1)=1.354093e+001; foe(n+1)=2.839864e+001; krok(n+1)=7.321912e-003; ng(n+1)=1.271088e+003;
n=9; farx(n+1)=1.340279e+001; foe(n+1)=2.407069e+001; krok(n+1)=1.622219e-002; ng(n+1)=9.677049e+002;
n=10; farx(n+1)=1.316735e+001; foe(n+1)=2.288078e+001; krok(n+1)=4.862884e-003; ng(n+1)=2.541543e+002;
n=11; farx(n+1)=1.196943e+001; foe(n+1)=2.100367e+001; krok(n+1)=1.417782e-002; ng(n+1)=1.645289e+002;
n=12; farx(n+1)=1.021131e+001; foe(n+1)=1.950425e+001; krok(n+1)=1.645950e-002; ng(n+1)=3.845302e+002;
n=13; farx(n+1)=8.245803e+000; foe(n+1)=1.765377e+001; krok(n+1)=1.869974e-003; ng(n+1)=6.801044e+002;
n=14; farx(n+1)=6.215870e+000; foe(n+1)=1.514853e+001; krok(n+1)=8.625805e-003; ng(n+1)=9.060556e+002;
n=15; farx(n+1)=4.195182e+000; foe(n+1)=1.182057e+001; krok(n+1)=6.496894e-003; ng(n+1)=1.008151e+003;
n=16; farx(n+1)=3.857419e+000; foe(n+1)=1.080255e+001; krok(n+1)=1.997747e-003; ng(n+1)=9.558597e+002;
n=17; farx(n+1)=3.609757e+000; foe(n+1)=1.010305e+001; krok(n+1)=2.953444e-003; ng(n+1)=5.568849e+002;
n=18; farx(n+1)=3.280089e+000; foe(n+1)=9.436588e+000; krok(n+1)=2.270713e-003; ng(n+1)=5.451518e+002;
n=19; farx(n+1)=2.842923e+000; foe(n+1)=8.862722e+000; krok(n+1)=1.258748e-002; ng(n+1)=1.672032e+002;
n=20; farx(n+1)=2.655864e+000; foe(n+1)=8.663635e+000; krok(n+1)=4.150488e-003; ng(n+1)=1.967094e+002;
n=21; farx(n+1)=2.196069e+000; foe(n+1)=7.917130e+000; krok(n+1)=8.300976e-003; ng(n+1)=2.886849e+002;
n=22; farx(n+1)=1.836335e+000; foe(n+1)=7.164527e+000; krok(n+1)=2.310226e-003; ng(n+1)=4.491686e+002;
n=23; farx(n+1)=1.648209e+000; foe(n+1)=6.865781e+000; krok(n+1)=2.998733e-003; ng(n+1)=2.953838e+002;
n=24; farx(n+1)=1.229711e+000; foe(n+1)=5.506442e+000; krok(n+1)=1.181377e-002; ng(n+1)=5.625033e+002;
n=25; farx(n+1)=1.099566e+000; foe(n+1)=5.125658e+000; krok(n+1)=8.486623e-003; ng(n+1)=3.593601e+002;
%odnowa zmiennej metryki
n=26; farx(n+1)=1.076716e+000; foe(n+1)=4.908931e+000; krok(n+1)=2.432490e-005; ng(n+1)=4.534540e+002;
n=27; farx(n+1)=1.075575e+000; foe(n+1)=4.892408e+000; krok(n+1)=1.106017e-005; ng(n+1)=1.838819e+002;
n=28; farx(n+1)=1.050439e+000; foe(n+1)=4.744276e+000; krok(n+1)=1.735363e-003; ng(n+1)=4.127594e+001;
n=29; farx(n+1)=1.014360e+000; foe(n+1)=4.342190e+000; krok(n+1)=1.517951e-003; ng(n+1)=9.546363e+001;
n=30; farx(n+1)=8.925534e-001; foe(n+1)=3.685606e+000; krok(n+1)=4.874671e-003; ng(n+1)=8.959295e+001;
n=31; farx(n+1)=8.009229e-001; foe(n+1)=2.924448e+000; krok(n+1)=1.333847e-002; ng(n+1)=2.082036e+002;
n=32; farx(n+1)=7.975021e-001; foe(n+1)=2.623606e+000; krok(n+1)=2.464960e-003; ng(n+1)=6.102546e+002;
n=33; farx(n+1)=7.980536e-001; foe(n+1)=2.507857e+000; krok(n+1)=1.728033e-003; ng(n+1)=3.701574e+002;
n=34; farx(n+1)=9.382233e-001; foe(n+1)=1.990620e+000; krok(n+1)=1.421020e-002; ng(n+1)=1.923399e+002;
n=35; farx(n+1)=8.965797e-001; foe(n+1)=1.723440e+000; krok(n+1)=1.767909e-002; ng(n+1)=2.175734e+002;
n=36; farx(n+1)=8.520950e-001; foe(n+1)=1.622746e+000; krok(n+1)=4.625835e-003; ng(n+1)=2.643553e+002;
n=37; farx(n+1)=7.613789e-001; foe(n+1)=1.511065e+000; krok(n+1)=6.912131e-003; ng(n+1)=1.980980e+002;
n=38; farx(n+1)=6.889963e-001; foe(n+1)=1.399425e+000; krok(n+1)=2.337492e-002; ng(n+1)=1.335025e+002;
n=39; farx(n+1)=5.512185e-001; foe(n+1)=1.183302e+000; krok(n+1)=2.967304e-002; ng(n+1)=9.139053e+001;
n=40; farx(n+1)=5.445366e-001; foe(n+1)=1.171326e+000; krok(n+1)=5.003630e-003; ng(n+1)=7.582272e+001;
n=41; farx(n+1)=5.286789e-001; foe(n+1)=1.147733e+000; krok(n+1)=1.226153e-002; ng(n+1)=9.949331e+001;
n=42; farx(n+1)=4.788618e-001; foe(n+1)=1.012624e+000; krok(n+1)=4.568872e-002; ng(n+1)=1.158506e+002;
n=43; farx(n+1)=4.736131e-001; foe(n+1)=9.919595e-001; krok(n+1)=1.468412e-002; ng(n+1)=1.783193e+002;
n=44; farx(n+1)=4.586342e-001; foe(n+1)=9.514891e-001; krok(n+1)=3.411686e-002; ng(n+1)=9.902201e+001;
n=45; farx(n+1)=4.451281e-001; foe(n+1)=8.906785e-001; krok(n+1)=7.236188e-002; ng(n+1)=6.825102e+001;
n=46; farx(n+1)=4.339290e-001; foe(n+1)=8.415576e-001; krok(n+1)=3.034189e-002; ng(n+1)=2.088109e+002;
n=47; farx(n+1)=4.388456e-001; foe(n+1)=8.083667e-001; krok(n+1)=1.931884e-002; ng(n+1)=1.398065e+002;
n=48; farx(n+1)=4.437688e-001; foe(n+1)=7.924329e-001; krok(n+1)=2.219272e-002; ng(n+1)=6.142775e+001;
n=49; farx(n+1)=4.399771e-001; foe(n+1)=7.811484e-001; krok(n+1)=2.452306e-002; ng(n+1)=7.066586e+001;
n=50; farx(n+1)=4.145755e-001; foe(n+1)=7.416384e-001; krok(n+1)=1.370460e-001; ng(n+1)=7.289120e+001;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
