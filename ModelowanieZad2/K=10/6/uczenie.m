%uczenie predyktora oe
clear all;
n=0; farx(n+1)=2.358702e+002; foe(n+1)=2.414046e+002; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=1.396487e+002; foe(n+1)=1.439495e+002; krok(n+1)=4.896899e-004; ng(n+1)=1.508980e+003;
n=2; farx(n+1)=5.591701e+001; foe(n+1)=6.359853e+001; krok(n+1)=3.135616e-003; ng(n+1)=7.886427e+002;
n=3; farx(n+1)=5.220784e+001; foe(n+1)=5.703809e+001; krok(n+1)=3.128460e-003; ng(n+1)=4.016152e+002;
n=4; farx(n+1)=1.894098e+001; foe(n+1)=4.302629e+001; krok(n+1)=1.016482e-001; ng(n+1)=6.333290e+001;
n=5; farx(n+1)=7.488097e+000; foe(n+1)=2.587936e+001; krok(n+1)=1.338974e-003; ng(n+1)=8.558449e+002;
n=6; farx(n+1)=6.488907e+000; foe(n+1)=2.270414e+001; krok(n+1)=7.675242e-005; ng(n+1)=1.719450e+003;
n=7; farx(n+1)=6.447554e+000; foe(n+1)=1.959193e+001; krok(n+1)=1.197019e-003; ng(n+1)=2.141108e+003;
n=8; farx(n+1)=6.586779e+000; foe(n+1)=1.814648e+001; krok(n+1)=1.317301e-003; ng(n+1)=1.985448e+003;
n=9; farx(n+1)=5.543450e+000; foe(n+1)=1.551258e+001; krok(n+1)=9.677825e-003; ng(n+1)=1.523933e+003;
n=10; farx(n+1)=3.257626e+000; foe(n+1)=1.233850e+001; krok(n+1)=1.391254e-002; ng(n+1)=1.294968e+003;
n=11; farx(n+1)=2.655040e+000; foe(n+1)=1.124641e+001; krok(n+1)=2.232051e-003; ng(n+1)=6.557661e+002;
n=12; farx(n+1)=2.054362e+000; foe(n+1)=1.013930e+001; krok(n+1)=2.774090e-003; ng(n+1)=6.701218e+002;
n=13; farx(n+1)=9.129430e-001; foe(n+1)=6.426583e+000; krok(n+1)=1.269968e-002; ng(n+1)=6.222703e+002;
n=14; farx(n+1)=8.435286e-001; foe(n+1)=6.082349e+000; krok(n+1)=1.009153e-003; ng(n+1)=6.381457e+002;
n=15; farx(n+1)=7.284030e-001; foe(n+1)=5.153998e+000; krok(n+1)=8.744518e-003; ng(n+1)=3.195536e+002;
n=16; farx(n+1)=7.005869e-001; foe(n+1)=4.664798e+000; krok(n+1)=8.744518e-003; ng(n+1)=4.038764e+002;
n=17; farx(n+1)=7.224071e-001; foe(n+1)=4.092707e+000; krok(n+1)=3.778589e-003; ng(n+1)=5.509977e+002;
n=18; farx(n+1)=7.250150e-001; foe(n+1)=3.990512e+000; krok(n+1)=1.156459e-003; ng(n+1)=4.628474e+002;
n=19; farx(n+1)=6.606402e-001; foe(n+1)=3.540384e+000; krok(n+1)=9.338225e-003; ng(n+1)=2.855956e+002;
n=20; farx(n+1)=6.088426e-001; foe(n+1)=3.290948e+000; krok(n+1)=3.671029e-003; ng(n+1)=4.343172e+002;
n=21; farx(n+1)=5.276685e-001; foe(n+1)=2.443780e+000; krok(n+1)=5.770731e-003; ng(n+1)=1.306016e+003;
n=22; farx(n+1)=5.330768e-001; foe(n+1)=2.338489e+000; krok(n+1)=1.419977e-002; ng(n+1)=3.403312e+002;
n=23; farx(n+1)=4.607485e-001; foe(n+1)=1.807696e+000; krok(n+1)=2.254943e-002; ng(n+1)=3.926803e+002;
n=24; farx(n+1)=4.032965e-001; foe(n+1)=1.388299e+000; krok(n+1)=1.617035e-002; ng(n+1)=5.400934e+002;
n=25; farx(n+1)=3.798220e-001; foe(n+1)=1.306911e+000; krok(n+1)=6.607631e-003; ng(n+1)=3.155622e+002;
%odnowa zmiennej metryki
n=26; farx(n+1)=3.796340e-001; foe(n+1)=1.297600e+000; krok(n+1)=1.549259e-005; ng(n+1)=1.347563e+002;
n=27; farx(n+1)=3.783019e-001; foe(n+1)=1.286205e+000; krok(n+1)=2.832743e-005; ng(n+1)=1.106441e+002;
n=28; farx(n+1)=3.813564e-001; foe(n+1)=1.270637e+000; krok(n+1)=7.492449e-005; ng(n+1)=7.508818e+001;
n=29; farx(n+1)=3.389630e-001; foe(n+1)=1.132002e+000; krok(n+1)=3.985480e-003; ng(n+1)=2.856773e+001;
n=30; farx(n+1)=3.398259e-001; foe(n+1)=1.036889e+000; krok(n+1)=4.708341e-003; ng(n+1)=2.863612e+001;
n=31; farx(n+1)=3.649428e-001; foe(n+1)=9.120433e-001; krok(n+1)=2.074719e-002; ng(n+1)=3.377108e+001;
n=32; farx(n+1)=3.620113e-001; foe(n+1)=8.414066e-001; krok(n+1)=1.941426e-002; ng(n+1)=1.682530e+002;
n=33; farx(n+1)=3.536818e-001; foe(n+1)=8.214431e-001; krok(n+1)=7.354218e-003; ng(n+1)=1.010635e+002;
n=34; farx(n+1)=3.423916e-001; foe(n+1)=7.755001e-001; krok(n+1)=1.724927e-002; ng(n+1)=8.408708e+001;
n=35; farx(n+1)=3.316847e-001; foe(n+1)=7.443760e-001; krok(n+1)=1.815661e-002; ng(n+1)=1.077493e+002;
n=36; farx(n+1)=3.202034e-001; foe(n+1)=7.030647e-001; krok(n+1)=6.789298e-002; ng(n+1)=4.740610e+001;
n=37; farx(n+1)=3.181110e-001; foe(n+1)=6.882299e-001; krok(n+1)=7.168595e-003; ng(n+1)=1.684166e+002;
n=38; farx(n+1)=2.951189e-001; foe(n+1)=6.424967e-001; krok(n+1)=6.385486e-002; ng(n+1)=6.155418e+001;
n=39; farx(n+1)=2.918927e-001; foe(n+1)=6.244963e-001; krok(n+1)=2.387143e-002; ng(n+1)=1.124307e+002;
n=40; farx(n+1)=2.905427e-001; foe(n+1)=6.214508e-001; krok(n+1)=1.856226e-002; ng(n+1)=5.233152e+001;
n=41; farx(n+1)=2.923879e-001; foe(n+1)=6.143570e-001; krok(n+1)=5.851700e-002; ng(n+1)=3.419392e+001;
n=42; farx(n+1)=2.950079e-001; foe(n+1)=6.083134e-001; krok(n+1)=1.750226e-002; ng(n+1)=6.102778e+001;
n=43; farx(n+1)=3.042569e-001; foe(n+1)=5.967885e-001; krok(n+1)=8.061847e-002; ng(n+1)=4.961331e+001;
n=44; farx(n+1)=3.152738e-001; foe(n+1)=5.845696e-001; krok(n+1)=2.351648e-002; ng(n+1)=1.605552e+002;
n=45; farx(n+1)=3.178191e-001; foe(n+1)=5.778730e-001; krok(n+1)=5.857529e-002; ng(n+1)=7.046744e+001;
n=46; farx(n+1)=3.128738e-001; foe(n+1)=5.601258e-001; krok(n+1)=1.822367e-001; ng(n+1)=8.743051e+001;
n=47; farx(n+1)=3.064174e-001; foe(n+1)=5.477347e-001; krok(n+1)=5.123880e-002; ng(n+1)=7.082300e+001;
n=48; farx(n+1)=3.006802e-001; foe(n+1)=5.356187e-001; krok(n+1)=4.681906e-002; ng(n+1)=1.035907e+002;
n=49; farx(n+1)=2.924313e-001; foe(n+1)=5.181650e-001; krok(n+1)=5.042484e-002; ng(n+1)=7.267569e+001;
n=50; farx(n+1)=2.806326e-001; foe(n+1)=4.837918e-001; krok(n+1)=7.641651e-002; ng(n+1)=8.933457e+001;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
