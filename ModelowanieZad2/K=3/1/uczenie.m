%uczenie predyktora oe
clear all;
n=0; farx(n+1)=2.596176e+002; foe(n+1)=2.570786e+002; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=1.693779e+002; foe(n+1)=1.678774e+002; krok(n+1)=5.045766e-004; ng(n+1)=6.771930e+002;
n=2; farx(n+1)=6.453619e+001; foe(n+1)=6.351616e+001; krok(n+1)=9.019129e-003; ng(n+1)=1.958999e+002;
n=3; farx(n+1)=6.054078e+001; foe(n+1)=5.818995e+001; krok(n+1)=2.511123e-003; ng(n+1)=2.458576e+002;
n=4; farx(n+1)=6.449317e+001; foe(n+1)=5.500478e+001; krok(n+1)=3.129602e-002; ng(n+1)=2.051566e+002;
n=5; farx(n+1)=5.482255e+001; foe(n+1)=5.231827e+001; krok(n+1)=4.215364e-002; ng(n+1)=7.549777e+001;
n=6; farx(n+1)=4.416512e+001; foe(n+1)=4.548369e+001; krok(n+1)=1.226153e-002; ng(n+1)=1.579278e+002;
n=7; farx(n+1)=4.075293e+001; foe(n+1)=4.372635e+001; krok(n+1)=5.062842e-003; ng(n+1)=1.204300e+002;
n=8; farx(n+1)=3.057669e+001; foe(n+1)=3.507694e+001; krok(n+1)=4.904612e-002; ng(n+1)=1.643234e+002;
n=9; farx(n+1)=2.793854e+001; foe(n+1)=3.377946e+001; krok(n+1)=5.478088e-003; ng(n+1)=1.137624e+002;
n=10; farx(n+1)=2.323789e+001; foe(n+1)=3.069386e+001; krok(n+1)=2.803148e-002; ng(n+1)=1.477814e+002;
n=11; farx(n+1)=1.822125e+001; foe(n+1)=2.904049e+001; krok(n+1)=1.703693e-002; ng(n+1)=5.302199e+001;
n=12; farx(n+1)=1.497101e+001; foe(n+1)=2.746006e+001; krok(n+1)=7.242402e-003; ng(n+1)=2.015289e+002;
n=13; farx(n+1)=1.323813e+001; foe(n+1)=2.683243e+001; krok(n+1)=3.370660e-002; ng(n+1)=1.101529e+002;
n=14; farx(n+1)=1.250445e+001; foe(n+1)=2.619017e+001; krok(n+1)=2.065111e-002; ng(n+1)=2.013056e+002;
n=15; farx(n+1)=6.669794e+000; foe(n+1)=2.196048e+001; krok(n+1)=1.592896e-001; ng(n+1)=2.089168e+002;
n=16; farx(n+1)=6.895717e+000; foe(n+1)=1.812071e+001; krok(n+1)=1.600146e-001; ng(n+1)=3.800504e+002;
n=17; farx(n+1)=6.781593e+000; foe(n+1)=1.653851e+001; krok(n+1)=1.011873e-001; ng(n+1)=7.061222e+001;
n=18; farx(n+1)=6.307954e+000; foe(n+1)=1.592246e+001; krok(n+1)=5.234463e-002; ng(n+1)=2.043328e+002;
n=19; farx(n+1)=4.998900e+000; foe(n+1)=1.347330e+001; krok(n+1)=6.225707e-002; ng(n+1)=1.636836e+002;
n=20; farx(n+1)=3.304018e+000; foe(n+1)=1.035451e+001; krok(n+1)=2.013997e-001; ng(n+1)=2.103744e+002;
n=21; farx(n+1)=2.259524e+000; foe(n+1)=8.026161e+000; krok(n+1)=8.892157e-002; ng(n+1)=4.496403e+002;
n=22; farx(n+1)=2.108570e+000; foe(n+1)=7.599609e+000; krok(n+1)=6.402713e-002; ng(n+1)=2.476064e+002;
n=23; farx(n+1)=1.712087e+000; foe(n+1)=6.579814e+000; krok(n+1)=1.713887e-001; ng(n+1)=2.290569e+002;
n=24; farx(n+1)=1.517305e+000; foe(n+1)=5.896927e+000; krok(n+1)=3.510640e-001; ng(n+1)=2.547501e+002;
n=25; farx(n+1)=1.072269e+000; foe(n+1)=5.309125e+000; krok(n+1)=2.071731e+000; ng(n+1)=3.893862e+001;
%odnowa zmiennej metryki
n=26; farx(n+1)=1.078078e+000; foe(n+1)=5.257203e+000; krok(n+1)=2.993183e-005; ng(n+1)=9.512950e+001;
n=27; farx(n+1)=1.075477e+000; foe(n+1)=5.242343e+000; krok(n+1)=6.549403e-005; ng(n+1)=5.087559e+001;
n=28; farx(n+1)=1.105842e+000; foe(n+1)=5.165551e+000; krok(n+1)=3.891067e-003; ng(n+1)=1.435593e+001;
n=29; farx(n+1)=1.083058e+000; foe(n+1)=4.915946e+000; krok(n+1)=1.299476e-003; ng(n+1)=3.761735e+001;
n=30; farx(n+1)=9.434734e-001; foe(n+1)=4.303701e+000; krok(n+1)=3.579522e-002; ng(n+1)=5.750178e+001;
n=31; farx(n+1)=9.355842e-001; foe(n+1)=4.274865e+000; krok(n+1)=2.469223e-003; ng(n+1)=1.443996e+002;
n=32; farx(n+1)=8.291275e-001; foe(n+1)=4.030819e+000; krok(n+1)=9.513276e-003; ng(n+1)=1.528749e+002;
n=33; farx(n+1)=6.909099e-001; foe(n+1)=3.490821e+000; krok(n+1)=4.030924e-002; ng(n+1)=1.957934e+002;
n=34; farx(n+1)=6.326641e-001; foe(n+1)=3.242824e+000; krok(n+1)=3.266584e-002; ng(n+1)=2.044392e+002;
n=35; farx(n+1)=5.511532e-001; foe(n+1)=2.793340e+000; krok(n+1)=8.877087e-002; ng(n+1)=2.972428e+002;
n=36; farx(n+1)=5.390891e-001; foe(n+1)=2.568120e+000; krok(n+1)=2.900728e-002; ng(n+1)=2.826832e+002;
n=37; farx(n+1)=5.123044e-001; foe(n+1)=2.050734e+000; krok(n+1)=7.320182e-002; ng(n+1)=3.217169e+002;
n=38; farx(n+1)=4.793762e-001; foe(n+1)=1.632053e+000; krok(n+1)=2.788178e-002; ng(n+1)=3.327971e+002;
n=39; farx(n+1)=5.016829e-001; foe(n+1)=1.403786e+000; krok(n+1)=8.892951e-001; ng(n+1)=7.147910e+001;
n=40; farx(n+1)=4.656782e-001; foe(n+1)=1.328200e+000; krok(n+1)=1.171506e-001; ng(n+1)=5.918382e+001;
n=41; farx(n+1)=3.635281e-001; foe(n+1)=1.139665e+000; krok(n+1)=7.847380e-001; ng(n+1)=6.473841e+001;
n=42; farx(n+1)=3.711515e-001; foe(n+1)=9.899145e-001; krok(n+1)=1.153327e+000; ng(n+1)=3.221499e+001;
n=43; farx(n+1)=3.762913e-001; foe(n+1)=9.080894e-001; krok(n+1)=8.375141e-001; ng(n+1)=8.153982e+001;
n=44; farx(n+1)=4.196151e-001; foe(n+1)=8.727801e-001; krok(n+1)=6.212565e-001; ng(n+1)=4.464163e+001;
n=45; farx(n+1)=4.173158e-001; foe(n+1)=8.406132e-001; krok(n+1)=1.606385e+000; ng(n+1)=3.758416e+001;
n=46; farx(n+1)=4.072187e-001; foe(n+1)=8.289760e-001; krok(n+1)=1.040723e+000; ng(n+1)=4.001858e+001;
n=47; farx(n+1)=4.040959e-001; foe(n+1)=8.132845e-001; krok(n+1)=1.217699e+000; ng(n+1)=1.095507e+001;
n=48; farx(n+1)=4.081967e-001; foe(n+1)=7.779828e-001; krok(n+1)=1.289896e+000; ng(n+1)=3.477431e+001;
n=49; farx(n+1)=3.991295e-001; foe(n+1)=7.552095e-001; krok(n+1)=1.205394e+000; ng(n+1)=2.365016e+001;
n=50; farx(n+1)=3.952312e-001; foe(n+1)=7.339405e-001; krok(n+1)=8.913350e-001; ng(n+1)=3.504733e+001;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
