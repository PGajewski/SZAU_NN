%uczenie predyktora oe
clear all;
n=0; farx(n+1)=1.892440e+002; foe(n+1)=1.905702e+002; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=1.620388e+002; foe(n+1)=1.637757e+002; krok(n+1)=5.676782e-004; ng(n+1)=7.354490e+002;
n=2; farx(n+1)=5.935062e+001; foe(n+1)=6.398486e+001; krok(n+1)=5.433546e-003; ng(n+1)=4.820393e+002;
n=3; farx(n+1)=5.250500e+001; foe(n+1)=5.513708e+001; krok(n+1)=1.903300e-003; ng(n+1)=4.238024e+002;
n=4; farx(n+1)=5.086116e+001; foe(n+1)=5.404261e+001; krok(n+1)=3.416397e-003; ng(n+1)=1.373438e+002;
n=5; farx(n+1)=2.450979e+001; foe(n+1)=4.453885e+001; krok(n+1)=2.954351e-002; ng(n+1)=1.145072e+002;
n=6; farx(n+1)=9.827400e+000; foe(n+1)=2.731504e+001; krok(n+1)=5.829556e-003; ng(n+1)=7.303357e+002;
n=7; farx(n+1)=9.875678e+000; foe(n+1)=2.653788e+001; krok(n+1)=6.905895e-005; ng(n+1)=1.509260e+003;
n=8; farx(n+1)=1.016310e+001; foe(n+1)=2.605104e+001; krok(n+1)=2.397584e-003; ng(n+1)=1.535675e+003;
n=9; farx(n+1)=1.109177e+001; foe(n+1)=2.407667e+001; krok(n+1)=3.904632e-003; ng(n+1)=1.297914e+003;
n=10; farx(n+1)=1.119619e+001; foe(n+1)=2.307334e+001; krok(n+1)=5.961727e-003; ng(n+1)=5.780621e+002;
n=11; farx(n+1)=1.208963e+001; foe(n+1)=2.002674e+001; krok(n+1)=3.280985e-002; ng(n+1)=2.981893e+002;
n=12; farx(n+1)=1.160773e+001; foe(n+1)=1.849725e+001; krok(n+1)=8.891335e-003; ng(n+1)=3.249498e+002;
n=13; farx(n+1)=9.693572e+000; foe(n+1)=1.635168e+001; krok(n+1)=1.750226e-002; ng(n+1)=2.242705e+002;
n=14; farx(n+1)=7.697990e+000; foe(n+1)=1.444129e+001; krok(n+1)=4.969883e-003; ng(n+1)=3.266096e+002;
n=15; farx(n+1)=5.850351e+000; foe(n+1)=1.265981e+001; krok(n+1)=8.855578e-003; ng(n+1)=2.831373e+002;
n=16; farx(n+1)=4.145229e+000; foe(n+1)=1.119061e+001; krok(n+1)=3.550402e-003; ng(n+1)=3.682716e+002;
n=17; farx(n+1)=3.212193e+000; foe(n+1)=1.038282e+001; krok(n+1)=9.618292e-003; ng(n+1)=2.884185e+002;
n=18; farx(n+1)=1.805045e+000; foe(n+1)=7.710190e+000; krok(n+1)=2.502768e-002; ng(n+1)=2.780812e+002;
n=19; farx(n+1)=1.569616e+000; foe(n+1)=7.025342e+000; krok(n+1)=3.606707e-004; ng(n+1)=6.499827e+002;
n=20; farx(n+1)=9.788437e-001; foe(n+1)=4.009321e+000; krok(n+1)=1.111520e-002; ng(n+1)=5.324442e+002;
n=21; farx(n+1)=9.706107e-001; foe(n+1)=3.519118e+000; krok(n+1)=3.722051e-003; ng(n+1)=5.238432e+002;
n=22; farx(n+1)=7.444335e-001; foe(n+1)=2.501330e+000; krok(n+1)=2.015462e-002; ng(n+1)=1.280933e+002;
n=23; farx(n+1)=6.935832e-001; foe(n+1)=2.281250e+000; krok(n+1)=4.515039e-003; ng(n+1)=2.596588e+002;
n=24; farx(n+1)=6.614058e-001; foe(n+1)=2.132123e+000; krok(n+1)=6.970662e-003; ng(n+1)=3.656317e+002;
n=25; farx(n+1)=6.018910e-001; foe(n+1)=1.929432e+000; krok(n+1)=6.786752e-002; ng(n+1)=3.538645e+001;
%odnowa zmiennej metryki
n=26; farx(n+1)=5.965809e-001; foe(n+1)=1.869208e+000; krok(n+1)=3.400119e-005; ng(n+1)=1.556392e+002;
n=27; farx(n+1)=6.016501e-001; foe(n+1)=1.853278e+000; krok(n+1)=1.438760e-005; ng(n+1)=1.260762e+002;
n=28; farx(n+1)=5.942020e-001; foe(n+1)=1.798767e+000; krok(n+1)=7.499704e-004; ng(n+1)=3.808833e+001;
n=29; farx(n+1)=5.698864e-001; foe(n+1)=1.703512e+000; krok(n+1)=9.064776e-004; ng(n+1)=3.977584e+001;
n=30; farx(n+1)=5.398434e-001; foe(n+1)=1.444504e+000; krok(n+1)=1.650423e-002; ng(n+1)=3.782070e+001;
n=31; farx(n+1)=5.287460e-001; foe(n+1)=1.286075e+000; krok(n+1)=1.576669e-002; ng(n+1)=1.260272e+002;
n=32; farx(n+1)=5.191596e-001; foe(n+1)=1.214387e+000; krok(n+1)=1.033570e-002; ng(n+1)=1.288642e+002;
n=33; farx(n+1)=5.163911e-001; foe(n+1)=1.122803e+000; krok(n+1)=1.740861e-002; ng(n+1)=7.683790e+001;
n=34; farx(n+1)=5.262598e-001; foe(n+1)=1.071982e+000; krok(n+1)=1.856226e-002; ng(n+1)=1.400945e+002;
n=35; farx(n+1)=4.854912e-001; foe(n+1)=9.868936e-001; krok(n+1)=1.979909e-002; ng(n+1)=7.670835e+001;
n=36; farx(n+1)=4.428422e-001; foe(n+1)=9.315179e-001; krok(n+1)=3.023343e-002; ng(n+1)=1.029077e+002;
n=37; farx(n+1)=3.828497e-001; foe(n+1)=8.447870e-001; krok(n+1)=2.038894e-002; ng(n+1)=1.111559e+002;
n=38; farx(n+1)=3.691683e-001; foe(n+1)=7.960277e-001; krok(n+1)=1.748904e-002; ng(n+1)=6.021049e+001;
n=39; farx(n+1)=3.579125e-001; foe(n+1)=7.620993e-001; krok(n+1)=3.933136e-002; ng(n+1)=4.979669e+001;
n=40; farx(n+1)=3.401616e-001; foe(n+1)=7.070988e-001; krok(n+1)=3.661089e-002; ng(n+1)=1.406421e+002;
n=41; farx(n+1)=3.314813e-001; foe(n+1)=6.642116e-001; krok(n+1)=1.862092e-001; ng(n+1)=5.226795e+001;
n=42; farx(n+1)=3.228177e-001; foe(n+1)=6.326188e-001; krok(n+1)=4.524124e-002; ng(n+1)=9.747304e+001;
n=43; farx(n+1)=3.242498e-001; foe(n+1)=6.083929e-001; krok(n+1)=3.660091e-002; ng(n+1)=8.497703e+001;
n=44; farx(n+1)=3.324451e-001; foe(n+1)=5.845989e-001; krok(n+1)=6.561970e-002; ng(n+1)=3.849992e+001;
n=45; farx(n+1)=3.487055e-001; foe(n+1)=5.479106e-001; krok(n+1)=1.817918e-001; ng(n+1)=3.453514e+001;
n=46; farx(n+1)=3.616583e-001; foe(n+1)=5.255154e-001; krok(n+1)=1.160291e-001; ng(n+1)=8.865241e+001;
n=47; farx(n+1)=3.701996e-001; foe(n+1)=5.126145e-001; krok(n+1)=5.099752e-002; ng(n+1)=5.907369e+001;
n=48; farx(n+1)=3.559741e-001; foe(n+1)=4.943818e-001; krok(n+1)=1.338049e-001; ng(n+1)=4.640987e+001;
n=49; farx(n+1)=3.262592e-001; foe(n+1)=4.714846e-001; krok(n+1)=3.200292e-001; ng(n+1)=5.861186e+001;
n=50; farx(n+1)=3.247678e-001; foe(n+1)=4.376647e-001; krok(n+1)=6.855549e-001; ng(n+1)=3.419000e+001;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
