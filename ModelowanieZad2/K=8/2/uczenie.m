%uczenie predyktora oe
clear all;
n=0; farx(n+1)=1.859744e+002; foe(n+1)=2.009104e+002; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=1.571993e+002; foe(n+1)=1.686288e+002; krok(n+1)=5.432857e-004; ng(n+1)=9.738971e+002;
n=2; farx(n+1)=5.487070e+001; foe(n+1)=5.758313e+001; krok(n+1)=5.945944e-003; ng(n+1)=6.001605e+002;
n=3; farx(n+1)=5.423194e+001; foe(n+1)=5.678759e+001; krok(n+1)=1.284763e-003; ng(n+1)=1.500729e+002;
n=4; farx(n+1)=4.925697e+001; foe(n+1)=5.565442e+001; krok(n+1)=5.022246e-003; ng(n+1)=8.444599e+001;
n=5; farx(n+1)=1.617879e+001; foe(n+1)=3.453345e+001; krok(n+1)=2.762153e-002; ng(n+1)=1.745857e+002;
n=6; farx(n+1)=1.144894e+001; foe(n+1)=2.211842e+001; krok(n+1)=1.506590e-003; ng(n+1)=8.314389e+002;
n=7; farx(n+1)=1.085043e+001; foe(n+1)=1.964303e+001; krok(n+1)=2.923979e-004; ng(n+1)=8.310193e+002;
n=8; farx(n+1)=1.047214e+001; foe(n+1)=1.849444e+001; krok(n+1)=7.032104e-003; ng(n+1)=5.429569e+002;
n=9; farx(n+1)=9.836801e+000; foe(n+1)=1.753063e+001; krok(n+1)=1.309024e-002; ng(n+1)=2.559487e+002;
n=10; farx(n+1)=7.984788e+000; foe(n+1)=1.560563e+001; krok(n+1)=9.447410e-003; ng(n+1)=1.014398e+002;
n=11; farx(n+1)=7.337764e+000; foe(n+1)=1.465806e+001; krok(n+1)=5.557598e-003; ng(n+1)=4.898701e+002;
n=12; farx(n+1)=6.814955e+000; foe(n+1)=1.363568e+001; krok(n+1)=1.908037e-003; ng(n+1)=5.637478e+002;
n=13; farx(n+1)=6.105421e+000; foe(n+1)=1.235920e+001; krok(n+1)=2.439969e-002; ng(n+1)=6.581918e+002;
n=14; farx(n+1)=5.516806e+000; foe(n+1)=8.070403e+000; krok(n+1)=8.928204e-003; ng(n+1)=9.984050e+002;
n=15; farx(n+1)=5.253322e+000; foe(n+1)=7.631918e+000; krok(n+1)=3.190066e-003; ng(n+1)=2.873093e+002;
n=16; farx(n+1)=4.631734e+000; foe(n+1)=6.902243e+000; krok(n+1)=6.854056e-003; ng(n+1)=4.027108e+002;
n=17; farx(n+1)=3.636820e+000; foe(n+1)=5.567299e+000; krok(n+1)=1.778972e-002; ng(n+1)=1.923200e+002;
n=18; farx(n+1)=3.037010e+000; foe(n+1)=4.773055e+000; krok(n+1)=3.174920e-003; ng(n+1)=1.975934e+002;
n=19; farx(n+1)=2.698163e+000; foe(n+1)=4.324848e+000; krok(n+1)=4.126268e-003; ng(n+1)=5.159361e+002;
n=20; farx(n+1)=1.651571e+000; foe(n+1)=2.861657e+000; krok(n+1)=2.173419e-002; ng(n+1)=2.428218e+002;
n=21; farx(n+1)=1.312924e+000; foe(n+1)=2.389075e+000; krok(n+1)=2.742688e-003; ng(n+1)=3.298754e+002;
n=22; farx(n+1)=1.144788e+000; foe(n+1)=2.256893e+000; krok(n+1)=1.171709e-002; ng(n+1)=1.325852e+002;
n=23; farx(n+1)=9.305145e-001; foe(n+1)=2.000700e+000; krok(n+1)=7.585588e-003; ng(n+1)=1.350698e+002;
n=24; farx(n+1)=7.851591e-001; foe(n+1)=1.835725e+000; krok(n+1)=2.051182e-002; ng(n+1)=2.552993e+002;
n=25; farx(n+1)=6.775380e-001; foe(n+1)=1.717003e+000; krok(n+1)=2.788482e-002; ng(n+1)=7.442285e+001;
%odnowa zmiennej metryki
n=26; farx(n+1)=6.830972e-001; foe(n+1)=1.698560e+000; krok(n+1)=1.961746e-005; ng(n+1)=1.278859e+002;
n=27; farx(n+1)=6.839396e-001; foe(n+1)=1.682228e+000; krok(n+1)=1.213830e-004; ng(n+1)=3.761526e+001;
n=28; farx(n+1)=6.846343e-001; foe(n+1)=1.670154e+000; krok(n+1)=1.168734e-004; ng(n+1)=4.042112e+001;
n=29; farx(n+1)=6.639415e-001; foe(n+1)=1.370067e+000; krok(n+1)=6.506258e-003; ng(n+1)=2.774398e+001;
n=30; farx(n+1)=6.361211e-001; foe(n+1)=1.268782e+000; krok(n+1)=1.025657e-002; ng(n+1)=5.766033e+001;
n=31; farx(n+1)=5.865061e-001; foe(n+1)=1.192595e+000; krok(n+1)=3.394563e-002; ng(n+1)=9.879600e+001;
n=32; farx(n+1)=5.527474e-001; foe(n+1)=1.128022e+000; krok(n+1)=1.708495e-002; ng(n+1)=1.182857e+002;
n=33; farx(n+1)=5.656694e-001; foe(n+1)=1.097150e+000; krok(n+1)=9.096510e-003; ng(n+1)=1.288021e+002;
n=34; farx(n+1)=5.040330e-001; foe(n+1)=1.021919e+000; krok(n+1)=4.773765e-002; ng(n+1)=1.426161e+001;
n=35; farx(n+1)=4.830461e-001; foe(n+1)=9.791077e-001; krok(n+1)=3.522595e-002; ng(n+1)=9.217118e+001;
n=36; farx(n+1)=4.774702e-001; foe(n+1)=9.431420e-001; krok(n+1)=4.486659e-002; ng(n+1)=8.004798e+001;
n=37; farx(n+1)=4.180310e-001; foe(n+1)=8.762155e-001; krok(n+1)=4.149438e-002; ng(n+1)=4.659022e+001;
n=38; farx(n+1)=4.017065e-001; foe(n+1)=8.533454e-001; krok(n+1)=1.685330e-002; ng(n+1)=9.623036e+001;
n=39; farx(n+1)=3.819621e-001; foe(n+1)=8.268683e-001; krok(n+1)=1.321526e-002; ng(n+1)=5.541761e+001;
n=40; farx(n+1)=3.610717e-001; foe(n+1)=8.026778e-001; krok(n+1)=1.750226e-002; ng(n+1)=4.985710e+001;
n=41; farx(n+1)=3.504402e-001; foe(n+1)=7.792447e-001; krok(n+1)=3.153338e-002; ng(n+1)=8.724137e+001;
n=42; farx(n+1)=3.396908e-001; foe(n+1)=7.512220e-001; krok(n+1)=4.017657e-002; ng(n+1)=3.716127e+001;
n=43; farx(n+1)=3.342557e-001; foe(n+1)=7.315734e-001; krok(n+1)=4.235232e-002; ng(n+1)=8.029064e+001;
n=44; farx(n+1)=3.303667e-001; foe(n+1)=6.994652e-001; krok(n+1)=6.021814e-002; ng(n+1)=1.155410e+002;
n=45; farx(n+1)=3.351308e-001; foe(n+1)=6.749526e-001; krok(n+1)=6.130039e-002; ng(n+1)=4.041075e+001;
n=46; farx(n+1)=3.513904e-001; foe(n+1)=6.491286e-001; krok(n+1)=3.612085e-002; ng(n+1)=5.394401e+001;
n=47; farx(n+1)=3.578986e-001; foe(n+1)=6.329516e-001; krok(n+1)=8.973318e-002; ng(n+1)=6.807963e+001;
n=48; farx(n+1)=3.834485e-001; foe(n+1)=5.817385e-001; krok(n+1)=1.913888e-001; ng(n+1)=2.886925e+001;
n=49; farx(n+1)=3.827451e-001; foe(n+1)=5.788980e-001; krok(n+1)=1.589439e-002; ng(n+1)=2.915953e+001;
n=50; farx(n+1)=3.719070e-001; foe(n+1)=5.644455e-001; krok(n+1)=7.280720e-002; ng(n+1)=2.326617e+001;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
