%uczenie predyktora oe
clear all;
n=0; farx(n+1)=1.932233e+002; foe(n+1)=1.915857e+002; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=1.699239e+002; foe(n+1)=1.691131e+002; krok(n+1)=7.101242e-004; ng(n+1)=5.634059e+002;
n=2; farx(n+1)=5.776133e+001; foe(n+1)=5.762984e+001; krok(n+1)=5.711090e-003; ng(n+1)=4.267739e+002;
n=3; farx(n+1)=5.668363e+001; foe(n+1)=5.677282e+001; krok(n+1)=8.336543e-004; ng(n+1)=1.570011e+002;
n=4; farx(n+1)=5.002951e+001; foe(n+1)=5.571544e+001; krok(n+1)=4.341280e-003; ng(n+1)=8.415291e+001;
n=5; farx(n+1)=8.444876e+000; foe(n+1)=2.737495e+001; krok(n+1)=1.603515e-002; ng(n+1)=1.848264e+002;
n=6; farx(n+1)=8.343074e+000; foe(n+1)=2.671642e+001; krok(n+1)=1.228120e-004; ng(n+1)=1.558216e+003;
n=7; farx(n+1)=1.019489e+001; foe(n+1)=2.493950e+001; krok(n+1)=8.009570e-003; ng(n+1)=1.891718e+003;
n=8; farx(n+1)=1.056008e+001; foe(n+1)=2.434090e+001; krok(n+1)=1.889294e-003; ng(n+1)=7.092322e+002;
n=9; farx(n+1)=1.097444e+001; foe(n+1)=2.311878e+001; krok(n+1)=1.708036e-003; ng(n+1)=4.732576e+002;
n=10; farx(n+1)=1.151035e+001; foe(n+1)=2.087193e+001; krok(n+1)=3.485331e-003; ng(n+1)=4.949488e+002;
n=11; farx(n+1)=1.011756e+001; foe(n+1)=1.727587e+001; krok(n+1)=1.165868e-002; ng(n+1)=6.216224e+002;
n=12; farx(n+1)=9.758032e+000; foe(n+1)=1.656349e+001; krok(n+1)=1.402081e-003; ng(n+1)=6.857842e+002;
n=13; farx(n+1)=7.561570e+000; foe(n+1)=1.306012e+001; krok(n+1)=2.093303e-002; ng(n+1)=7.304489e+002;
n=14; farx(n+1)=5.319197e+000; foe(n+1)=1.098546e+001; krok(n+1)=6.192369e-003; ng(n+1)=5.295248e+002;
n=15; farx(n+1)=3.128490e+000; foe(n+1)=9.486963e+000; krok(n+1)=8.204311e-003; ng(n+1)=6.039359e+002;
n=16; farx(n+1)=1.574161e+000; foe(n+1)=7.861365e+000; krok(n+1)=1.040497e-003; ng(n+1)=7.567394e+002;
n=17; farx(n+1)=1.407488e+000; foe(n+1)=7.546640e+000; krok(n+1)=2.090079e-003; ng(n+1)=4.374198e+002;
n=18; farx(n+1)=1.103278e+000; foe(n+1)=6.830338e+000; krok(n+1)=1.042882e-002; ng(n+1)=4.785789e+002;
n=19; farx(n+1)=8.491419e-001; foe(n+1)=5.933467e+000; krok(n+1)=2.660052e-003; ng(n+1)=3.252715e+002;
n=20; farx(n+1)=8.254136e-001; foe(n+1)=5.378191e+000; krok(n+1)=1.199953e-002; ng(n+1)=3.315157e+002;
n=21; farx(n+1)=8.254421e-001; foe(n+1)=4.566761e+000; krok(n+1)=1.017451e-002; ng(n+1)=2.318682e+002;
n=22; farx(n+1)=8.304262e-001; foe(n+1)=4.292358e+000; krok(n+1)=9.661282e-003; ng(n+1)=2.986284e+002;
n=23; farx(n+1)=7.931008e-001; foe(n+1)=3.776523e+000; krok(n+1)=2.774090e-003; ng(n+1)=3.435215e+002;
n=24; farx(n+1)=7.685903e-001; foe(n+1)=3.275253e+000; krok(n+1)=7.032104e-003; ng(n+1)=5.440356e+002;
n=25; farx(n+1)=7.600831e-001; foe(n+1)=3.048569e+000; krok(n+1)=6.941453e-003; ng(n+1)=3.367179e+002;
%odnowa zmiennej metryki
n=26; farx(n+1)=7.530166e-001; foe(n+1)=2.949500e+000; krok(n+1)=1.197415e-005; ng(n+1)=5.169176e+002;
n=27; farx(n+1)=7.529505e-001; foe(n+1)=2.925749e+000; krok(n+1)=2.394830e-005; ng(n+1)=1.430241e+002;
n=28; farx(n+1)=7.257023e-001; foe(n+1)=2.868814e+000; krok(n+1)=6.328553e-004; ng(n+1)=5.121445e+001;
n=29; farx(n+1)=6.383029e-001; foe(n+1)=2.359524e+000; krok(n+1)=3.792736e-003; ng(n+1)=6.286153e+001;
n=30; farx(n+1)=6.635875e-001; foe(n+1)=2.132698e+000; krok(n+1)=3.485331e-003; ng(n+1)=7.386852e+001;
n=31; farx(n+1)=6.418488e-001; foe(n+1)=1.766470e+000; krok(n+1)=1.767909e-002; ng(n+1)=3.475424e+002;
n=32; farx(n+1)=6.041024e-001; foe(n+1)=1.585217e+000; krok(n+1)=4.175393e-003; ng(n+1)=2.080935e+002;
n=33; farx(n+1)=5.469528e-001; foe(n+1)=1.339503e+000; krok(n+1)=1.513348e-002; ng(n+1)=2.865184e+002;
n=34; farx(n+1)=5.202990e-001; foe(n+1)=1.267237e+000; krok(n+1)=1.955649e-002; ng(n+1)=1.868074e+002;
n=35; farx(n+1)=5.103256e-001; foe(n+1)=1.223678e+000; krok(n+1)=1.184956e-002; ng(n+1)=1.244141e+002;
n=36; farx(n+1)=4.652379e-001; foe(n+1)=1.137009e+000; krok(n+1)=2.753897e-002; ng(n+1)=8.476936e+001;
n=37; farx(n+1)=4.469021e-001; foe(n+1)=1.090219e+000; krok(n+1)=5.031042e-002; ng(n+1)=4.458925e+001;
n=38; farx(n+1)=4.434775e-001; foe(n+1)=1.043150e+000; krok(n+1)=3.229291e-002; ng(n+1)=7.198034e+001;
n=39; farx(n+1)=4.331365e-001; foe(n+1)=1.020271e+000; krok(n+1)=8.966852e-003; ng(n+1)=1.427797e+002;
n=40; farx(n+1)=4.269935e-001; foe(n+1)=9.846094e-001; krok(n+1)=4.954706e-002; ng(n+1)=1.204881e+002;
n=41; farx(n+1)=3.623812e-001; foe(n+1)=9.188901e-001; krok(n+1)=1.490738e-001; ng(n+1)=3.053865e+001;
n=42; farx(n+1)=3.514459e-001; foe(n+1)=9.015550e-001; krok(n+1)=7.602094e-003; ng(n+1)=2.147263e+002;
n=43; farx(n+1)=3.433108e-001; foe(n+1)=8.870943e-001; krok(n+1)=1.204622e-002; ng(n+1)=1.221993e+002;
n=44; farx(n+1)=3.551019e-001; foe(n+1)=8.483084e-001; krok(n+1)=1.492217e-001; ng(n+1)=6.195526e+001;
n=45; farx(n+1)=3.542852e-001; foe(n+1)=8.436248e-001; krok(n+1)=1.438335e-002; ng(n+1)=4.884160e+001;
n=46; farx(n+1)=3.504045e-001; foe(n+1)=8.205536e-001; krok(n+1)=1.001107e-001; ng(n+1)=5.045745e+001;
n=47; farx(n+1)=3.582697e-001; foe(n+1)=8.047504e-001; krok(n+1)=7.338628e-002; ng(n+1)=4.341532e+001;
n=48; farx(n+1)=3.653764e-001; foe(n+1)=7.961824e-001; krok(n+1)=1.115306e-001; ng(n+1)=5.388719e+001;
n=49; farx(n+1)=3.958832e-001; foe(n+1)=7.782741e-001; krok(n+1)=1.584655e-001; ng(n+1)=1.104280e+002;
n=50; farx(n+1)=3.694548e-001; foe(n+1)=7.300547e-001; krok(n+1)=1.902702e-001; ng(n+1)=3.549676e+001;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
