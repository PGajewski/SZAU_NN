%uczenie predyktora oe
clear all;
n=0; farx(n+1)=3.130375e+002; foe(n+1)=2.987572e+002; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=1.801706e+002; foe(n+1)=1.721057e+002; krok(n+1)=5.202718e-004; ng(n+1)=1.024326e+003;
n=2; farx(n+1)=5.035343e+001; foe(n+1)=5.484321e+001; krok(n+1)=1.086709e-002; ng(n+1)=3.317514e+002;
n=3; farx(n+1)=4.851063e+001; foe(n+1)=5.315774e+001; krok(n+1)=1.209728e-003; ng(n+1)=1.601918e+002;
n=4; farx(n+1)=1.967995e+001; foe(n+1)=3.779198e+001; krok(n+1)=2.847603e-002; ng(n+1)=9.138801e+001;
n=5; farx(n+1)=1.533734e+001; foe(n+1)=3.503110e+001; krok(n+1)=3.933588e-004; ng(n+1)=4.007466e+002;
n=6; farx(n+1)=1.160771e+001; foe(n+1)=2.555272e+001; krok(n+1)=9.385969e-003; ng(n+1)=5.045693e+002;
n=7; farx(n+1)=1.108412e+001; foe(n+1)=2.372543e+001; krok(n+1)=1.338974e-003; ng(n+1)=6.354307e+002;
n=8; farx(n+1)=1.082251e+001; foe(n+1)=2.216513e+001; krok(n+1)=5.548179e-003; ng(n+1)=5.800534e+002;
n=9; farx(n+1)=1.097897e+001; foe(n+1)=2.188685e+001; krok(n+1)=7.833534e-003; ng(n+1)=1.906755e+002;
n=10; farx(n+1)=1.064457e+001; foe(n+1)=2.101625e+001; krok(n+1)=2.219272e-002; ng(n+1)=1.444569e+002;
n=11; farx(n+1)=1.017979e+001; foe(n+1)=1.911369e+001; krok(n+1)=2.502768e-002; ng(n+1)=1.719660e+002;
n=12; farx(n+1)=9.278205e+000; foe(n+1)=1.587256e+001; krok(n+1)=1.208515e-002; ng(n+1)=2.587364e+002;
n=13; farx(n+1)=9.604400e+000; foe(n+1)=1.520983e+001; krok(n+1)=1.389400e-003; ng(n+1)=5.154244e+002;
n=14; farx(n+1)=9.545474e+000; foe(n+1)=1.460114e+001; krok(n+1)=1.033570e-002; ng(n+1)=3.893898e+002;
n=15; farx(n+1)=9.226655e+000; foe(n+1)=1.420608e+001; krok(n+1)=8.928204e-003; ng(n+1)=2.446801e+002;
n=16; farx(n+1)=8.803939e+000; foe(n+1)=1.365819e+001; krok(n+1)=7.833534e-003; ng(n+1)=1.961093e+002;
n=17; farx(n+1)=7.527595e+000; foe(n+1)=1.199391e+001; krok(n+1)=1.462925e-002; ng(n+1)=3.779624e+002;
n=18; farx(n+1)=6.071484e+000; foe(n+1)=9.733864e+000; krok(n+1)=2.160874e-002; ng(n+1)=5.486496e+002;
n=19; farx(n+1)=5.735809e+000; foe(n+1)=9.220852e+000; krok(n+1)=1.473291e-002; ng(n+1)=2.686085e+002;
n=20; farx(n+1)=2.122975e+000; foe(n+1)=5.299466e+000; krok(n+1)=2.010048e-001; ng(n+1)=2.073778e+002;
n=21; farx(n+1)=1.560276e+000; foe(n+1)=4.493367e+000; krok(n+1)=7.692316e-003; ng(n+1)=5.484924e+002;
n=22; farx(n+1)=1.051604e+000; foe(n+1)=3.515103e+000; krok(n+1)=1.251384e-002; ng(n+1)=5.434669e+002;
n=23; farx(n+1)=7.519408e-001; foe(n+1)=2.899333e+000; krok(n+1)=1.076512e-001; ng(n+1)=1.479535e+002;
n=24; farx(n+1)=7.226627e-001; foe(n+1)=2.681433e+000; krok(n+1)=5.208958e-002; ng(n+1)=1.146915e+002;
n=25; farx(n+1)=4.668922e-001; foe(n+1)=1.872377e+000; krok(n+1)=1.961845e-001; ng(n+1)=2.601400e+002;
%odnowa zmiennej metryki
n=26; farx(n+1)=4.666886e-001; foe(n+1)=1.848632e+000; krok(n+1)=1.470858e-005; ng(n+1)=1.351821e+002;
n=27; farx(n+1)=4.675884e-001; foe(n+1)=1.824602e+000; krok(n+1)=2.907853e-005; ng(n+1)=1.136923e+002;
n=28; farx(n+1)=4.758761e-001; foe(n+1)=1.790791e+000; krok(n+1)=5.940926e-004; ng(n+1)=2.809811e+001;
n=29; farx(n+1)=4.593918e-001; foe(n+1)=1.555542e+000; krok(n+1)=1.317301e-003; ng(n+1)=5.013350e+001;
n=30; farx(n+1)=4.509392e-001; foe(n+1)=1.414980e+000; krok(n+1)=2.560682e-002; ng(n+1)=4.803367e+001;
n=31; farx(n+1)=4.383016e-001; foe(n+1)=1.279773e+000; krok(n+1)=5.355898e-003; ng(n+1)=1.910608e+002;
n=32; farx(n+1)=4.009148e-001; foe(n+1)=1.107778e+000; krok(n+1)=1.878731e-002; ng(n+1)=1.017073e+002;
n=33; farx(n+1)=3.989188e-001; foe(n+1)=9.501084e-001; krok(n+1)=1.071441e-002; ng(n+1)=2.623535e+002;
n=34; farx(n+1)=4.029305e-001; foe(n+1)=8.977699e-001; krok(n+1)=1.448480e-002; ng(n+1)=1.030509e+002;
n=35; farx(n+1)=4.336534e-001; foe(n+1)=8.644040e-001; krok(n+1)=3.467713e-002; ng(n+1)=3.766430e+001;
n=36; farx(n+1)=4.278968e-001; foe(n+1)=8.523400e-001; krok(n+1)=4.756755e-002; ng(n+1)=3.016653e+001;
n=37; farx(n+1)=4.006594e-001; foe(n+1)=8.217080e-001; krok(n+1)=7.572847e-002; ng(n+1)=5.569695e+001;
n=38; farx(n+1)=3.787122e-001; foe(n+1)=8.033232e-001; krok(n+1)=1.079418e-001; ng(n+1)=3.627530e+001;
n=39; farx(n+1)=3.657068e-001; foe(n+1)=7.874205e-001; krok(n+1)=8.155575e-002; ng(n+1)=4.484714e+001;
n=40; farx(n+1)=3.641122e-001; foe(n+1)=7.733450e-001; krok(n+1)=1.067078e-001; ng(n+1)=3.289079e+001;
n=41; farx(n+1)=3.583387e-001; foe(n+1)=7.533587e-001; krok(n+1)=5.005537e-002; ng(n+1)=7.706802e+001;
n=42; farx(n+1)=3.322388e-001; foe(n+1)=7.405181e-001; krok(n+1)=3.601750e-001; ng(n+1)=3.485398e+001;
n=43; farx(n+1)=3.201667e-001; foe(n+1)=7.301567e-001; krok(n+1)=2.393567e-001; ng(n+1)=1.321152e+001;
n=44; farx(n+1)=3.231905e-001; foe(n+1)=7.199438e-001; krok(n+1)=3.404866e-001; ng(n+1)=2.188447e+001;
n=45; farx(n+1)=3.239613e-001; foe(n+1)=7.138563e-001; krok(n+1)=3.381117e-001; ng(n+1)=2.012805e+001;
n=46; farx(n+1)=3.223113e-001; foe(n+1)=7.017266e-001; krok(n+1)=3.465039e-001; ng(n+1)=5.320568e+001;
n=47; farx(n+1)=3.126436e-001; foe(n+1)=6.952138e-001; krok(n+1)=4.556164e-001; ng(n+1)=1.831886e+001;
n=48; farx(n+1)=3.014673e-001; foe(n+1)=6.842134e-001; krok(n+1)=5.450576e-001; ng(n+1)=2.813840e+001;
n=49; farx(n+1)=2.915060e-001; foe(n+1)=6.674866e-001; krok(n+1)=9.685429e-001; ng(n+1)=2.532930e+001;
n=50; farx(n+1)=2.861641e-001; foe(n+1)=6.571443e-001; krok(n+1)=2.563063e-001; ng(n+1)=3.991679e+001;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
