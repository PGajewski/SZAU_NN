%uczenie predyktora oe
clear all;
n=0; farx(n+1)=2.973055e+002; foe(n+1)=2.981678e+002; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=1.811066e+002; foe(n+1)=1.799052e+002; krok(n+1)=4.884852e-004; ng(n+1)=1.078118e+003;
n=2; farx(n+1)=1.491288e+002; foe(n+1)=1.396033e+002; krok(n+1)=1.184956e-002; ng(n+1)=2.539594e+002;
n=3; farx(n+1)=6.293071e+001; foe(n+1)=5.672739e+001; krok(n+1)=9.991826e-004; ng(n+1)=8.300561e+002;
n=4; farx(n+1)=5.760969e+001; foe(n+1)=5.512992e+001; krok(n+1)=5.849663e-003; ng(n+1)=9.013790e+001;
n=5; farx(n+1)=2.878958e+001; foe(n+1)=3.990608e+001; krok(n+1)=1.614645e-002; ng(n+1)=1.642417e+002;
n=6; farx(n+1)=2.620221e+001; foe(n+1)=3.736264e+001; krok(n+1)=3.473809e-003; ng(n+1)=3.635121e+002;
n=7; farx(n+1)=2.375354e+001; foe(n+1)=3.467372e+001; krok(n+1)=4.315901e-003; ng(n+1)=1.780937e+002;
n=8; farx(n+1)=1.566759e+001; foe(n+1)=2.903798e+001; krok(n+1)=1.495979e-002; ng(n+1)=1.483800e+002;
n=9; farx(n+1)=1.407840e+001; foe(n+1)=2.667868e+001; krok(n+1)=1.219985e-002; ng(n+1)=1.768440e+002;
n=10; farx(n+1)=1.371159e+001; foe(n+1)=2.579771e+001; krok(n+1)=3.485222e-003; ng(n+1)=1.875854e+002;
n=11; farx(n+1)=1.041843e+001; foe(n+1)=2.358192e+001; krok(n+1)=2.452306e-002; ng(n+1)=1.000233e+002;
n=12; farx(n+1)=9.095771e+000; foe(n+1)=2.204546e+001; krok(n+1)=3.898185e-003; ng(n+1)=3.288238e+002;
n=13; farx(n+1)=8.559519e+000; foe(n+1)=2.142792e+001; krok(n+1)=4.208519e-003; ng(n+1)=4.307835e+002;
n=14; farx(n+1)=7.382984e+000; foe(n+1)=1.906227e+001; krok(n+1)=1.238677e-002; ng(n+1)=3.565201e+002;
n=15; farx(n+1)=7.237074e+000; foe(n+1)=1.878499e+001; krok(n+1)=1.333847e-002; ng(n+1)=2.540855e+002;
n=16; farx(n+1)=7.054526e+000; foe(n+1)=1.817703e+001; krok(n+1)=2.896961e-002; ng(n+1)=2.128778e+002;
n=17; farx(n+1)=6.463346e+000; foe(n+1)=1.612093e+001; krok(n+1)=6.640781e-002; ng(n+1)=3.622670e+002;
n=18; farx(n+1)=5.804546e+000; foe(n+1)=1.562392e+001; krok(n+1)=8.005809e-002; ng(n+1)=1.881793e+002;
n=19; farx(n+1)=5.437499e+000; foe(n+1)=1.492848e+001; krok(n+1)=2.527804e-002; ng(n+1)=1.947754e+002;
n=20; farx(n+1)=4.679452e+000; foe(n+1)=1.412146e+001; krok(n+1)=9.809225e-002; ng(n+1)=2.259649e+002;
n=21; farx(n+1)=3.989818e+000; foe(n+1)=1.299528e+001; krok(n+1)=5.082412e-002; ng(n+1)=3.470058e+002;
n=22; farx(n+1)=1.921577e+000; foe(n+1)=9.359307e+000; krok(n+1)=4.881595e-001; ng(n+1)=2.654916e+002;
n=23; farx(n+1)=1.860798e+000; foe(n+1)=8.947535e+000; krok(n+1)=2.219272e-002; ng(n+1)=5.012254e+002;
n=24; farx(n+1)=1.874243e+000; foe(n+1)=8.456255e+000; krok(n+1)=1.835014e-002; ng(n+1)=3.971554e+002;
n=25; farx(n+1)=2.152593e+000; foe(n+1)=7.265548e+000; krok(n+1)=1.686145e-001; ng(n+1)=3.623502e+002;
%odnowa zmiennej metryki
n=26; farx(n+1)=2.077460e+000; foe(n+1)=7.186979e+000; krok(n+1)=1.515170e-005; ng(n+1)=1.277571e+002;
n=27; farx(n+1)=1.601981e+000; foe(n+1)=6.228920e+000; krok(n+1)=4.623634e-004; ng(n+1)=1.325478e+002;
n=28; farx(n+1)=1.550880e+000; foe(n+1)=5.912857e+000; krok(n+1)=4.982285e-005; ng(n+1)=2.157374e+002;
n=29; farx(n+1)=1.307936e+000; foe(n+1)=4.843292e+000; krok(n+1)=6.293742e-003; ng(n+1)=1.038622e+002;
n=30; farx(n+1)=1.374206e+000; foe(n+1)=4.630317e+000; krok(n+1)=3.229906e-004; ng(n+1)=1.683000e+002;
n=31; farx(n+1)=1.281355e+000; foe(n+1)=3.964184e+000; krok(n+1)=2.925850e-002; ng(n+1)=1.244311e+002;
n=32; farx(n+1)=1.245041e+000; foe(n+1)=3.515163e+000; krok(n+1)=1.270603e-002; ng(n+1)=2.162457e+002;
n=33; farx(n+1)=1.235602e+000; foe(n+1)=3.413854e+000; krok(n+1)=2.446965e-003; ng(n+1)=1.440046e+002;
n=34; farx(n+1)=1.228229e+000; foe(n+1)=3.315919e+000; krok(n+1)=5.548179e-003; ng(n+1)=7.488012e+001;
n=35; farx(n+1)=1.125245e+000; foe(n+1)=2.938536e+000; krok(n+1)=3.350022e-002; ng(n+1)=1.576798e+002;
n=36; farx(n+1)=8.592184e-001; foe(n+1)=2.389228e+000; krok(n+1)=1.016482e-001; ng(n+1)=1.130385e+002;
n=37; farx(n+1)=7.924334e-001; foe(n+1)=2.195328e+000; krok(n+1)=6.754317e-002; ng(n+1)=8.971574e+001;
n=38; farx(n+1)=8.216154e-001; foe(n+1)=2.042231e+000; krok(n+1)=1.778431e-001; ng(n+1)=2.000147e+002;
n=39; farx(n+1)=8.038016e-001; foe(n+1)=1.928150e+000; krok(n+1)=1.522124e-001; ng(n+1)=1.764722e+002;
n=40; farx(n+1)=6.780789e-001; foe(n+1)=1.700497e+000; krok(n+1)=1.940886e-001; ng(n+1)=1.994229e+002;
n=41; farx(n+1)=6.246719e-001; foe(n+1)=1.609603e+000; krok(n+1)=1.951976e-001; ng(n+1)=1.312959e+002;
n=42; farx(n+1)=6.096663e-001; foe(n+1)=1.518878e+000; krok(n+1)=3.183983e-001; ng(n+1)=1.083010e+002;
n=43; farx(n+1)=6.005471e-001; foe(n+1)=1.442057e+000; krok(n+1)=2.436225e-001; ng(n+1)=6.933800e+001;
n=44; farx(n+1)=6.289297e-001; foe(n+1)=1.400081e+000; krok(n+1)=1.874735e-001; ng(n+1)=1.099603e+002;
n=45; farx(n+1)=5.990676e-001; foe(n+1)=1.345365e+000; krok(n+1)=5.779335e-001; ng(n+1)=4.354557e+001;
n=46; farx(n+1)=5.877032e-001; foe(n+1)=1.297572e+000; krok(n+1)=1.611570e-001; ng(n+1)=9.025012e+001;
n=47; farx(n+1)=5.674745e-001; foe(n+1)=1.229500e+000; krok(n+1)=7.021280e-001; ng(n+1)=7.743935e+001;
n=48; farx(n+1)=5.348676e-001; foe(n+1)=1.118575e+000; krok(n+1)=7.926233e-001; ng(n+1)=2.535013e+001;
n=49; farx(n+1)=5.026739e-001; foe(n+1)=1.001675e+000; krok(n+1)=6.553300e-001; ng(n+1)=3.574407e+001;
n=50; farx(n+1)=5.051617e-001; foe(n+1)=9.686597e-001; krok(n+1)=1.418482e-001; ng(n+1)=1.012418e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
