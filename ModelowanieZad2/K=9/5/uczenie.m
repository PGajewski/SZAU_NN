%uczenie predyktora oe
clear all;
n=0; farx(n+1)=2.519508e+002; foe(n+1)=2.487635e+002; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=1.701571e+002; foe(n+1)=1.664892e+002; krok(n+1)=5.053235e-004; ng(n+1)=1.044279e+003;
n=2; farx(n+1)=6.826316e+001; foe(n+1)=6.232343e+001; krok(n+1)=7.354218e-003; ng(n+1)=4.490135e+002;
n=3; farx(n+1)=6.526654e+001; foe(n+1)=5.768882e+001; krok(n+1)=2.885366e-003; ng(n+1)=2.893552e+002;
n=4; farx(n+1)=5.428098e+001; foe(n+1)=5.545239e+001; krok(n+1)=2.399905e-002; ng(n+1)=5.891212e+001;
n=5; farx(n+1)=3.106941e+001; foe(n+1)=4.917227e+001; krok(n+1)=5.433546e-003; ng(n+1)=2.316998e+002;
n=6; farx(n+1)=6.853194e+000; foe(n+1)=1.633064e+001; krok(n+1)=1.248857e-002; ng(n+1)=5.594863e+002;
n=7; farx(n+1)=6.811289e+000; foe(n+1)=1.602655e+001; krok(n+1)=9.119445e-005; ng(n+1)=5.126556e+002;
n=8; farx(n+1)=6.685132e+000; foe(n+1)=1.577173e+001; krok(n+1)=2.232322e-003; ng(n+1)=5.497545e+002;
n=9; farx(n+1)=6.365424e+000; foe(n+1)=1.486734e+001; krok(n+1)=4.014511e-003; ng(n+1)=6.166507e+002;
n=10; farx(n+1)=4.381948e+000; foe(n+1)=1.202558e+001; krok(n+1)=1.095618e-002; ng(n+1)=1.632511e+002;
n=11; farx(n+1)=3.911342e+000; foe(n+1)=1.138230e+001; krok(n+1)=1.998365e-003; ng(n+1)=3.313806e+002;
n=12; farx(n+1)=3.254319e+000; foe(n+1)=1.041816e+001; krok(n+1)=3.128460e-003; ng(n+1)=4.164270e+002;
n=13; farx(n+1)=1.999190e+000; foe(n+1)=8.772386e+000; krok(n+1)=1.650423e-002; ng(n+1)=2.967356e+002;
n=14; farx(n+1)=1.613593e+000; foe(n+1)=8.037443e+000; krok(n+1)=4.815473e-003; ng(n+1)=3.135872e+002;
n=15; farx(n+1)=1.271736e+000; foe(n+1)=7.308482e+000; krok(n+1)=2.420827e-003; ng(n+1)=2.985773e+002;
n=16; farx(n+1)=1.046158e+000; foe(n+1)=6.931893e+000; krok(n+1)=8.704305e-003; ng(n+1)=4.766747e+002;
n=17; farx(n+1)=9.486369e-001; foe(n+1)=6.323060e+000; krok(n+1)=1.183052e-002; ng(n+1)=3.921505e+002;
n=18; farx(n+1)=1.009741e+000; foe(n+1)=5.026503e+000; krok(n+1)=1.053841e-002; ng(n+1)=3.442509e+002;
n=19; farx(n+1)=1.098244e+000; foe(n+1)=4.536208e+000; krok(n+1)=9.240905e-003; ng(n+1)=3.842646e+002;
n=20; farx(n+1)=1.112289e+000; foe(n+1)=4.172404e+000; krok(n+1)=6.046212e-003; ng(n+1)=2.085651e+002;
n=21; farx(n+1)=1.017428e+000; foe(n+1)=3.819107e+000; krok(n+1)=1.865725e-002; ng(n+1)=1.617332e+002;
n=22; farx(n+1)=9.935555e-001; foe(n+1)=3.522543e+000; krok(n+1)=4.189449e-003; ng(n+1)=4.791846e+002;
n=23; farx(n+1)=9.668952e-001; foe(n+1)=3.428813e+000; krok(n+1)=1.417782e-002; ng(n+1)=6.573937e+001;
n=24; farx(n+1)=8.343150e-001; foe(n+1)=3.106724e+000; krok(n+1)=4.904612e-002; ng(n+1)=1.792953e+002;
n=25; farx(n+1)=7.842205e-001; foe(n+1)=2.842488e+000; krok(n+1)=3.579274e-002; ng(n+1)=1.185726e+002;
%odnowa zmiennej metryki
n=26; farx(n+1)=7.833934e-001; foe(n+1)=2.817366e+000; krok(n+1)=2.122479e-005; ng(n+1)=1.372117e+002;
n=27; farx(n+1)=7.814811e-001; foe(n+1)=2.793479e+000; krok(n+1)=1.003104e-004; ng(n+1)=6.714322e+001;
n=28; farx(n+1)=7.685054e-001; foe(n+1)=2.772358e+000; krok(n+1)=5.324041e-004; ng(n+1)=2.865719e+001;
n=29; farx(n+1)=6.889260e-001; foe(n+1)=2.323543e+000; krok(n+1)=5.457942e-003; ng(n+1)=3.930788e+001;
n=30; farx(n+1)=6.195502e-001; foe(n+1)=2.113581e+000; krok(n+1)=1.321323e-002; ng(n+1)=1.741997e+002;
n=31; farx(n+1)=6.173063e-001; foe(n+1)=2.053142e+000; krok(n+1)=6.349841e-003; ng(n+1)=4.072270e+001;
n=32; farx(n+1)=5.735245e-001; foe(n+1)=1.814164e+000; krok(n+1)=2.284436e-002; ng(n+1)=2.128346e+002;
n=33; farx(n+1)=5.289211e-001; foe(n+1)=1.675712e+000; krok(n+1)=1.097075e-002; ng(n+1)=1.311156e+002;
n=34; farx(n+1)=5.166604e-001; foe(n+1)=1.611037e+000; krok(n+1)=5.060913e-003; ng(n+1)=1.941847e+002;
n=35; farx(n+1)=5.190580e-001; foe(n+1)=1.516899e+000; krok(n+1)=1.333847e-002; ng(n+1)=9.687045e+001;
n=36; farx(n+1)=5.092156e-001; foe(n+1)=1.388665e+000; krok(n+1)=4.545636e-002; ng(n+1)=5.053805e+001;
n=37; farx(n+1)=4.890403e-001; foe(n+1)=1.230709e+000; krok(n+1)=1.308935e-002; ng(n+1)=1.979358e+002;
n=38; farx(n+1)=4.658530e-001; foe(n+1)=1.155993e+000; krok(n+1)=1.279818e-002; ng(n+1)=1.299915e+002;
n=39; farx(n+1)=4.140522e-001; foe(n+1)=9.727766e-001; krok(n+1)=3.221469e-002; ng(n+1)=2.881434e+002;
n=40; farx(n+1)=4.080207e-001; foe(n+1)=9.444039e-001; krok(n+1)=2.007255e-003; ng(n+1)=1.043199e+002;
n=41; farx(n+1)=3.916179e-001; foe(n+1)=8.804360e-001; krok(n+1)=4.799811e-002; ng(n+1)=8.197805e+001;
n=42; farx(n+1)=3.954669e-001; foe(n+1)=8.297410e-001; krok(n+1)=9.447410e-003; ng(n+1)=9.576488e+001;
n=43; farx(n+1)=3.876942e-001; foe(n+1)=7.880265e-001; krok(n+1)=3.467713e-002; ng(n+1)=9.059395e+001;
n=44; farx(n+1)=3.622909e-001; foe(n+1)=7.058159e-001; krok(n+1)=5.983917e-002; ng(n+1)=9.653639e+001;
n=45; farx(n+1)=3.543889e-001; foe(n+1)=6.713647e-001; krok(n+1)=9.375382e-003; ng(n+1)=9.842042e+001;
n=46; farx(n+1)=3.469095e-001; foe(n+1)=6.551944e-001; krok(n+1)=3.192003e-002; ng(n+1)=8.755654e+001;
n=47; farx(n+1)=3.331866e-001; foe(n+1)=6.367801e-001; krok(n+1)=3.034189e-002; ng(n+1)=4.244589e+001;
n=48; farx(n+1)=3.187886e-001; foe(n+1)=6.163384e-001; krok(n+1)=5.082412e-002; ng(n+1)=4.754313e+001;
n=49; farx(n+1)=3.114167e-001; foe(n+1)=5.922539e-001; krok(n+1)=4.002904e-002; ng(n+1)=8.688594e+001;
n=50; farx(n+1)=3.184775e-001; foe(n+1)=5.687446e-001; krok(n+1)=1.312394e-001; ng(n+1)=8.281046e+001;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
