%uczenie predyktora oe
clear all;
n=0; farx(n+1)=2.442479e+002; foe(n+1)=2.533001e+002; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=1.560005e+002; foe(n+1)=1.617813e+002; krok(n+1)=4.731952e-004; ng(n+1)=1.447576e+003;
n=2; farx(n+1)=6.042160e+001; foe(n+1)=6.023493e+001; krok(n+1)=5.557598e-003; ng(n+1)=6.357976e+002;
n=3; farx(n+1)=5.890561e+001; foe(n+1)=5.758831e+001; krok(n+1)=3.473809e-003; ng(n+1)=2.177883e+002;
n=4; farx(n+1)=5.526900e+001; foe(n+1)=5.657946e+001; krok(n+1)=3.941672e-003; ng(n+1)=1.145478e+002;
n=5; farx(n+1)=2.670152e+001; foe(n+1)=4.354270e+001; krok(n+1)=5.857529e-002; ng(n+1)=1.016163e+002;
n=6; farx(n+1)=1.784731e+001; foe(n+1)=3.214653e+001; krok(n+1)=5.557598e-003; ng(n+1)=3.102039e+002;
n=7; farx(n+1)=1.704011e+001; foe(n+1)=3.107777e+001; krok(n+1)=7.368272e-004; ng(n+1)=2.607270e+002;
n=8; farx(n+1)=1.181977e+001; foe(n+1)=2.625019e+001; krok(n+1)=3.065383e-003; ng(n+1)=3.052734e+002;
n=9; farx(n+1)=1.123169e+001; foe(n+1)=2.317523e+001; krok(n+1)=1.270603e-002; ng(n+1)=4.932997e+002;
n=10; farx(n+1)=1.017987e+001; foe(n+1)=2.179138e+001; krok(n+1)=1.559274e-002; ng(n+1)=3.138172e+002;
n=11; farx(n+1)=1.037734e+001; foe(n+1)=2.123201e+001; krok(n+1)=9.050552e-003; ng(n+1)=2.972631e+002;
n=12; farx(n+1)=8.391305e+000; foe(n+1)=1.558647e+001; krok(n+1)=1.881038e-002; ng(n+1)=5.551289e+002;
n=13; farx(n+1)=7.477776e+000; foe(n+1)=1.387896e+001; krok(n+1)=3.559503e-003; ng(n+1)=5.112052e+002;
n=14; farx(n+1)=6.607201e+000; foe(n+1)=1.306766e+001; krok(n+1)=5.557598e-003; ng(n+1)=2.680497e+002;
n=15; farx(n+1)=5.301394e+000; foe(n+1)=1.207091e+001; krok(n+1)=5.852382e-003; ng(n+1)=2.240185e+002;
n=16; farx(n+1)=4.984147e+000; foe(n+1)=1.158501e+001; krok(n+1)=1.526430e-002; ng(n+1)=2.460582e+002;
n=17; farx(n+1)=4.545206e+000; foe(n+1)=1.107363e+001; krok(n+1)=5.167850e-003; ng(n+1)=2.568047e+002;
n=18; farx(n+1)=3.725825e+000; foe(n+1)=1.001000e+001; krok(n+1)=1.551403e-002; ng(n+1)=3.058196e+002;
n=19; farx(n+1)=3.262467e+000; foe(n+1)=9.546139e+000; krok(n+1)=3.806601e-003; ng(n+1)=5.072014e+002;
n=20; farx(n+1)=2.813343e+000; foe(n+1)=8.342438e+000; krok(n+1)=1.417782e-002; ng(n+1)=4.701624e+002;
n=21; farx(n+1)=2.620016e+000; foe(n+1)=7.941623e+000; krok(n+1)=4.629191e-003; ng(n+1)=5.164467e+002;
n=22; farx(n+1)=1.593723e+000; foe(n+1)=5.826894e+000; krok(n+1)=1.982937e-002; ng(n+1)=4.629602e+002;
n=23; farx(n+1)=1.310955e+000; foe(n+1)=5.351774e+000; krok(n+1)=3.683227e-003; ng(n+1)=5.194652e+002;
n=24; farx(n+1)=1.216116e+000; foe(n+1)=5.005859e+000; krok(n+1)=3.544455e-003; ng(n+1)=3.383902e+002;
n=25; farx(n+1)=8.591525e-001; foe(n+1)=4.313526e+000; krok(n+1)=1.910413e-002; ng(n+1)=2.027635e+002;
%odnowa zmiennej metryki
n=26; farx(n+1)=8.608325e-001; foe(n+1)=4.223906e+000; krok(n+1)=1.416371e-005; ng(n+1)=2.939946e+002;
n=27; farx(n+1)=8.735178e-001; foe(n+1)=4.183003e+000; krok(n+1)=3.565785e-005; ng(n+1)=1.604348e+002;
n=28; farx(n+1)=8.755912e-001; foe(n+1)=3.843274e+000; krok(n+1)=9.268097e-004; ng(n+1)=9.971015e+001;
n=29; farx(n+1)=8.790395e-001; foe(n+1)=3.495351e+000; krok(n+1)=9.349870e-004; ng(n+1)=1.057664e+002;
n=30; farx(n+1)=6.146344e-001; foe(n+1)=2.693760e+000; krok(n+1)=9.222377e-003; ng(n+1)=1.254210e+002;
n=31; farx(n+1)=5.215531e-001; foe(n+1)=2.260446e+000; krok(n+1)=5.282995e-003; ng(n+1)=7.291497e+002;
n=32; farx(n+1)=4.145266e-001; foe(n+1)=1.450131e+000; krok(n+1)=1.825465e-002; ng(n+1)=2.196199e+002;
n=33; farx(n+1)=4.108485e-001; foe(n+1)=1.287904e+000; krok(n+1)=1.965086e-003; ng(n+1)=5.873760e+002;
n=34; farx(n+1)=4.427170e-001; foe(n+1)=1.102921e+000; krok(n+1)=8.420994e-003; ng(n+1)=3.188915e+002;
n=35; farx(n+1)=4.938770e-001; foe(n+1)=1.033663e+000; krok(n+1)=8.751130e-003; ng(n+1)=1.017094e+002;
n=36; farx(n+1)=5.040971e-001; foe(n+1)=9.976715e-001; krok(n+1)=1.561853e-002; ng(n+1)=9.015898e+001;
n=37; farx(n+1)=4.815704e-001; foe(n+1)=9.524314e-001; krok(n+1)=3.477029e-002; ng(n+1)=9.597737e+001;
n=38; farx(n+1)=4.551968e-001; foe(n+1)=9.157181e-001; krok(n+1)=1.360047e-002; ng(n+1)=1.864556e+002;
n=39; farx(n+1)=4.302429e-001; foe(n+1)=8.843406e-001; krok(n+1)=5.671128e-002; ng(n+1)=1.779664e+001;
n=40; farx(n+1)=4.018015e-001; foe(n+1)=8.447678e-001; krok(n+1)=3.467713e-002; ng(n+1)=1.068968e+002;
n=41; farx(n+1)=3.879891e-001; foe(n+1)=8.133251e-001; krok(n+1)=4.953895e-002; ng(n+1)=5.682889e+001;
n=42; farx(n+1)=3.688766e-001; foe(n+1)=7.772621e-001; krok(n+1)=3.627640e-002; ng(n+1)=1.239842e+002;
n=43; farx(n+1)=3.584779e-001; foe(n+1)=7.562436e-001; krok(n+1)=4.096666e-003; ng(n+1)=2.165482e+002;
n=44; farx(n+1)=3.267798e-001; foe(n+1)=7.159897e-001; krok(n+1)=7.610620e-002; ng(n+1)=9.678513e+001;
n=45; farx(n+1)=2.892821e-001; foe(n+1)=6.440201e-001; krok(n+1)=3.104538e-002; ng(n+1)=1.919318e+002;
n=46; farx(n+1)=2.836405e-001; foe(n+1)=6.250397e-001; krok(n+1)=1.922414e-002; ng(n+1)=1.761905e+002;
n=47; farx(n+1)=2.879100e-001; foe(n+1)=6.020440e-001; krok(n+1)=5.335388e-002; ng(n+1)=5.516556e+001;
n=48; farx(n+1)=2.962944e-001; foe(n+1)=5.719531e-001; krok(n+1)=5.359529e-002; ng(n+1)=6.285005e+001;
n=49; farx(n+1)=2.970532e-001; foe(n+1)=5.637433e-001; krok(n+1)=1.615205e-002; ng(n+1)=5.219484e+001;
n=50; farx(n+1)=2.895883e-001; foe(n+1)=5.202259e-001; krok(n+1)=1.512759e-001; ng(n+1)=6.216419e+001;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
