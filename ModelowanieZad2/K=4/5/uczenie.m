%uczenie predyktora oe
clear all;
n=0; farx(n+1)=2.851057e+002; foe(n+1)=2.859454e+002; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=1.797647e+002; foe(n+1)=1.794515e+002; krok(n+1)=4.966995e-004; ng(n+1)=7.569535e+002;
n=2; farx(n+1)=1.592250e+002; foe(n+1)=1.578297e+002; krok(n+1)=1.082825e-002; ng(n+1)=1.405900e+002;
n=3; farx(n+1)=5.444878e+001; foe(n+1)=5.470989e+001; krok(n+1)=1.882699e-003; ng(n+1)=5.236735e+002;
n=4; farx(n+1)=4.761530e+001; foe(n+1)=5.237089e+001; krok(n+1)=4.210497e-003; ng(n+1)=7.922248e+001;
n=5; farx(n+1)=3.892813e+001; foe(n+1)=4.922188e+001; krok(n+1)=1.055436e-003; ng(n+1)=2.377723e+002;
n=6; farx(n+1)=2.781512e+001; foe(n+1)=3.606170e+001; krok(n+1)=5.655154e-003; ng(n+1)=4.533382e+002;
n=7; farx(n+1)=2.822091e+001; foe(n+1)=3.423041e+001; krok(n+1)=1.111520e-002; ng(n+1)=3.654914e+002;
n=8; farx(n+1)=2.524590e+001; foe(n+1)=3.271384e+001; krok(n+1)=1.258748e-002; ng(n+1)=1.790003e+002;
n=9; farx(n+1)=2.343245e+001; foe(n+1)=3.012050e+001; krok(n+1)=2.928765e-002; ng(n+1)=9.296192e+001;
n=10; farx(n+1)=2.223467e+001; foe(n+1)=2.933059e+001; krok(n+1)=3.571281e-002; ng(n+1)=7.932775e+001;
n=11; farx(n+1)=1.820011e+001; foe(n+1)=2.843262e+001; krok(n+1)=1.660195e-002; ng(n+1)=2.585877e+002;
n=12; farx(n+1)=1.608582e+001; foe(n+1)=2.707498e+001; krok(n+1)=2.067140e-002; ng(n+1)=2.646417e+002;
n=13; farx(n+1)=1.566289e+001; foe(n+1)=2.679652e+001; krok(n+1)=2.634602e-003; ng(n+1)=9.984482e+001;
n=14; farx(n+1)=1.506864e+001; foe(n+1)=2.611016e+001; krok(n+1)=1.873553e-002; ng(n+1)=1.796474e+002;
n=15; farx(n+1)=1.381931e+001; foe(n+1)=2.509280e+001; krok(n+1)=9.016309e-003; ng(n+1)=2.913861e+002;
n=16; farx(n+1)=1.266695e+001; foe(n+1)=2.406492e+001; krok(n+1)=3.544455e-003; ng(n+1)=2.922093e+002;
n=17; farx(n+1)=1.084800e+001; foe(n+1)=2.202597e+001; krok(n+1)=5.753341e-002; ng(n+1)=2.425778e+002;
n=18; farx(n+1)=8.559370e+000; foe(n+1)=2.010917e+001; krok(n+1)=3.766673e-002; ng(n+1)=3.532720e+002;
n=19; farx(n+1)=6.944978e+000; foe(n+1)=1.700542e+001; krok(n+1)=7.302728e-002; ng(n+1)=5.566737e+002;
n=20; farx(n+1)=6.183781e+000; foe(n+1)=1.583428e+001; krok(n+1)=2.258989e-002; ng(n+1)=6.240402e+002;
n=21; farx(n+1)=5.119546e+000; foe(n+1)=1.181632e+001; krok(n+1)=1.057221e-001; ng(n+1)=6.589635e+002;
n=22; farx(n+1)=4.099799e+000; foe(n+1)=1.027460e+001; krok(n+1)=8.641149e-002; ng(n+1)=3.642822e+002;
n=23; farx(n+1)=2.371312e+000; foe(n+1)=8.938300e+000; krok(n+1)=2.519998e-001; ng(n+1)=1.652512e+002;
n=24; farx(n+1)=1.836005e+000; foe(n+1)=8.179168e+000; krok(n+1)=1.028050e-001; ng(n+1)=2.180332e+002;
n=25; farx(n+1)=1.171205e+000; foe(n+1)=6.901445e+000; krok(n+1)=2.353350e-001; ng(n+1)=2.200934e+002;
%odnowa zmiennej metryki
n=26; farx(n+1)=1.164798e+000; foe(n+1)=6.743411e+000; krok(n+1)=1.567018e-005; ng(n+1)=3.531564e+002;
n=27; farx(n+1)=1.159537e+000; foe(n+1)=6.680712e+000; krok(n+1)=5.914940e-005; ng(n+1)=1.290279e+002;
n=28; farx(n+1)=1.129286e+000; foe(n+1)=6.583038e+000; krok(n+1)=1.133097e-004; ng(n+1)=1.070405e+002;
n=29; farx(n+1)=1.037518e+000; foe(n+1)=5.438521e+000; krok(n+1)=5.445782e-003; ng(n+1)=5.711797e+001;
n=30; farx(n+1)=9.079079e-001; foe(n+1)=4.749640e+000; krok(n+1)=3.621201e-003; ng(n+1)=3.143024e+002;
n=31; farx(n+1)=7.927416e-001; foe(n+1)=4.262535e+000; krok(n+1)=4.241720e-003; ng(n+1)=1.780792e+002;
n=32; farx(n+1)=7.217329e-001; foe(n+1)=3.940023e+000; krok(n+1)=1.589439e-002; ng(n+1)=3.686692e+002;
n=33; farx(n+1)=6.801658e-001; foe(n+1)=3.195065e+000; krok(n+1)=5.335388e-002; ng(n+1)=3.089906e+002;
n=34; farx(n+1)=6.557982e-001; foe(n+1)=3.024855e+000; krok(n+1)=2.113198e-002; ng(n+1)=9.992268e+001;
n=35; farx(n+1)=6.026079e-001; foe(n+1)=2.532623e+000; krok(n+1)=1.336126e-001; ng(n+1)=1.090133e+002;
n=36; farx(n+1)=6.073045e-001; foe(n+1)=2.490238e+000; krok(n+1)=6.543079e-003; ng(n+1)=1.813106e+002;
n=37; farx(n+1)=6.134844e-001; foe(n+1)=2.440846e+000; krok(n+1)=5.241643e-003; ng(n+1)=1.274493e+002;
n=38; farx(n+1)=6.107721e-001; foe(n+1)=2.327114e+000; krok(n+1)=6.677458e-002; ng(n+1)=1.351066e+002;
n=39; farx(n+1)=5.677754e-001; foe(n+1)=2.180144e+000; krok(n+1)=8.100548e-002; ng(n+1)=1.696189e+002;
n=40; farx(n+1)=5.366411e-001; foe(n+1)=1.996506e+000; krok(n+1)=1.592896e-001; ng(n+1)=2.042569e+002;
n=41; farx(n+1)=4.787751e-001; foe(n+1)=1.798698e+000; krok(n+1)=1.573255e-001; ng(n+1)=1.423023e+002;
n=42; farx(n+1)=3.990701e-001; foe(n+1)=1.573187e+000; krok(n+1)=1.865458e-001; ng(n+1)=2.413921e+002;
n=43; farx(n+1)=3.922909e-001; foe(n+1)=1.345953e+000; krok(n+1)=2.203031e-001; ng(n+1)=1.497944e+002;
n=44; farx(n+1)=3.993866e-001; foe(n+1)=1.262144e+000; krok(n+1)=1.559800e-001; ng(n+1)=1.378942e+002;
n=45; farx(n+1)=3.715605e-001; foe(n+1)=1.120556e+000; krok(n+1)=4.101489e-001; ng(n+1)=1.174320e+002;
n=46; farx(n+1)=3.124660e-001; foe(n+1)=1.041915e+000; krok(n+1)=4.741921e-001; ng(n+1)=8.077633e+001;
n=47; farx(n+1)=2.843171e-001; foe(n+1)=1.003957e+000; krok(n+1)=9.073805e-001; ng(n+1)=3.784475e+001;
n=48; farx(n+1)=2.732642e-001; foe(n+1)=9.807186e-001; krok(n+1)=2.020751e-001; ng(n+1)=9.956454e+001;
n=49; farx(n+1)=3.058448e-001; foe(n+1)=9.322506e-001; krok(n+1)=9.453922e-001; ng(n+1)=4.113129e+001;
n=50; farx(n+1)=3.128715e-001; foe(n+1)=8.724221e-001; krok(n+1)=1.476581e+000; ng(n+1)=4.708218e+001;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
