%uczenie predyktora oe
clear all;
n=0; farx(n+1)=2.977206e+002; foe(n+1)=2.977371e+002; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=1.740589e+002; foe(n+1)=1.736899e+002; krok(n+1)=5.011162e-004; ng(n+1)=8.901260e+002;
n=2; farx(n+1)=6.297996e+001; foe(n+1)=5.799572e+001; krok(n+1)=1.301252e-002; ng(n+1)=2.216226e+002;
n=3; farx(n+1)=6.158933e+001; foe(n+1)=5.737486e+001; krok(n+1)=1.595033e-003; ng(n+1)=8.080289e+001;
n=4; farx(n+1)=4.021469e+001; foe(n+1)=5.261998e+001; krok(n+1)=1.633292e-002; ng(n+1)=7.957233e+001;
n=5; farx(n+1)=1.120601e+001; foe(n+1)=1.966142e+001; krok(n+1)=2.400647e-003; ng(n+1)=3.403598e+002;
n=6; farx(n+1)=1.056542e+001; foe(n+1)=1.880941e+001; krok(n+1)=3.065633e-003; ng(n+1)=2.077629e+002;
n=7; farx(n+1)=1.035145e+001; foe(n+1)=1.818258e+001; krok(n+1)=7.138862e-004; ng(n+1)=2.740040e+002;
n=8; farx(n+1)=1.001143e+001; foe(n+1)=1.666881e+001; krok(n+1)=6.572826e-003; ng(n+1)=1.126042e+002;
n=9; farx(n+1)=9.726528e+000; foe(n+1)=1.640088e+001; krok(n+1)=2.187783e-003; ng(n+1)=2.197256e+002;
n=10; farx(n+1)=9.216474e+000; foe(n+1)=1.514764e+001; krok(n+1)=1.526430e-002; ng(n+1)=2.368117e+002;
n=11; farx(n+1)=7.644616e+000; foe(n+1)=1.253349e+001; krok(n+1)=1.495979e-002; ng(n+1)=2.921484e+002;
n=12; farx(n+1)=5.706220e+000; foe(n+1)=9.189542e+000; krok(n+1)=4.030924e-002; ng(n+1)=3.690728e+002;
n=13; farx(n+1)=4.735152e+000; foe(n+1)=8.019366e+000; krok(n+1)=8.029022e-003; ng(n+1)=4.010748e+002;
n=14; farx(n+1)=4.128394e+000; foe(n+1)=7.171816e+000; krok(n+1)=1.983052e-003; ng(n+1)=5.523685e+002;
n=15; farx(n+1)=3.906460e+000; foe(n+1)=6.761133e+000; krok(n+1)=1.479856e-002; ng(n+1)=3.254320e+002;
n=16; farx(n+1)=2.359718e+000; foe(n+1)=5.112882e+000; krok(n+1)=1.416892e-001; ng(n+1)=1.461735e+002;
n=17; farx(n+1)=7.626754e-001; foe(n+1)=2.679091e+000; krok(n+1)=2.889625e-001; ng(n+1)=3.712542e+002;
n=18; farx(n+1)=5.918730e-001; foe(n+1)=2.338021e+000; krok(n+1)=1.125137e-001; ng(n+1)=7.633583e+001;
n=19; farx(n+1)=5.519511e-001; foe(n+1)=2.105839e+000; krok(n+1)=1.438191e-001; ng(n+1)=8.853483e+001;
n=20; farx(n+1)=5.376112e-001; foe(n+1)=1.451551e+000; krok(n+1)=3.013485e-001; ng(n+1)=2.491900e+002;
n=21; farx(n+1)=5.362426e-001; foe(n+1)=1.073372e+000; krok(n+1)=3.152950e-001; ng(n+1)=1.611015e+002;
n=22; farx(n+1)=5.114570e-001; foe(n+1)=9.582461e-001; krok(n+1)=4.079802e-001; ng(n+1)=1.203297e+002;
n=23; farx(n+1)=4.414417e-001; foe(n+1)=8.116110e-001; krok(n+1)=7.011953e-001; ng(n+1)=3.957946e+001;
n=24; farx(n+1)=3.487924e-001; foe(n+1)=6.755836e-001; krok(n+1)=9.145402e-001; ng(n+1)=4.881651e+001;
n=25; farx(n+1)=3.628429e-001; foe(n+1)=6.266794e-001; krok(n+1)=5.226535e-001; ng(n+1)=9.118030e+001;
%odnowa zmiennej metryki
n=26; farx(n+1)=3.608417e-001; foe(n+1)=6.213712e-001; krok(n+1)=1.906226e-004; ng(n+1)=1.619998e+001;
n=27; farx(n+1)=3.593910e-001; foe(n+1)=6.182578e-001; krok(n+1)=2.556514e-005; ng(n+1)=3.108547e+001;
n=28; farx(n+1)=3.585263e-001; foe(n+1)=6.178059e-001; krok(n+1)=9.012338e-005; ng(n+1)=6.584778e+000;
n=29; farx(n+1)=3.508305e-001; foe(n+1)=6.075548e-001; krok(n+1)=2.583925e-003; ng(n+1)=7.412928e+000;
n=30; farx(n+1)=3.643952e-001; foe(n+1)=5.934319e-001; krok(n+1)=3.201356e-002; ng(n+1)=2.770814e+000;
n=31; farx(n+1)=3.620737e-001; foe(n+1)=5.871071e-001; krok(n+1)=3.769903e-002; ng(n+1)=7.549304e+000;
n=32; farx(n+1)=3.476572e-001; foe(n+1)=5.849071e-001; krok(n+1)=2.680031e-002; ng(n+1)=2.779662e+001;
n=33; farx(n+1)=3.494020e-001; foe(n+1)=5.775837e-001; krok(n+1)=1.668649e-001; ng(n+1)=2.070433e+001;
n=34; farx(n+1)=3.365672e-001; foe(n+1)=5.715831e-001; krok(n+1)=1.362955e-001; ng(n+1)=2.894701e+001;
n=35; farx(n+1)=3.362035e-001; foe(n+1)=5.656877e-001; krok(n+1)=4.508009e-002; ng(n+1)=5.345481e+001;
n=36; farx(n+1)=3.434328e-001; foe(n+1)=5.587140e-001; krok(n+1)=1.778431e-001; ng(n+1)=2.160344e+001;
n=37; farx(n+1)=3.433337e-001; foe(n+1)=5.387952e-001; krok(n+1)=7.011953e-001; ng(n+1)=1.962765e+001;
n=38; farx(n+1)=3.436130e-001; foe(n+1)=5.345239e-001; krok(n+1)=8.662598e-002; ng(n+1)=2.294936e+001;
n=39; farx(n+1)=3.424954e-001; foe(n+1)=5.279004e-001; krok(n+1)=1.775417e-001; ng(n+1)=1.639158e+001;
n=40; farx(n+1)=3.359226e-001; foe(n+1)=5.173528e-001; krok(n+1)=1.919924e-001; ng(n+1)=2.422403e+001;
n=41; farx(n+1)=3.169864e-001; foe(n+1)=5.115758e-001; krok(n+1)=3.827775e-001; ng(n+1)=2.028012e+001;
n=42; farx(n+1)=3.029827e-001; foe(n+1)=5.072677e-001; krok(n+1)=5.738785e-001; ng(n+1)=1.877373e+001;
n=43; farx(n+1)=2.980847e-001; foe(n+1)=5.040785e-001; krok(n+1)=3.550835e-001; ng(n+1)=1.743187e+001;
n=44; farx(n+1)=3.020481e-001; foe(n+1)=5.000416e-001; krok(n+1)=8.377184e-001; ng(n+1)=1.190146e+001;
n=45; farx(n+1)=2.926448e-001; foe(n+1)=4.969998e-001; krok(n+1)=1.111741e+000; ng(n+1)=7.427643e+000;
n=46; farx(n+1)=2.807896e-001; foe(n+1)=4.944257e-001; krok(n+1)=5.894966e-001; ng(n+1)=8.247903e+000;
n=47; farx(n+1)=2.707475e-001; foe(n+1)=4.922838e-001; krok(n+1)=2.349459e-001; ng(n+1)=2.218856e+001;
n=48; farx(n+1)=2.543163e-001; foe(n+1)=4.888555e-001; krok(n+1)=5.520515e-001; ng(n+1)=8.043054e+000;
n=49; farx(n+1)=2.485304e-001; foe(n+1)=4.868253e-001; krok(n+1)=4.228235e-001; ng(n+1)=2.436995e+001;
n=50; farx(n+1)=2.421438e-001; foe(n+1)=4.814109e-001; krok(n+1)=6.807263e-001; ng(n+1)=1.886524e+001;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
