%uczenie predyktora oe
clear all;
n=0; farx(n+1)=1.846467e+002; foe(n+1)=1.874098e+002; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=1.780745e+002; foe(n+1)=1.804896e+002; krok(n+1)=5.362293e-004; ng(n+1)=2.293753e+002;
n=2; farx(n+1)=1.743038e+002; foe(n+1)=1.759571e+002; krok(n+1)=3.941672e-003; ng(n+1)=1.070457e+002;
n=3; farx(n+1)=5.823591e+001; foe(n+1)=6.302393e+001; krok(n+1)=1.610734e-002; ng(n+1)=1.153034e+002;
n=4; farx(n+1)=5.711937e+001; foe(n+1)=6.169588e+001; krok(n+1)=4.848544e-004; ng(n+1)=2.115512e+002;
n=5; farx(n+1)=7.213016e+001; foe(n+1)=6.016367e+001; krok(n+1)=3.719917e-002; ng(n+1)=2.315287e+002;
n=6; farx(n+1)=4.694656e+001; foe(n+1)=4.591908e+001; krok(n+1)=1.115271e-001; ng(n+1)=4.478332e+001;
n=7; farx(n+1)=4.409832e+001; foe(n+1)=4.437359e+001; krok(n+1)=1.915237e-003; ng(n+1)=1.068357e+002;
n=8; farx(n+1)=3.601375e+001; foe(n+1)=4.243283e+001; krok(n+1)=3.076926e-002; ng(n+1)=5.957644e+001;
n=9; farx(n+1)=2.931728e+001; foe(n+1)=4.062472e+001; krok(n+1)=7.627492e-003; ng(n+1)=8.763407e+001;
n=10; farx(n+1)=1.832588e+001; foe(n+1)=3.863281e+001; krok(n+1)=1.278106e-002; ng(n+1)=1.467619e+002;
n=11; farx(n+1)=1.493254e+001; foe(n+1)=3.798022e+001; krok(n+1)=1.000091e-002; ng(n+1)=2.450028e+002;
n=12; farx(n+1)=1.388084e+001; foe(n+1)=3.731902e+001; krok(n+1)=2.334578e-002; ng(n+1)=2.261391e+002;
n=13; farx(n+1)=9.768153e+000; foe(n+1)=3.067084e+001; krok(n+1)=4.905012e-002; ng(n+1)=2.585366e+002;
n=14; farx(n+1)=7.690425e+000; foe(n+1)=2.804954e+001; krok(n+1)=6.970444e-003; ng(n+1)=1.866726e+002;
n=15; farx(n+1)=8.165904e+000; foe(n+1)=2.653831e+001; krok(n+1)=3.886030e-003; ng(n+1)=2.994774e+002;
n=16; farx(n+1)=8.238652e+000; foe(n+1)=2.631957e+001; krok(n+1)=1.021844e-003; ng(n+1)=3.011552e+002;
n=17; farx(n+1)=7.977407e+000; foe(n+1)=2.287342e+001; krok(n+1)=5.598693e-002; ng(n+1)=8.062440e+002;
n=18; farx(n+1)=8.027518e+000; foe(n+1)=2.252666e+001; krok(n+1)=2.716773e-003; ng(n+1)=1.168224e+003;
n=19; farx(n+1)=7.037911e+000; foe(n+1)=2.215953e+001; krok(n+1)=8.035313e-002; ng(n+1)=4.393126e+002;
n=20; farx(n+1)=6.111540e+000; foe(n+1)=2.089647e+001; krok(n+1)=1.809599e-001; ng(n+1)=5.596528e+002;
n=21; farx(n+1)=2.535645e+000; foe(n+1)=1.248397e+001; krok(n+1)=3.706964e-001; ng(n+1)=1.364920e+003;
n=22; farx(n+1)=2.165202e+000; foe(n+1)=1.158194e+001; krok(n+1)=9.642176e-002; ng(n+1)=2.923460e+002;
n=23; farx(n+1)=2.061128e+000; foe(n+1)=1.037851e+001; krok(n+1)=2.307159e-002; ng(n+1)=3.363463e+002;
n=24; farx(n+1)=2.174786e+000; foe(n+1)=9.685548e+000; krok(n+1)=1.523673e-001; ng(n+1)=4.977744e+002;
n=25; farx(n+1)=1.891805e+000; foe(n+1)=8.840302e+000; krok(n+1)=3.276344e-002; ng(n+1)=3.664088e+002;
%odnowa zmiennej metryki
n=26; farx(n+1)=1.809711e+000; foe(n+1)=8.600510e+000; krok(n+1)=1.448879e-005; ng(n+1)=3.090597e+002;
n=27; farx(n+1)=1.744907e+000; foe(n+1)=8.349231e+000; krok(n+1)=8.388029e-005; ng(n+1)=1.565687e+002;
n=28; farx(n+1)=1.702796e+000; foe(n+1)=8.065336e+000; krok(n+1)=2.057254e-004; ng(n+1)=1.203650e+002;
n=29; farx(n+1)=1.542960e+000; foe(n+1)=7.883109e+000; krok(n+1)=4.129769e-004; ng(n+1)=8.349074e+001;
n=30; farx(n+1)=1.329687e+000; foe(n+1)=6.557819e+000; krok(n+1)=6.118798e-003; ng(n+1)=1.063241e+002;
n=31; farx(n+1)=1.151460e+000; foe(n+1)=5.015637e+000; krok(n+1)=7.777929e-003; ng(n+1)=3.523317e+002;
n=32; farx(n+1)=1.116693e+000; foe(n+1)=4.566086e+000; krok(n+1)=7.737158e-003; ng(n+1)=1.574641e+002;
n=33; farx(n+1)=1.058234e+000; foe(n+1)=4.392217e+000; krok(n+1)=2.788178e-002; ng(n+1)=2.280204e+002;
n=34; farx(n+1)=9.381189e-001; foe(n+1)=3.923103e+000; krok(n+1)=9.656284e-002; ng(n+1)=1.747438e+002;
n=35; farx(n+1)=9.519883e-001; foe(n+1)=3.392655e+000; krok(n+1)=2.967304e-002; ng(n+1)=2.455414e+002;
n=36; farx(n+1)=9.296964e-001; foe(n+1)=2.933848e+000; krok(n+1)=7.530795e-003; ng(n+1)=2.125438e+002;
n=37; farx(n+1)=8.588727e-001; foe(n+1)=2.210451e+000; krok(n+1)=5.893163e-002; ng(n+1)=1.237223e+002;
n=38; farx(n+1)=7.390248e-001; foe(n+1)=1.826902e+000; krok(n+1)=1.725040e-001; ng(n+1)=7.818164e+001;
n=39; farx(n+1)=6.818888e-001; foe(n+1)=1.650586e+000; krok(n+1)=1.125137e-001; ng(n+1)=4.866622e+001;
n=40; farx(n+1)=6.494305e-001; foe(n+1)=1.552771e+000; krok(n+1)=4.226396e-002; ng(n+1)=1.264163e+002;
n=41; farx(n+1)=6.096519e-001; foe(n+1)=1.434169e+000; krok(n+1)=3.730916e-001; ng(n+1)=5.103041e+001;
n=42; farx(n+1)=5.900826e-001; foe(n+1)=1.326344e+000; krok(n+1)=8.674420e-001; ng(n+1)=6.535243e+001;
n=43; farx(n+1)=5.745281e-001; foe(n+1)=1.279725e+000; krok(n+1)=6.287558e-001; ng(n+1)=4.318731e+001;
n=44; farx(n+1)=5.598477e-001; foe(n+1)=1.234672e+000; krok(n+1)=8.923142e-001; ng(n+1)=3.350885e+001;
n=45; farx(n+1)=5.625511e-001; foe(n+1)=1.190071e+000; krok(n+1)=7.491049e-001; ng(n+1)=4.923283e+001;
n=46; farx(n+1)=5.711064e-001; foe(n+1)=1.127077e+000; krok(n+1)=7.113726e-001; ng(n+1)=4.184124e+001;
n=47; farx(n+1)=5.718572e-001; foe(n+1)=1.096867e+000; krok(n+1)=4.461084e-001; ng(n+1)=3.559919e+001;
n=48; farx(n+1)=5.782180e-001; foe(n+1)=1.058982e+000; krok(n+1)=3.281891e-001; ng(n+1)=8.011852e+001;
n=49; farx(n+1)=5.626153e-001; foe(n+1)=1.035192e+000; krok(n+1)=6.449478e-001; ng(n+1)=2.008978e+001;
n=50; farx(n+1)=5.266764e-001; foe(n+1)=1.013517e+000; krok(n+1)=8.551938e-001; ng(n+1)=3.842673e+001;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
