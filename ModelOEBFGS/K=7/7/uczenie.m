%uczenie predyktora oe
clear all;
n=0; farx(n+1)=1.944752e+002; foe(n+1)=1.938575e+002; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=1.690092e+002; foe(n+1)=1.699176e+002; krok(n+1)=5.324041e-004; ng(n+1)=5.793800e+002;
n=2; farx(n+1)=6.158003e+001; foe(n+1)=6.631539e+001; krok(n+1)=9.473853e-003; ng(n+1)=3.123598e+002;
n=3; farx(n+1)=5.788163e+001; foe(n+1)=6.177671e+001; krok(n+1)=1.624224e-003; ng(n+1)=2.998811e+002;
n=4; farx(n+1)=5.510029e+001; foe(n+1)=6.108230e+001; krok(n+1)=4.841655e-003; ng(n+1)=7.176803e+001;
n=5; farx(n+1)=2.208694e+001; foe(n+1)=5.212071e+001; krok(n+1)=2.117616e-002; ng(n+1)=1.116609e+002;
n=6; farx(n+1)=9.648415e+000; foe(n+1)=4.711740e+001; krok(n+1)=2.707062e-003; ng(n+1)=7.394147e+002;
n=7; farx(n+1)=5.467801e+000; foe(n+1)=4.435765e+001; krok(n+1)=1.064808e-003; ng(n+1)=1.575090e+003;
n=8; farx(n+1)=4.402326e+000; foe(n+1)=4.287314e+001; krok(n+1)=2.400073e-004; ng(n+1)=3.231355e+003;
n=9; farx(n+1)=4.223005e+000; foe(n+1)=4.219100e+001; krok(n+1)=1.424799e-003; ng(n+1)=4.166987e+003;
n=10; farx(n+1)=4.027799e+000; foe(n+1)=4.112939e+001; krok(n+1)=1.532816e-003; ng(n+1)=4.841369e+003;
n=11; farx(n+1)=3.924136e+000; foe(n+1)=4.051590e+001; krok(n+1)=1.478815e-003; ng(n+1)=4.954435e+003;
n=12; farx(n+1)=4.153912e+000; foe(n+1)=2.743431e+001; krok(n+1)=1.532510e-002; ng(n+1)=4.449800e+003;
n=13; farx(n+1)=4.584197e+000; foe(n+1)=2.630163e+001; krok(n+1)=3.273007e-005; ng(n+1)=2.958407e+003;
n=14; farx(n+1)=5.613969e+000; foe(n+1)=2.486635e+001; krok(n+1)=6.374691e-003; ng(n+1)=3.256552e+003;
n=15; farx(n+1)=6.284611e+000; foe(n+1)=2.306234e+001; krok(n+1)=1.508794e-003; ng(n+1)=2.355279e+003;
n=16; farx(n+1)=6.552245e+000; foe(n+1)=2.132157e+001; krok(n+1)=1.270603e-002; ng(n+1)=1.021761e+003;
n=17; farx(n+1)=6.164334e+000; foe(n+1)=1.866138e+001; krok(n+1)=4.605442e-003; ng(n+1)=5.010611e+002;
n=18; farx(n+1)=5.767046e+000; foe(n+1)=1.671657e+001; krok(n+1)=5.548179e-003; ng(n+1)=6.583330e+002;
n=19; farx(n+1)=5.265536e+000; foe(n+1)=1.489429e+001; krok(n+1)=9.787685e-003; ng(n+1)=3.360635e+002;
n=20; farx(n+1)=4.905347e+000; foe(n+1)=1.273639e+001; krok(n+1)=5.906887e-003; ng(n+1)=5.530885e+002;
n=21; farx(n+1)=3.895395e+000; foe(n+1)=1.052269e+001; krok(n+1)=2.954351e-002; ng(n+1)=8.689177e+002;
n=22; farx(n+1)=3.637539e+000; foe(n+1)=9.647546e+000; krok(n+1)=4.912155e-003; ng(n+1)=1.166709e+003;
n=23; farx(n+1)=2.913152e+000; foe(n+1)=8.513164e+000; krok(n+1)=1.470844e-002; ng(n+1)=2.572051e+002;
n=24; farx(n+1)=2.569091e+000; foe(n+1)=8.024795e+000; krok(n+1)=8.996953e-003; ng(n+1)=3.698754e+002;
n=25; farx(n+1)=1.494944e+000; foe(n+1)=6.023275e+000; krok(n+1)=2.592196e-002; ng(n+1)=5.114185e+002;
%odnowa zmiennej metryki
n=26; farx(n+1)=1.468614e+000; foe(n+1)=5.546424e+000; krok(n+1)=1.030147e-005; ng(n+1)=9.025304e+002;
n=27; farx(n+1)=1.436309e+000; foe(n+1)=5.444001e+000; krok(n+1)=5.770216e-005; ng(n+1)=1.613319e+002;
n=28; farx(n+1)=1.451098e+000; foe(n+1)=5.325445e+000; krok(n+1)=1.851494e-004; ng(n+1)=1.030546e+002;
n=29; farx(n+1)=1.405599e+000; foe(n+1)=4.347912e+000; krok(n+1)=2.998733e-003; ng(n+1)=8.824357e+001;
n=30; farx(n+1)=1.215348e+000; foe(n+1)=3.052671e+000; krok(n+1)=1.034736e-002; ng(n+1)=9.753250e+001;
n=31; farx(n+1)=1.142854e+000; foe(n+1)=2.795052e+000; krok(n+1)=3.625910e-003; ng(n+1)=2.596956e+002;
n=32; farx(n+1)=1.065393e+000; foe(n+1)=2.214506e+000; krok(n+1)=3.248447e-003; ng(n+1)=4.050016e+002;
n=33; farx(n+1)=1.017162e+000; foe(n+1)=1.733692e+000; krok(n+1)=7.585588e-003; ng(n+1)=3.819124e+002;
n=34; farx(n+1)=8.828096e-001; foe(n+1)=1.433860e+000; krok(n+1)=8.202462e-003; ng(n+1)=3.793797e+002;
n=35; farx(n+1)=8.309760e-001; foe(n+1)=1.367354e+000; krok(n+1)=6.734730e-003; ng(n+1)=1.581338e+002;
n=36; farx(n+1)=6.386199e-001; foe(n+1)=1.241208e+000; krok(n+1)=2.896961e-002; ng(n+1)=2.948690e+001;
n=37; farx(n+1)=6.198381e-001; foe(n+1)=1.220566e+000; krok(n+1)=8.816889e-003; ng(n+1)=1.314144e+002;
n=38; farx(n+1)=5.974243e-001; foe(n+1)=1.194449e+000; krok(n+1)=1.370601e-002; ng(n+1)=1.059189e+002;
n=39; farx(n+1)=5.760733e-001; foe(n+1)=1.177861e+000; krok(n+1)=1.260621e-002; ng(n+1)=5.272825e+001;
n=40; farx(n+1)=5.507617e-001; foe(n+1)=1.144797e+000; krok(n+1)=1.767909e-002; ng(n+1)=2.666302e+001;
n=41; farx(n+1)=5.404550e-001; foe(n+1)=1.101247e+000; krok(n+1)=5.223014e-002; ng(n+1)=1.202273e+002;
n=42; farx(n+1)=5.399819e-001; foe(n+1)=1.081928e+000; krok(n+1)=3.982240e-002; ng(n+1)=7.341250e+001;
n=43; farx(n+1)=5.238446e-001; foe(n+1)=1.008570e+000; krok(n+1)=5.235740e-002; ng(n+1)=9.823656e+001;
n=44; farx(n+1)=5.284490e-001; foe(n+1)=9.838739e-001; krok(n+1)=1.931884e-002; ng(n+1)=5.643774e+001;
n=45; farx(n+1)=5.277606e-001; foe(n+1)=9.562367e-001; krok(n+1)=1.767909e-002; ng(n+1)=1.882967e+002;
n=46; farx(n+1)=5.319020e-001; foe(n+1)=9.091363e-001; krok(n+1)=1.211380e-001; ng(n+1)=1.726257e+002;
n=47; farx(n+1)=5.292675e-001; foe(n+1)=8.881647e-001; krok(n+1)=4.294671e-002; ng(n+1)=1.485518e+002;
n=48; farx(n+1)=5.039348e-001; foe(n+1)=8.492043e-001; krok(n+1)=5.382558e-002; ng(n+1)=5.926689e+001;
n=49; farx(n+1)=4.804308e-001; foe(n+1)=8.142907e-001; krok(n+1)=2.925850e-002; ng(n+1)=1.712447e+002;
n=50; farx(n+1)=4.197788e-001; foe(n+1)=7.382386e-001; krok(n+1)=1.096481e-001; ng(n+1)=2.992366e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
