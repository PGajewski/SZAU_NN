%uczenie predyktora oe
clear all;
n=0; farx(n+1)=1.906940e+002; foe(n+1)=1.869024e+002; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=1.770557e+002; foe(n+1)=1.731429e+002; krok(n+1)=5.623096e-004; ng(n+1)=3.835719e+002;
n=2; farx(n+1)=7.215859e+001; foe(n+1)=6.653998e+001; krok(n+1)=1.339882e-002; ng(n+1)=2.191041e+002;
n=3; farx(n+1)=6.843890e+001; foe(n+1)=6.213427e+001; krok(n+1)=1.229105e-003; ng(n+1)=2.866092e+002;
n=4; farx(n+1)=6.701174e+001; foe(n+1)=6.142511e+001; krok(n+1)=2.484942e-003; ng(n+1)=1.010310e+002;
n=5; farx(n+1)=1.940477e+001; foe(n+1)=4.854295e+001; krok(n+1)=4.346837e-002; ng(n+1)=6.392846e+001;
n=6; farx(n+1)=1.262582e+001; foe(n+1)=4.662875e+001; krok(n+1)=1.081070e-003; ng(n+1)=8.497721e+002;
n=7; farx(n+1)=1.020103e+001; foe(n+1)=4.544494e+001; krok(n+1)=5.828795e-003; ng(n+1)=1.404008e+003;
n=8; farx(n+1)=6.446271e+000; foe(n+1)=3.896524e+001; krok(n+1)=1.223144e-003; ng(n+1)=2.127608e+003;
n=9; farx(n+1)=6.129909e+000; foe(n+1)=3.867488e+001; krok(n+1)=7.697632e-005; ng(n+1)=3.741811e+003;
n=10; farx(n+1)=6.245208e+000; foe(n+1)=3.774917e+001; krok(n+1)=1.111520e-002; ng(n+1)=3.904902e+003;
n=11; farx(n+1)=6.883835e+000; foe(n+1)=2.277099e+001; krok(n+1)=4.153710e-003; ng(n+1)=3.730973e+003;
n=12; farx(n+1)=6.867162e+000; foe(n+1)=2.209904e+001; krok(n+1)=4.616173e-004; ng(n+1)=9.125517e+002;
n=13; farx(n+1)=6.999565e+000; foe(n+1)=2.154669e+001; krok(n+1)=1.532691e-003; ng(n+1)=5.467918e+002;
n=14; farx(n+1)=7.144198e+000; foe(n+1)=1.939606e+001; krok(n+1)=1.281894e-002; ng(n+1)=3.606151e+002;
n=15; farx(n+1)=6.923765e+000; foe(n+1)=1.858655e+001; krok(n+1)=3.715831e-003; ng(n+1)=3.850298e+002;
n=16; farx(n+1)=5.784675e+000; foe(n+1)=1.670953e+001; krok(n+1)=2.014462e-002; ng(n+1)=2.598114e+002;
n=17; farx(n+1)=5.127056e+000; foe(n+1)=1.571753e+001; krok(n+1)=1.442683e-003; ng(n+1)=6.417969e+002;
n=18; farx(n+1)=4.956499e+000; foe(n+1)=1.533232e+001; krok(n+1)=3.544455e-003; ng(n+1)=4.214272e+002;
n=19; farx(n+1)=3.988741e+000; foe(n+1)=1.389384e+001; krok(n+1)=2.252562e-002; ng(n+1)=1.725351e+002;
n=20; farx(n+1)=3.351998e+000; foe(n+1)=1.294856e+001; krok(n+1)=5.205007e-002; ng(n+1)=3.003626e+002;
n=21; farx(n+1)=3.072403e+000; foe(n+1)=1.250641e+001; krok(n+1)=3.804775e-003; ng(n+1)=5.055876e+002;
n=22; farx(n+1)=2.346589e+000; foe(n+1)=1.171574e+001; krok(n+1)=1.276026e-002; ng(n+1)=4.358715e+002;
n=23; farx(n+1)=1.840495e+000; foe(n+1)=1.095816e+001; krok(n+1)=8.375056e-003; ng(n+1)=3.414428e+002;
n=24; farx(n+1)=1.383304e+000; foe(n+1)=1.016257e+001; krok(n+1)=6.823373e-002; ng(n+1)=3.798663e+002;
n=25; farx(n+1)=1.069737e+000; foe(n+1)=8.250923e+000; krok(n+1)=6.306675e-002; ng(n+1)=6.166178e+002;
%odnowa zmiennej metryki
n=26; farx(n+1)=1.052859e+000; foe(n+1)=8.131739e+000; krok(n+1)=4.984478e-005; ng(n+1)=2.201805e+002;
n=27; farx(n+1)=1.025412e+000; foe(n+1)=8.005610e+000; krok(n+1)=3.117191e-005; ng(n+1)=2.535399e+002;
n=28; farx(n+1)=1.074594e+000; foe(n+1)=7.563322e+000; krok(n+1)=1.003543e-004; ng(n+1)=2.890283e+002;
n=29; farx(n+1)=8.527928e-001; foe(n+1)=4.627144e+000; krok(n+1)=2.983603e-003; ng(n+1)=1.386927e+002;
n=30; farx(n+1)=8.237225e-001; foe(n+1)=3.921638e+000; krok(n+1)=5.997467e-003; ng(n+1)=5.077847e+002;
n=31; farx(n+1)=7.390449e-001; foe(n+1)=2.898329e+000; krok(n+1)=5.368339e-003; ng(n+1)=4.113329e+002;
n=32; farx(n+1)=7.132327e-001; foe(n+1)=2.682788e+000; krok(n+1)=2.530456e-003; ng(n+1)=7.696062e+002;
n=33; farx(n+1)=6.809432e-001; foe(n+1)=2.220084e+000; krok(n+1)=2.187783e-003; ng(n+1)=7.888503e+002;
n=34; farx(n+1)=6.725795e-001; foe(n+1)=2.044821e+000; krok(n+1)=5.269205e-003; ng(n+1)=5.485043e+002;
n=35; farx(n+1)=6.585597e-001; foe(n+1)=1.829879e+000; krok(n+1)=1.109636e-002; ng(n+1)=3.070376e+002;
n=36; farx(n+1)=6.290602e-001; foe(n+1)=1.612793e+000; krok(n+1)=1.526430e-002; ng(n+1)=3.874240e+002;
n=37; farx(n+1)=6.237274e-001; foe(n+1)=1.518599e+000; krok(n+1)=1.168746e-002; ng(n+1)=1.954923e+002;
n=38; farx(n+1)=6.273928e-001; foe(n+1)=1.431622e+000; krok(n+1)=8.669283e-003; ng(n+1)=1.798332e+002;
n=39; farx(n+1)=6.323536e-001; foe(n+1)=1.310893e+000; krok(n+1)=2.517497e-002; ng(n+1)=2.043567e+002;
n=40; farx(n+1)=6.372884e-001; foe(n+1)=1.271298e+000; krok(n+1)=7.557177e-003; ng(n+1)=2.173165e+002;
n=41; farx(n+1)=6.394486e-001; foe(n+1)=1.120830e+000; krok(n+1)=9.327289e-002; ng(n+1)=9.221349e+001;
n=42; farx(n+1)=6.219023e-001; foe(n+1)=1.073929e+000; krok(n+1)=3.469665e-002; ng(n+1)=8.976579e+001;
n=43; farx(n+1)=6.146571e-001; foe(n+1)=1.036506e+000; krok(n+1)=1.308616e-002; ng(n+1)=1.017994e+002;
n=44; farx(n+1)=5.739454e-001; foe(n+1)=9.900437e-001; krok(n+1)=1.293628e-001; ng(n+1)=1.431021e+002;
n=45; farx(n+1)=5.497653e-001; foe(n+1)=9.416376e-001; krok(n+1)=1.215719e-001; ng(n+1)=1.032378e+002;
n=46; farx(n+1)=5.224600e-001; foe(n+1)=8.842132e-001; krok(n+1)=1.242215e-001; ng(n+1)=9.981195e+001;
n=47; farx(n+1)=4.783688e-001; foe(n+1)=8.326194e-001; krok(n+1)=3.155149e-001; ng(n+1)=6.055432e+001;
n=48; farx(n+1)=4.594564e-001; foe(n+1)=8.025953e-001; krok(n+1)=6.602029e-002; ng(n+1)=1.570562e+002;
n=49; farx(n+1)=4.635074e-001; foe(n+1)=7.588729e-001; krok(n+1)=1.697026e-001; ng(n+1)=1.075445e+002;
n=50; farx(n+1)=4.580978e-001; foe(n+1)=7.235586e-001; krok(n+1)=2.056099e-001; ng(n+1)=1.515908e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
