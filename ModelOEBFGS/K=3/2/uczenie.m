%uczenie predyktora oe
clear all;
n=0; farx(n+1)=2.911459e+002; foe(n+1)=2.978338e+002; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=1.705288e+002; foe(n+1)=1.729686e+002; krok(n+1)=4.788092e-004; ng(n+1)=8.830027e+002;
n=2; farx(n+1)=6.412145e+001; foe(n+1)=6.815333e+001; krok(n+1)=1.547432e-002; ng(n+1)=1.419991e+002;
n=3; farx(n+1)=6.148710e+001; foe(n+1)=6.364629e+001; krok(n+1)=2.583925e-003; ng(n+1)=2.518340e+002;
n=4; farx(n+1)=6.063361e+001; foe(n+1)=6.033686e+001; krok(n+1)=7.805422e-003; ng(n+1)=2.111007e+002;
n=5; farx(n+1)=4.807819e+001; foe(n+1)=5.701061e+001; krok(n+1)=6.703118e-002; ng(n+1)=7.934336e+001;
n=6; farx(n+1)=4.400008e+001; foe(n+1)=5.218868e+001; krok(n+1)=1.082825e-002; ng(n+1)=1.739135e+002;
n=7; farx(n+1)=4.432536e+001; foe(n+1)=5.016138e+001; krok(n+1)=2.426783e-003; ng(n+1)=2.162896e+002;
n=8; farx(n+1)=4.415772e+001; foe(n+1)=4.897191e+001; krok(n+1)=2.399905e-002; ng(n+1)=2.239281e+002;
n=9; farx(n+1)=4.550435e+001; foe(n+1)=4.718034e+001; krok(n+1)=1.815807e-002; ng(n+1)=2.140546e+002;
n=10; farx(n+1)=4.005191e+001; foe(n+1)=4.480018e+001; krok(n+1)=4.446078e-002; ng(n+1)=1.409420e+002;
n=11; farx(n+1)=2.727861e+001; foe(n+1)=4.119241e+001; krok(n+1)=2.788178e-002; ng(n+1)=1.182274e+002;
n=12; farx(n+1)=1.355406e+001; foe(n+1)=3.190598e+001; krok(n+1)=1.200247e-001; ng(n+1)=3.667148e+002;
n=13; farx(n+1)=1.218520e+001; foe(n+1)=3.028346e+001; krok(n+1)=1.269968e-002; ng(n+1)=2.382728e+002;
n=14; farx(n+1)=1.196196e+001; foe(n+1)=2.758211e+001; krok(n+1)=5.560984e-002; ng(n+1)=2.875722e+002;
n=15; farx(n+1)=6.924231e+000; foe(n+1)=2.320322e+001; krok(n+1)=2.488881e-001; ng(n+1)=1.462682e+002;
n=16; farx(n+1)=6.329708e+000; foe(n+1)=2.233311e+001; krok(n+1)=2.643052e-002; ng(n+1)=3.813718e+002;
n=17; farx(n+1)=5.367495e+000; foe(n+1)=1.959480e+001; krok(n+1)=1.076361e-001; ng(n+1)=5.041836e+002;
n=18; farx(n+1)=4.001333e+000; foe(n+1)=1.461725e+001; krok(n+1)=1.738735e-001; ng(n+1)=2.846512e+002;
n=19; farx(n+1)=4.210248e+000; foe(n+1)=1.427476e+001; krok(n+1)=5.359529e-002; ng(n+1)=2.810153e+002;
n=20; farx(n+1)=3.237583e+000; foe(n+1)=1.189032e+001; krok(n+1)=6.144464e-001; ng(n+1)=2.692549e+002;
n=21; farx(n+1)=2.658516e+000; foe(n+1)=1.022746e+001; krok(n+1)=1.400181e-001; ng(n+1)=3.366160e+002;
n=22; farx(n+1)=1.679482e+000; foe(n+1)=8.155452e+000; krok(n+1)=4.572701e-001; ng(n+1)=2.263197e+002;
n=23; farx(n+1)=1.330256e+000; foe(n+1)=6.716794e+000; krok(n+1)=2.781623e-001; ng(n+1)=2.604275e+002;
n=24; farx(n+1)=1.225476e+000; foe(n+1)=5.478271e+000; krok(n+1)=1.191322e+000; ng(n+1)=1.565592e+002;
n=25; farx(n+1)=1.101016e+000; foe(n+1)=5.033107e+000; krok(n+1)=4.317671e-001; ng(n+1)=1.835508e+002;
%odnowa zmiennej metryki
n=26; farx(n+1)=1.117416e+000; foe(n+1)=4.964715e+000; krok(n+1)=6.291931e-005; ng(n+1)=8.355891e+001;
n=27; farx(n+1)=1.121164e+000; foe(n+1)=4.934147e+000; krok(n+1)=3.999817e-005; ng(n+1)=8.214542e+001;
n=28; farx(n+1)=1.128874e+000; foe(n+1)=4.902949e+000; krok(n+1)=2.084136e-004; ng(n+1)=3.742210e+001;
n=29; farx(n+1)=1.082290e+000; foe(n+1)=4.095887e+000; krok(n+1)=1.136199e-002; ng(n+1)=2.555195e+001;
n=30; farx(n+1)=1.020908e+000; foe(n+1)=3.864842e+000; krok(n+1)=8.324349e-003; ng(n+1)=6.204255e+001;
n=31; farx(n+1)=9.264321e-001; foe(n+1)=3.633159e+000; krok(n+1)=4.548255e-003; ng(n+1)=1.491152e+002;
n=32; farx(n+1)=8.337224e-001; foe(n+1)=3.395501e+000; krok(n+1)=4.545636e-002; ng(n+1)=8.565942e+001;
n=33; farx(n+1)=8.102972e-001; foe(n+1)=2.599023e+000; krok(n+1)=1.196783e-001; ng(n+1)=1.276522e+002;
n=34; farx(n+1)=8.010628e-001; foe(n+1)=2.508444e+000; krok(n+1)=1.196180e-002; ng(n+1)=1.788966e+002;
n=35; farx(n+1)=7.529216e-001; foe(n+1)=2.243295e+000; krok(n+1)=3.469665e-002; ng(n+1)=2.068236e+002;
n=36; farx(n+1)=7.643609e-001; foe(n+1)=2.133486e+000; krok(n+1)=7.746648e-002; ng(n+1)=1.563380e+002;
n=37; farx(n+1)=6.468542e-001; foe(n+1)=1.646327e+000; krok(n+1)=2.137984e-001; ng(n+1)=9.372626e+001;
n=38; farx(n+1)=6.246258e-001; foe(n+1)=1.524395e+000; krok(n+1)=1.390811e-001; ng(n+1)=7.658090e+001;
n=39; farx(n+1)=5.935803e-001; foe(n+1)=1.425559e+000; krok(n+1)=3.619299e-001; ng(n+1)=2.648705e+001;
n=40; farx(n+1)=5.509313e-001; foe(n+1)=1.327656e+000; krok(n+1)=5.931517e-001; ng(n+1)=1.158024e+002;
n=41; farx(n+1)=5.047944e-001; foe(n+1)=1.248479e+000; krok(n+1)=9.429061e-001; ng(n+1)=7.131209e+001;
n=42; farx(n+1)=4.913467e-001; foe(n+1)=1.170751e+000; krok(n+1)=1.197662e+000; ng(n+1)=1.446431e+001;
n=43; farx(n+1)=5.112022e-001; foe(n+1)=1.120637e+000; krok(n+1)=4.980566e-001; ng(n+1)=4.213867e+001;
n=44; farx(n+1)=5.232358e-001; foe(n+1)=1.092694e+000; krok(n+1)=6.871474e-001; ng(n+1)=5.755407e+001;
n=45; farx(n+1)=4.633405e-001; foe(n+1)=1.058605e+000; krok(n+1)=1.268105e+000; ng(n+1)=1.294490e+001;
n=46; farx(n+1)=4.297366e-001; foe(n+1)=1.040070e+000; krok(n+1)=1.225747e+000; ng(n+1)=3.385072e+001;
n=47; farx(n+1)=4.130984e-001; foe(n+1)=1.015119e+000; krok(n+1)=7.847380e-001; ng(n+1)=2.960636e+001;
n=48; farx(n+1)=4.143579e-001; foe(n+1)=9.899941e-001; krok(n+1)=5.600723e-001; ng(n+1)=4.191740e+001;
n=49; farx(n+1)=4.195765e-001; foe(n+1)=9.690966e-001; krok(n+1)=3.724184e-001; ng(n+1)=4.834953e+001;
n=50; farx(n+1)=4.201890e-001; foe(n+1)=9.612584e-001; krok(n+1)=2.427388e-001; ng(n+1)=2.774926e+001;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
