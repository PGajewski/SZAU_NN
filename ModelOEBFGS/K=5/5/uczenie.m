%uczenie predyktora oe
clear all;
n=0; farx(n+1)=1.725113e+002; foe(n+1)=1.821606e+002; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=1.557983e+002; foe(n+1)=1.650286e+002; krok(n+1)=6.106204e-004; ng(n+1)=5.264265e+002;
n=2; farx(n+1)=5.942483e+001; foe(n+1)=6.728500e+001; krok(n+1)=5.711090e-003; ng(n+1)=3.785140e+002;
n=3; farx(n+1)=5.501157e+001; foe(n+1)=6.088389e+001; krok(n+1)=1.592864e-003; ng(n+1)=3.237324e+002;
n=4; farx(n+1)=4.421209e+001; foe(n+1)=5.851491e+001; krok(n+1)=1.813820e-002; ng(n+1)=4.968303e+001;
n=5; farx(n+1)=1.845613e+001; foe(n+1)=4.976228e+001; krok(n+1)=4.849441e-003; ng(n+1)=2.349210e+002;
n=6; farx(n+1)=6.948067e+000; foe(n+1)=3.531374e+001; krok(n+1)=4.002416e-003; ng(n+1)=8.172086e+002;
n=7; farx(n+1)=6.780433e+000; foe(n+1)=3.486080e+001; krok(n+1)=1.792006e-005; ng(n+1)=1.946467e+003;
n=8; farx(n+1)=6.763188e+000; foe(n+1)=3.354948e+001; krok(n+1)=5.320104e-003; ng(n+1)=2.170167e+003;
n=9; farx(n+1)=6.813788e+000; foe(n+1)=3.222774e+001; krok(n+1)=4.482666e-004; ng(n+1)=1.819082e+003;
n=10; farx(n+1)=7.326052e+000; foe(n+1)=3.082787e+001; krok(n+1)=6.800237e-003; ng(n+1)=2.017066e+003;
n=11; farx(n+1)=1.009552e+001; foe(n+1)=2.615579e+001; krok(n+1)=1.193441e-002; ng(n+1)=1.427987e+003;
n=12; farx(n+1)=9.543132e+000; foe(n+1)=2.479484e+001; krok(n+1)=1.310706e-003; ng(n+1)=4.686343e+002;
n=13; farx(n+1)=8.592953e+000; foe(n+1)=2.199025e+001; krok(n+1)=2.502130e-002; ng(n+1)=1.975319e+002;
n=14; farx(n+1)=8.639653e+000; foe(n+1)=2.173265e+001; krok(n+1)=6.303106e-003; ng(n+1)=3.231085e+002;
n=15; farx(n+1)=9.086974e+000; foe(n+1)=2.091166e+001; krok(n+1)=9.476825e-003; ng(n+1)=2.934871e+002;
n=16; farx(n+1)=6.960017e+000; foe(n+1)=1.372669e+001; krok(n+1)=9.907791e-002; ng(n+1)=2.186448e+002;
n=17; farx(n+1)=6.991051e+000; foe(n+1)=1.276516e+001; krok(n+1)=1.532691e-003; ng(n+1)=9.026155e+002;
n=18; farx(n+1)=6.674579e+000; foe(n+1)=1.125602e+001; krok(n+1)=2.171369e-003; ng(n+1)=5.232308e+002;
n=19; farx(n+1)=6.003364e+000; foe(n+1)=9.772959e+000; krok(n+1)=7.361186e-002; ng(n+1)=7.968077e+002;
n=20; farx(n+1)=4.839516e+000; foe(n+1)=8.038777e+000; krok(n+1)=4.568872e-002; ng(n+1)=4.543859e+002;
n=21; farx(n+1)=8.725503e-001; foe(n+1)=4.065656e+000; krok(n+1)=4.170483e-001; ng(n+1)=2.568156e+002;
n=22; farx(n+1)=7.075324e-001; foe(n+1)=3.401407e+000; krok(n+1)=2.701727e-001; ng(n+1)=7.993725e+001;
n=23; farx(n+1)=5.480333e-001; foe(n+1)=2.288761e+000; krok(n+1)=2.975743e-001; ng(n+1)=3.299624e+002;
n=24; farx(n+1)=5.427741e-001; foe(n+1)=1.815372e+000; krok(n+1)=1.653712e-001; ng(n+1)=4.887014e+002;
n=25; farx(n+1)=5.568171e-001; foe(n+1)=1.556034e+000; krok(n+1)=2.301336e-001; ng(n+1)=4.892347e+002;
%odnowa zmiennej metryki
n=26; farx(n+1)=5.566553e-001; foe(n+1)=1.545131e+000; krok(n+1)=2.418894e-005; ng(n+1)=8.710359e+001;
n=27; farx(n+1)=5.588447e-001; foe(n+1)=1.538287e+000; krok(n+1)=2.656342e-005; ng(n+1)=5.286471e+001;
n=28; farx(n+1)=5.536174e-001; foe(n+1)=1.532493e+000; krok(n+1)=9.108681e-005; ng(n+1)=2.483685e+001;
n=29; farx(n+1)=5.289051e-001; foe(n+1)=1.448309e+000; krok(n+1)=3.625910e-003; ng(n+1)=1.934388e+001;
n=30; farx(n+1)=5.351711e-001; foe(n+1)=1.364837e+000; krok(n+1)=1.109636e-002; ng(n+1)=1.252498e+001;
n=31; farx(n+1)=5.488440e-001; foe(n+1)=1.334481e+000; krok(n+1)=9.030079e-003; ng(n+1)=1.840730e+001;
n=32; farx(n+1)=5.719681e-001; foe(n+1)=1.269954e+000; krok(n+1)=1.328156e-001; ng(n+1)=7.097946e+001;
n=33; farx(n+1)=5.956703e-001; foe(n+1)=1.226948e+000; krok(n+1)=2.080275e-002; ng(n+1)=1.480632e+002;
n=34; farx(n+1)=5.966927e-001; foe(n+1)=1.204917e+000; krok(n+1)=3.822127e-002; ng(n+1)=4.255268e+001;
n=35; farx(n+1)=5.595248e-001; foe(n+1)=1.145304e+000; krok(n+1)=9.233170e-002; ng(n+1)=5.053871e+001;
n=36; farx(n+1)=5.514323e-001; foe(n+1)=1.127870e+000; krok(n+1)=1.741045e-002; ng(n+1)=7.397305e+001;
n=37; farx(n+1)=5.468646e-001; foe(n+1)=1.112438e+000; krok(n+1)=3.012318e-002; ng(n+1)=7.027469e+001;
n=38; farx(n+1)=5.120696e-001; foe(n+1)=1.067428e+000; krok(n+1)=5.349375e-002; ng(n+1)=9.859835e+001;
n=39; farx(n+1)=4.940995e-001; foe(n+1)=1.035668e+000; krok(n+1)=4.438543e-002; ng(n+1)=1.395416e+002;
n=40; farx(n+1)=5.187447e-001; foe(n+1)=8.987792e-001; krok(n+1)=3.505976e-001; ng(n+1)=1.820575e+002;
n=41; farx(n+1)=5.214042e-001; foe(n+1)=8.880903e-001; krok(n+1)=1.938023e-002; ng(n+1)=1.240922e+002;
n=42; farx(n+1)=5.083437e-001; foe(n+1)=8.638701e-001; krok(n+1)=7.563795e-002; ng(n+1)=5.121675e+001;
n=43; farx(n+1)=5.137840e-001; foe(n+1)=8.487447e-001; krok(n+1)=6.004768e-002; ng(n+1)=6.206872e+001;
n=44; farx(n+1)=4.617485e-001; foe(n+1)=8.116377e-001; krok(n+1)=1.794685e-001; ng(n+1)=2.311623e+001;
n=45; farx(n+1)=4.065452e-001; foe(n+1)=7.796106e-001; krok(n+1)=9.363811e-002; ng(n+1)=1.084298e+002;
n=46; farx(n+1)=3.883062e-001; foe(n+1)=7.589959e-001; krok(n+1)=1.523928e-001; ng(n+1)=1.115394e+002;
n=47; farx(n+1)=3.699119e-001; foe(n+1)=7.346209e-001; krok(n+1)=2.515310e-001; ng(n+1)=3.806774e+001;
n=48; farx(n+1)=3.543139e-001; foe(n+1)=7.143738e-001; krok(n+1)=2.833785e-001; ng(n+1)=8.379526e+001;
n=49; farx(n+1)=3.304574e-001; foe(n+1)=6.857871e-001; krok(n+1)=6.930078e-001; ng(n+1)=3.576166e+001;
n=50; farx(n+1)=3.098516e-001; foe(n+1)=6.617263e-001; krok(n+1)=2.876382e-001; ng(n+1)=6.712314e+001;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
