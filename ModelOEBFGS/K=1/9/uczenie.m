%uczenie predyktora oe
clear all;
n=0; farx(n+1)=2.859830e+002; foe(n+1)=2.857856e+002; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=1.786969e+002; foe(n+1)=1.785828e+002; krok(n+1)=5.014459e-004; ng(n+1)=4.673057e+002;
n=2; farx(n+1)=7.738781e+001; foe(n+1)=6.524449e+001; krok(n+1)=2.409855e-001; ng(n+1)=6.822602e+000;
n=3; farx(n+1)=7.742184e+001; foe(n+1)=6.515646e+001; krok(n+1)=1.302585e-005; ng(n+1)=1.398944e+002;
n=4; farx(n+1)=8.561716e+001; foe(n+1)=6.436224e+001; krok(n+1)=7.980009e-003; ng(n+1)=1.450837e+002;
n=5; farx(n+1)=7.526464e+001; foe(n+1)=6.287921e+001; krok(n+1)=1.370601e-002; ng(n+1)=7.093211e+001;
n=6; farx(n+1)=4.367095e+001; foe(n+1)=6.094989e+001; krok(n+1)=1.387540e-001; ng(n+1)=1.146709e+002;
n=7; farx(n+1)=2.746088e+001; foe(n+1)=5.847750e+001; krok(n+1)=3.167922e-002; ng(n+1)=4.132344e+002;
n=8; farx(n+1)=2.448339e+001; foe(n+1)=5.727988e+001; krok(n+1)=3.322261e-002; ng(n+1)=8.420950e+002;
n=9; farx(n+1)=2.049460e+001; foe(n+1)=5.653107e+001; krok(n+1)=6.538025e-003; ng(n+1)=9.288257e+002;
n=10; farx(n+1)=1.116482e+001; foe(n+1)=5.446792e+001; krok(n+1)=1.640492e-002; ng(n+1)=1.089960e+003;
n=11; farx(n+1)=4.370019e+000; foe(n+1)=5.010561e+001; krok(n+1)=9.228634e-002; ng(n+1)=1.889017e+003;
n=12; farx(n+1)=2.780643e+000; foe(n+1)=4.593495e+001; krok(n+1)=9.327289e-002; ng(n+1)=3.615602e+003;
n=13; farx(n+1)=1.577251e+000; foe(n+1)=3.793532e+001; krok(n+1)=1.803954e-001; ng(n+1)=4.600935e+003;
n=14; farx(n+1)=1.352790e+000; foe(n+1)=2.640088e+001; krok(n+1)=5.753289e-002; ng(n+1)=5.861531e+003;
n=15; farx(n+1)=1.289019e+000; foe(n+1)=1.554811e+001; krok(n+1)=7.289469e-001; ng(n+1)=1.555689e+003;
n=16; farx(n+1)=1.194370e+000; foe(n+1)=1.306192e+001; krok(n+1)=4.063898e-001; ng(n+1)=1.251928e+003;
n=17; farx(n+1)=1.192145e+000; foe(n+1)=1.300144e+001; krok(n+1)=7.142563e-002; ng(n+1)=1.798539e+002;
n=18; farx(n+1)=1.265426e+000; foe(n+1)=1.280333e+001; krok(n+1)=2.772031e+000; ng(n+1)=1.881117e+002;
n=19; farx(n+1)=1.246115e+000; foe(n+1)=1.265765e+001; krok(n+1)=3.210871e+000; ng(n+1)=7.639016e+001;
n=20; farx(n+1)=1.259262e+000; foe(n+1)=1.235131e+001; krok(n+1)=3.712932e+000; ng(n+1)=2.682998e+002;
n=21; farx(n+1)=1.234698e+000; foe(n+1)=1.191116e+001; krok(n+1)=3.024326e+000; ng(n+1)=6.743591e+001;
n=22; farx(n+1)=1.127436e+000; foe(n+1)=1.112938e+001; krok(n+1)=9.674899e-001; ng(n+1)=1.523658e+002;
n=23; farx(n+1)=1.125631e+000; foe(n+1)=1.093556e+001; krok(n+1)=2.301315e-001; ng(n+1)=2.367244e+002;
n=24; farx(n+1)=1.137404e+000; foe(n+1)=1.076576e+001; krok(n+1)=8.328011e-001; ng(n+1)=2.013860e+002;
n=25; farx(n+1)=1.135428e+000; foe(n+1)=1.027963e+001; krok(n+1)=2.954614e+000; ng(n+1)=1.644189e+002;
%odnowa zmiennej metryki
n=26; farx(n+1)=1.146514e+000; foe(n+1)=1.018973e+001; krok(n+1)=3.746225e-005; ng(n+1)=1.261808e+002;
n=27; farx(n+1)=1.141012e+000; foe(n+1)=1.009152e+001; krok(n+1)=2.018691e-005; ng(n+1)=1.597272e+002;
n=28; farx(n+1)=1.065951e+000; foe(n+1)=9.905001e+000; krok(n+1)=1.564230e-003; ng(n+1)=2.369631e+001;
n=29; farx(n+1)=9.954367e-001; foe(n+1)=9.408635e+000; krok(n+1)=1.721185e-003; ng(n+1)=4.367049e+001;
n=30; farx(n+1)=9.843230e-001; foe(n+1)=9.393413e+000; krok(n+1)=1.861441e-002; ng(n+1)=1.024219e+002;
n=31; farx(n+1)=8.733805e-001; foe(n+1)=8.746250e+000; krok(n+1)=1.404256e+000; ng(n+1)=1.739457e+002;
n=32; farx(n+1)=6.070625e-001; foe(n+1)=8.511733e+000; krok(n+1)=2.143812e-001; ng(n+1)=5.691062e+001;
n=33; farx(n+1)=5.467057e-001; foe(n+1)=8.462063e+000; krok(n+1)=4.187571e-001; ng(n+1)=1.354668e+002;
n=34; farx(n+1)=5.396249e-001; foe(n+1)=8.448376e+000; krok(n+1)=5.154350e-001; ng(n+1)=4.247856e+001;
n=35; farx(n+1)=5.464160e-001; foe(n+1)=8.445382e+000; krok(n+1)=6.871474e-001; ng(n+1)=1.410179e+001;
n=36; farx(n+1)=5.481521e-001; foe(n+1)=8.443902e+000; krok(n+1)=1.026286e+000; ng(n+1)=1.128450e+001;
n=37; farx(n+1)=5.510769e-001; foe(n+1)=8.443662e+000; krok(n+1)=6.564205e-001; ng(n+1)=7.000327e+000;
n=38; farx(n+1)=5.517953e-001; foe(n+1)=8.443601e+000; krok(n+1)=1.626372e+000; ng(n+1)=1.027825e+000;
n=39; farx(n+1)=5.645774e-001; foe(n+1)=8.443033e+000; krok(n+1)=1.463264e+001; ng(n+1)=4.539297e+000;
n=40; farx(n+1)=5.897028e-001; foe(n+1)=8.441919e+000; krok(n+1)=2.571390e+000; ng(n+1)=4.967002e+000;
n=41; farx(n+1)=5.916008e-001; foe(n+1)=8.441413e+000; krok(n+1)=6.780158e-001; ng(n+1)=7.572125e+000;
n=42; farx(n+1)=6.048695e-001; foe(n+1)=8.441129e+000; krok(n+1)=1.422745e+000; ng(n+1)=2.043914e+000;
n=43; farx(n+1)=6.096930e-001; foe(n+1)=8.441013e+000; krok(n+1)=1.769506e+000; ng(n+1)=2.027298e+000;
n=44; farx(n+1)=6.146661e-001; foe(n+1)=8.440976e+000; krok(n+1)=9.270274e-001; ng(n+1)=3.233375e+000;
n=45; farx(n+1)=6.159107e-001; foe(n+1)=8.440967e+000; krok(n+1)=1.289896e+000; ng(n+1)=9.813857e-001;
n=46; farx(n+1)=6.168061e-001; foe(n+1)=8.440966e+000; krok(n+1)=7.296149e-001; ng(n+1)=9.008299e-002;
n=47; farx(n+1)=6.166598e-001; foe(n+1)=8.440965e+000; krok(n+1)=1.024434e+000; ng(n+1)=1.416410e-001;
n=48; farx(n+1)=6.166211e-001; foe(n+1)=8.440965e+000; krok(n+1)=1.561580e+000; ng(n+1)=2.019305e-002;
n=49; farx(n+1)=6.166211e-001; foe(n+1)=8.440965e+000; krok(n+1)=1.147201e-005; ng(n+1)=3.327740e-003;
n=50; farx(n+1)=6.166211e-001; foe(n+1)=8.440965e+000; krok(n+1)=8.937881e-007; ng(n+1)=3.327707e-003;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
