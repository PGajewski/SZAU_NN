%uczenie predyktora oe
clear all;
n=0; farx(n+1)=2.832289e+002; foe(n+1)=2.803792e+002; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=1.748098e+002; foe(n+1)=1.719925e+002; krok(n+1)=5.100741e-004; ng(n+1)=5.690497e+002;
n=2; farx(n+1)=7.291223e+001; foe(n+1)=6.525555e+001; krok(n+1)=1.542549e-002; ng(n+1)=8.476890e+001;
n=3; farx(n+1)=7.056322e+001; foe(n+1)=6.275004e+001; krok(n+1)=1.104943e-003; ng(n+1)=1.348230e+002;
n=4; farx(n+1)=7.176144e+001; foe(n+1)=6.177588e+001; krok(n+1)=2.128042e-002; ng(n+1)=7.971377e+001;
n=5; farx(n+1)=5.027307e+001; foe(n+1)=5.862575e+001; krok(n+1)=1.808357e-002; ng(n+1)=3.248772e+001;
n=6; farx(n+1)=3.957132e+001; foe(n+1)=5.510119e+001; krok(n+1)=7.791323e-002; ng(n+1)=2.314957e+002;
n=7; farx(n+1)=1.879047e+001; foe(n+1)=5.123235e+001; krok(n+1)=6.817447e-002; ng(n+1)=2.643578e+002;
n=8; farx(n+1)=1.364006e+001; foe(n+1)=4.933808e+001; krok(n+1)=1.559909e-002; ng(n+1)=6.989596e+002;
n=9; farx(n+1)=7.642483e+000; foe(n+1)=4.348799e+001; krok(n+1)=1.961845e-001; ng(n+1)=1.053325e+003;
n=10; farx(n+1)=2.808794e+000; foe(n+1)=1.255800e+001; krok(n+1)=1.478545e-001; ng(n+1)=1.718242e+003;
n=11; farx(n+1)=2.522627e+000; foe(n+1)=1.133663e+001; krok(n+1)=1.348264e-001; ng(n+1)=1.825837e+002;
n=12; farx(n+1)=2.568005e+000; foe(n+1)=1.123604e+001; krok(n+1)=1.490738e-001; ng(n+1)=1.079379e+002;
n=13; farx(n+1)=2.323559e+000; foe(n+1)=1.038829e+001; krok(n+1)=1.213034e+000; ng(n+1)=4.137140e+001;
n=14; farx(n+1)=2.074198e+000; foe(n+1)=9.947869e+000; krok(n+1)=8.535981e-001; ng(n+1)=9.890075e+001;
n=15; farx(n+1)=1.588469e+000; foe(n+1)=9.461594e+000; krok(n+1)=1.049915e+000; ng(n+1)=7.750195e+001;
n=16; farx(n+1)=1.228913e+000; foe(n+1)=9.095086e+000; krok(n+1)=1.174409e+000; ng(n+1)=9.642285e+001;
n=17; farx(n+1)=1.099557e+000; foe(n+1)=8.926552e+000; krok(n+1)=1.625559e+000; ng(n+1)=7.510378e+001;
n=18; farx(n+1)=1.072495e+000; foe(n+1)=8.741719e+000; krok(n+1)=2.262924e+000; ng(n+1)=5.061560e+001;
n=19; farx(n+1)=9.480891e-001; foe(n+1)=8.557191e+000; krok(n+1)=1.420334e+000; ng(n+1)=9.165017e+001;
n=20; farx(n+1)=9.592216e-001; foe(n+1)=8.532083e+000; krok(n+1)=4.498732e-001; ng(n+1)=3.907927e+001;
n=21; farx(n+1)=9.101022e-001; foe(n+1)=8.506654e+000; krok(n+1)=7.763546e-001; ng(n+1)=2.289690e+001;
n=22; farx(n+1)=8.846366e-001; foe(n+1)=8.503670e+000; krok(n+1)=1.040723e+000; ng(n+1)=1.581844e+001;
n=23; farx(n+1)=8.896730e-001; foe(n+1)=8.503064e+000; krok(n+1)=1.003200e+000; ng(n+1)=6.941371e+000;
n=24; farx(n+1)=8.879337e-001; foe(n+1)=8.502631e+000; krok(n+1)=2.845490e+000; ng(n+1)=6.854699e+000;
n=25; farx(n+1)=8.554518e-001; foe(n+1)=8.498357e+000; krok(n+1)=1.169631e+001; ng(n+1)=2.565295e+000;
%odnowa zmiennej metryki
n=26; farx(n+1)=8.550888e-001; foe(n+1)=8.497948e+000; krok(n+1)=1.736589e-005; ng(n+1)=1.196164e+001;
n=27; farx(n+1)=8.551153e-001; foe(n+1)=8.497090e+000; krok(n+1)=9.776439e-005; ng(n+1)=6.248491e+000;
n=28; farx(n+1)=8.615825e-001; foe(n+1)=8.495306e+000; krok(n+1)=1.516318e-003; ng(n+1)=2.470100e+000;
n=29; farx(n+1)=8.685811e-001; foe(n+1)=8.490607e+000; krok(n+1)=2.716773e-003; ng(n+1)=3.128204e+000;
n=30; farx(n+1)=8.766660e-001; foe(n+1)=8.486313e+000; krok(n+1)=7.115888e-002; ng(n+1)=5.684244e-001;
n=31; farx(n+1)=8.169180e-001; foe(n+1)=8.478302e+000; krok(n+1)=1.454604e+000; ng(n+1)=7.908576e+000;
n=32; farx(n+1)=7.596453e-001; foe(n+1)=8.455895e+000; krok(n+1)=1.265766e+000; ng(n+1)=1.155553e+001;
n=33; farx(n+1)=7.417289e-001; foe(n+1)=8.451277e+000; krok(n+1)=5.657309e-001; ng(n+1)=2.700946e+001;
n=34; farx(n+1)=7.163668e-001; foe(n+1)=8.449521e+000; krok(n+1)=7.310195e-001; ng(n+1)=3.895605e+000;
n=35; farx(n+1)=6.848720e-001; foe(n+1)=8.447269e+000; krok(n+1)=7.011953e-001; ng(n+1)=1.393903e+001;
n=36; farx(n+1)=6.711230e-001; foe(n+1)=8.443441e+000; krok(n+1)=2.112541e+000; ng(n+1)=6.211806e+000;
n=37; farx(n+1)=6.729443e-001; foe(n+1)=8.442650e+000; krok(n+1)=5.183452e-001; ng(n+1)=7.818957e+000;
n=38; farx(n+1)=6.423401e-001; foe(n+1)=8.441579e+000; krok(n+1)=1.296088e+000; ng(n+1)=2.583011e+000;
n=39; farx(n+1)=6.301043e-001; foe(n+1)=8.441245e+000; krok(n+1)=1.106940e+000; ng(n+1)=4.766057e+000;
n=40; farx(n+1)=6.248743e-001; foe(n+1)=8.441037e+000; krok(n+1)=1.174409e+000; ng(n+1)=5.050149e+000;
n=41; farx(n+1)=6.203684e-001; foe(n+1)=8.440986e+000; krok(n+1)=7.238598e-001; ng(n+1)=1.975728e+000;
n=42; farx(n+1)=6.199259e-001; foe(n+1)=8.440973e+000; krok(n+1)=5.154350e-001; ng(n+1)=1.201174e+000;
n=43; farx(n+1)=6.173012e-001; foe(n+1)=8.440967e+000; krok(n+1)=9.089030e-001; ng(n+1)=3.720986e-001;
n=44; farx(n+1)=6.167731e-001; foe(n+1)=8.440966e+000; krok(n+1)=6.930078e-001; ng(n+1)=3.503648e-001;
n=45; farx(n+1)=6.166432e-001; foe(n+1)=8.440966e+000; krok(n+1)=1.268105e+000; ng(n+1)=2.740981e-001;
n=46; farx(n+1)=6.165653e-001; foe(n+1)=8.440965e+000; krok(n+1)=2.192737e+000; ng(n+1)=3.866655e-002;
n=47; farx(n+1)=6.166127e-001; foe(n+1)=8.440965e+000; krok(n+1)=1.051310e+000; ng(n+1)=2.491746e-002;
n=48; farx(n+1)=6.166127e-001; foe(n+1)=8.440965e+000; krok(n+1)=4.980372e-006; ng(n+1)=3.243557e-003;
n=49; farx(n+1)=6.166127e-001; foe(n+1)=8.440965e+000; krok(n+1)=8.199957e-006; ng(n+1)=3.243540e-003;
n=50; farx(n+1)=6.166127e-001; foe(n+1)=8.440965e+000; krok(n+1)=8.584111e-007; ng(n+1)=3.243514e-003;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
