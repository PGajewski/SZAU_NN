%uczenie predyktora oe
clear all;
n=0; farx(n+1)=2.156227e+002; foe(n+1)=2.109800e+002; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=1.673670e+002; foe(n+1)=1.663612e+002; krok(n+1)=5.188110e-004; ng(n+1)=7.280145e+002;
n=2; farx(n+1)=5.762647e+001; foe(n+1)=6.752643e+001; krok(n+1)=7.680234e-003; ng(n+1)=3.540492e+002;
n=3; farx(n+1)=5.250379e+001; foe(n+1)=6.118012e+001; krok(n+1)=1.170971e-003; ng(n+1)=4.276656e+002;
n=4; farx(n+1)=5.094861e+001; foe(n+1)=5.990605e+001; krok(n+1)=2.998733e-003; ng(n+1)=2.044203e+002;
n=5; farx(n+1)=1.680970e+001; foe(n+1)=5.148371e+001; krok(n+1)=3.482091e-002; ng(n+1)=8.924308e+001;
n=6; farx(n+1)=8.331499e+000; foe(n+1)=4.859034e+001; krok(n+1)=8.651099e-004; ng(n+1)=1.090199e+003;
n=7; farx(n+1)=3.646391e+000; foe(n+1)=4.570751e+001; krok(n+1)=2.774090e-003; ng(n+1)=2.460298e+003;
n=8; farx(n+1)=2.830134e+000; foe(n+1)=4.506148e+001; krok(n+1)=1.175883e-004; ng(n+1)=5.278494e+003;
n=9; farx(n+1)=3.014746e+000; foe(n+1)=4.196120e+001; krok(n+1)=2.118041e-002; ng(n+1)=6.935071e+003;
n=10; farx(n+1)=3.269934e+000; foe(n+1)=4.134922e+001; krok(n+1)=1.929081e-005; ng(n+1)=9.664864e+003;
n=11; farx(n+1)=4.910809e+000; foe(n+1)=3.863893e+001; krok(n+1)=6.544675e-003; ng(n+1)=9.514463e+003;
n=12; farx(n+1)=6.082108e+000; foe(n+1)=3.615320e+001; krok(n+1)=2.084136e-004; ng(n+1)=4.271215e+003;
n=13; farx(n+1)=6.459598e+000; foe(n+1)=3.553389e+001; krok(n+1)=2.893244e-004; ng(n+1)=1.938139e+003;
n=14; farx(n+1)=7.067758e+000; foe(n+1)=3.484062e+001; krok(n+1)=2.298967e-003; ng(n+1)=1.614294e+003;
n=15; farx(n+1)=1.069841e+001; foe(n+1)=3.137398e+001; krok(n+1)=1.859840e-002; ng(n+1)=2.160960e+003;
n=16; farx(n+1)=1.190275e+001; foe(n+1)=3.003937e+001; krok(n+1)=5.734420e-004; ng(n+1)=1.600353e+003;
n=17; farx(n+1)=1.391715e+001; foe(n+1)=2.481178e+001; krok(n+1)=2.340953e-002; ng(n+1)=4.990420e+002;
n=18; farx(n+1)=1.302801e+001; foe(n+1)=2.320937e+001; krok(n+1)=6.349841e-003; ng(n+1)=3.778605e+002;
n=19; farx(n+1)=1.182631e+001; foe(n+1)=2.122950e+001; krok(n+1)=3.544455e-003; ng(n+1)=5.935216e+002;
n=20; farx(n+1)=1.045008e+001; foe(n+1)=2.007290e+001; krok(n+1)=3.011555e-003; ng(n+1)=4.103042e+002;
n=21; farx(n+1)=5.393790e+000; foe(n+1)=1.619738e+001; krok(n+1)=2.741623e-002; ng(n+1)=1.816485e+002;
n=22; farx(n+1)=4.917074e+000; foe(n+1)=1.558105e+001; krok(n+1)=3.065633e-003; ng(n+1)=1.277046e+003;
n=23; farx(n+1)=3.758956e+000; foe(n+1)=1.399760e+001; krok(n+1)=9.195867e-003; ng(n+1)=5.720561e+002;
n=24; farx(n+1)=3.027260e+000; foe(n+1)=1.328801e+001; krok(n+1)=8.237127e-003; ng(n+1)=2.542741e+002;
n=25; farx(n+1)=2.432300e+000; foe(n+1)=1.222422e+001; krok(n+1)=2.376370e-003; ng(n+1)=8.933143e+002;
%odnowa zmiennej metryki
n=26; farx(n+1)=2.448360e+000; foe(n+1)=1.189425e+001; krok(n+1)=2.394830e-005; ng(n+1)=5.242210e+002;
n=27; farx(n+1)=2.458736e+000; foe(n+1)=1.185220e+001; krok(n+1)=5.474418e-006; ng(n+1)=3.383602e+002;
n=28; farx(n+1)=2.293395e+000; foe(n+1)=1.094387e+001; krok(n+1)=7.286672e-004; ng(n+1)=1.521028e+002;
n=29; farx(n+1)=2.470684e+000; foe(n+1)=9.232955e+000; krok(n+1)=4.896899e-004; ng(n+1)=2.852904e+002;
n=30; farx(n+1)=2.303753e+000; foe(n+1)=8.296423e+000; krok(n+1)=1.529718e-003; ng(n+1)=4.613115e+002;
n=31; farx(n+1)=1.953612e+000; foe(n+1)=5.892611e+000; krok(n+1)=4.806036e-003; ng(n+1)=1.822348e+003;
n=32; farx(n+1)=1.457622e+000; foe(n+1)=4.553063e+000; krok(n+1)=5.172508e-003; ng(n+1)=1.113966e+003;
n=33; farx(n+1)=1.332019e+000; foe(n+1)=4.094244e+000; krok(n+1)=8.790130e-004; ng(n+1)=1.852401e+003;
n=34; farx(n+1)=1.148005e+000; foe(n+1)=3.442850e+000; krok(n+1)=8.350786e-003; ng(n+1)=8.769091e+002;
n=35; farx(n+1)=1.087529e+000; foe(n+1)=3.244260e+000; krok(n+1)=5.849663e-003; ng(n+1)=4.157320e+002;
n=36; farx(n+1)=1.001509e+000; foe(n+1)=3.095679e+000; krok(n+1)=5.320104e-003; ng(n+1)=3.969296e+002;
n=37; farx(n+1)=8.317015e-001; foe(n+1)=2.700389e+000; krok(n+1)=1.333847e-002; ng(n+1)=5.330747e+002;
n=38; farx(n+1)=8.357200e-001; foe(n+1)=2.552879e+000; krok(n+1)=5.711090e-003; ng(n+1)=4.082007e+002;
n=39; farx(n+1)=7.650324e-001; foe(n+1)=2.348515e+000; krok(n+1)=8.894860e-003; ng(n+1)=3.600803e+002;
n=40; farx(n+1)=7.007748e-001; foe(n+1)=2.187895e+000; krok(n+1)=5.433546e-003; ng(n+1)=5.131790e+002;
n=41; farx(n+1)=6.718393e-001; foe(n+1)=2.061821e+000; krok(n+1)=7.850228e-003; ng(n+1)=5.387387e+002;
n=42; farx(n+1)=6.901864e-001; foe(n+1)=1.955499e+000; krok(n+1)=2.194150e-002; ng(n+1)=2.965287e+002;
n=43; farx(n+1)=8.518857e-001; foe(n+1)=1.855403e+000; krok(n+1)=5.934607e-002; ng(n+1)=1.555430e+002;
n=44; farx(n+1)=8.425818e-001; foe(n+1)=1.803863e+000; krok(n+1)=2.258989e-002; ng(n+1)=8.182911e+001;
n=45; farx(n+1)=7.794530e-001; foe(n+1)=1.735381e+000; krok(n+1)=1.879492e-002; ng(n+1)=2.446142e+002;
n=46; farx(n+1)=7.087868e-001; foe(n+1)=1.681528e+000; krok(n+1)=2.272397e-002; ng(n+1)=2.255882e+002;
n=47; farx(n+1)=6.136904e-001; foe(n+1)=1.594397e+000; krok(n+1)=1.793370e-002; ng(n+1)=2.689241e+002;
n=48; farx(n+1)=5.652436e-001; foe(n+1)=1.540676e+000; krok(n+1)=3.633140e-002; ng(n+1)=2.535955e+002;
n=49; farx(n+1)=5.151006e-001; foe(n+1)=1.441892e+000; krok(n+1)=3.497807e-002; ng(n+1)=2.617154e+002;
n=50; farx(n+1)=4.970781e-001; foe(n+1)=1.396161e+000; krok(n+1)=9.612071e-003; ng(n+1)=6.572808e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
